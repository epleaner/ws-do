{"version":3,"sources":["webpack:///../node_modules/classnames/index.js","webpack:///../node_modules/just-range/index.js","webpack:///../node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///../node_modules/prop-types/factoryWithThrowingShims.js","webpack:///../node_modules/preact/hooks/src/index.js","webpack:///../node_modules/preact/compat/src/util.js","webpack:///../node_modules/preact/compat/src/PureComponent.js","webpack:///../node_modules/preact/compat/src/suspense.js","webpack:///../node_modules/preact/compat/src/suspense-list.js","webpack:///../node_modules/preact/compat/src/portals.js","webpack:///../node_modules/preact/compat/src/render.js","webpack:///../node_modules/preact/compat/src/index.js","webpack:///../node_modules/react-piano/src/MidiNumbers.js","webpack:///../node_modules/react-piano/src/Key.js","webpack:///../node_modules/react-piano/src/Keyboard.js","webpack:///../node_modules/preact/compat/src/forwardRef.js","webpack:///../node_modules/preact/compat/src/Children.js","webpack:///../node_modules/preact/compat/src/memo.js","webpack:///../node_modules/react-piano/src/ControlledPiano.js","webpack:///../node_modules/react-piano/src/Piano.js","webpack:///./components/wsMonitor.js","webpack:///../node_modules/prop-types/index.js","webpack:///./hooks/useWs.js","webpack:///../node_modules/lodash.difference/index.js","webpack:///./utils/polysynth.js","webpack:///../node_modules/webpack/buildin/global.js","webpack:///./components/clients/synth/piano.js","webpack:///./components/clients/synth/index.js","webpack:///./routes/synth/style.css","webpack:///./routes/synth/index.js"],"names":["classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","includes","key","hasOwn","call","join","hasOwnProperty","module","exports","default","start","stop","step","Error","toReturn","increasing","emptyFunction","emptyFunctionWithReset","ReactPropTypesSecret","require","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","err","name","getShim","isRequired","ReactPropTypes","array","bigint","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","d","t","u","n","__h","r","o","__H","__","__V","c","h","s","B","__c","__N","setState","f","filter","every","this","forEach","shouldComponentUpdate","e","componentWillUpdate","__e","p","__s","z","y","_","F","current","A","concat","T","q","context","sub","value","x","useDebugValue","V","__v","__m","b","shift","__P","k","w","j","clearTimeout","g","cancelAnimationFrame","setTimeout","requestAnimationFrame","some","__b","a","__r","v","diffed","l","m","unmount","C","E","L","__k","map","U","insertBefore","__d","D","__u","__a","P","getChildContext","children","componentWillUnmount","nodeType","parentNode","childNodes","appendChild","removeChild","splice","indexOf","Q","X","cancelBubble","nn","defaultPrevented","an","$$typeof","yn","getAttributes","midiNumber","attrs","midiNumberAttributesCache","ratioToPercentage","ratio","isNaturalMidiNumber","MidiNumbers","NATURAL_MIDI_NUMBERS","isPureReactComponent","state","R","type","__f","ref","N","Symbol","for","O","count","only","toArray","then","I","__R","__O","pop","forceUpdate","render","document","createElement","fallback","W","delete","revealOrder","size","get","Map","reverse","set","componentDidUpdate","componentDidMount","H","Z","Y","$","test","isReactComponent","defineProperty","configurable","writable","K","event","persist","isPropagationStopped","isDefaultPrevented","nativeEvent","tn","en","enumerable","class","rn","vnode","toLowerCase","replace","multiple","selected","defaultValue","className","un","on","Cn","useState","useId","useReducer","useEffect","useLayoutEffect","useInsertionEffect","useTransition","useDeferredValue","useSyncExternalStore","startTransition","useRef","useImperativeHandle","useMemo","useCallback","useContext","S","version","Children","textContent","hydrate","unmountComponentAtNode","createPortal","containerInfo","createContext","createFactory","bind","cloneElement","createRef","Fragment","isValidElement","findDOMNode","base","Component","PureComponent","memo","displayName","forwardRef","flushSync","unstable_batchedUpdates","StrictMode","Suspense","SuspenseList","lazy","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentDispatcher","readContext","__n","SORTED_PITCHES","ACCIDENTAL_PITCHES","PITCH_INDEXES","Db","Eb","Gb","G","Ab","Bb","MIDI_NUMBER_C0","MIN_MIDI_NUMBER","NOTE_REGEX","NOTES_IN_OCTAVE","range","MAX_MIDI_NUMBER","reduce","cache","pitchIndex","octave","Math","floor","pitchName","note","isAccidental","buildMidiNumberAttributes","fromNote","match","exec","accidental","_match","toUpperCase","parseInt","Key","onPlayNoteInput","_this","onStopNoteInput","pitchPositions","_MidiNumbers$getAttri","getAbsoluteKeyPosition","noteRange","first","naturalKeyWidth","_this$props","accidentalWidthRatio","gliss","useTouchEvents","active","disabled","React","style","left","getRelativeKeyPosition","width","onMouseDown","onMouseUp","onMouseEnter","onMouseLeave","onTouchStart","onTouchCancel","onTouchEnd","Keyboard","last","getMidiNumbers","getNaturalKeyCount","keyWidth","getNaturalKeyWidth","keyWidthToHeight","getWidth","height","getHeight","_MidiNumbers$getAttri2","isActive","activeNotes","renderNoteLabel","_props$propName","ControlledPiano","isMouseDown","_ref","prevActiveNotes","nextActiveNotes","notesStopped","difference","playNote","stopNote","keyboardShortcuts","shortcut","find","sh","ctrlKey","metaKey","shiftKey","getMidiNumberForKey","_ref2","keyboardShortcut","getKeyForMidiNumber","window","addEventListener","onKeyDown","onKeyUp","removeEventListener","prevProps","handleNoteChanges","_ref3","Piano","prevState","otherProps","_objectWithoutProperties","_extends","handlePlayNoteInput","handleStopNoteInput","WsMonitor","websocket","ws","wsUrl","setWsUrl","history","myChannels","availableChannels","id","wsState","joinChannel","getChannels","heartbeat","broadcastMessage","sendMessageToTargetClient","sendMessageToTargetChannel","sendMessageToJoinedChannels","message","setMessage","targetChannel","setTargetChannel","targetId","setTargetId","messageIsValidJSON","JSON","parse","handleWsUrlChange","preventDefault","target","onSubmit","placeholder","stringify","onClick","channel","members","htmlFor","cols","rows","onInput","overflow","data","useWs","setWs","setHistory","setHeartbeat","setMyChannels","setAvailableChannels","setId","incomingMessage","setIncomingMessage","onMessage","async","channels","protocol","port","url","hostname","console","log","wsConnection","WebSocket","onmessage","send","readyState","CONNECTING","OPEN","CLOSING","CLOSED","_objectSpread","timestamp","Date","now","arrayIncludes","fromIndex","predicate","fromRight","index","baseFindIndex","baseIsNaN","baseIndexOf","arrayIncludesWith","comparator","arrayPush","values","offset","cacheHas","has","Hash","entries","clear","entry","ListCache","MapCache","SetCache","__data__","add","assocIndexOf","other","baseDifference","iteratee","isCommon","result","valuesLength","arrayMap","outer","computed","valuesIndex","baseFlatten","depth","isStrict","isFlattenable","baseIsNative","isObject","maskSrcKey","pattern","isFunction","isHostObject","reIsNative","reIsHostCtor","funcToString","toSource","getMapData","getNative","undefined","getValue","isArrayLikeObject","propertyIsEnumerable","objectToString","argsTag","isArguments","spreadableSymbol","isArrayLike","MAX_SAFE_INTEGER","isLength","isObjectLike","tag","funcTag","genTag","uid","HASH_UNDEFINED","freeSelf","self","root","global","Function","arrayProto","funcProto","objectProto","coreJsData","keys","IE_PROTO","RegExp","isConcatSpreadable","nativeMax","max","nativeCreate","args","otherArgs","thisArg","PolySynth","constructor","audioContext","AudioContext","webkitAudioContext","voices","velocity","voice","Voice","oscillator","createOscillator","frequency","pow","getFrequency","gainNode","createGain","gain","connect","destination","linearRampToValueAtTime","currentTime","MIDIPiano","onPlayNote","onStopNote","firstNote","lastNote","SynthClient","polySynth","setPolySynth","muteIncoming","setMuteIncoming","muteOutgoing","setMuteOutgoing","broadcastNotes","setBroadcastNotes","noteData","handlePlayNote","handleStopNote","sequencerIntervalId","setSequencerIntervalId","handleSequenceChannel","channelName","sequenceTarget","clearInterval","setInterval","targetIndex","findIndex","Monitor","checked","onChange","Synth","home"],"mappings":"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","file":"route-synth.chunk.807d5.esm.js","sourcesContent":["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","module.exports = range;\n\n/*\n  range(0, 5); // [0, 1, 2, 3, 4]\n  range(5); // [0, 1, 2, 3, 4]\n  range(-5); // [0, -1, -2, -3, -4]\n  range(0, 20, 5) // [0, 5, 10, 15]\n  range(0, -20, -5) // [0, -5, -10, -15]\n*/\n\nfunction range(start, stop, step) {\n  if (start != null && typeof start != 'number') {\n    throw new Error('start must be a number or null');\n  }\n  if (stop != null && typeof stop != 'number') {\n    throw new Error('stop must be a number or null');\n  }\n  if (step != null && typeof step != 'number') {\n    throw new Error('step must be a number or null');\n  }\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (step == null) {\n    step = stop > start ? 1 : -1;\n  }\n  var toReturn = [];\n  var increasing = start < stop; // heres the change\n  for (; increasing ? start < stop : start > stop; start += step) {\n    toReturn.push(start);\n  }\n  return toReturn;\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet EMPTY = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingValue = EMPTY;\n\t\t\t\thookItem._nextValue = hookItem._pendingArgs = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\tif (hookItem._pendingValue !== EMPTY) {\n\t\t\t\thookItem._value = hookItem._pendingValue;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t\thookItem._pendingValue = EMPTY;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({ _pendingValue: EMPTY });\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\tconst stateHooks = hookState._component.__hooks._list.filter(\n\t\t\t\t\tx => x._component\n\t\t\t\t);\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = false;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn shouldUpdate || hookState._component.props !== p\n\t\t\t\t\t? prevScu\n\t\t\t\t\t\t? prevScu.call(this, p, s, c)\n\t\t\t\t\t\t: true\n\t\t\t\t\t: false;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._pendingValue = factory();\n\t\tstate._pendingArgs = args;\n\t\tstate._factory = factory;\n\t\treturn state._pendingValue;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any, errorInfo: import('preact').ErrorInfo) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\nexport function useId() {\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal.d').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n/**\n * Check if two values are the same value\n * @param {*} x\n * @param {*} y\n * @returns {boolean}\n */\nexport function is(x, y) {\n\treturn (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport function PureComponent(p) {\n\tthis.props = p;\n}\nPureComponent.prototype = new Component();\n// Some third-party libraries check if this property is present\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function (props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n","import { Component, createElement, options, Fragment } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function (error, newVNode, oldVNode, errorInfo) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (newVNode._dom == null) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode, errorInfo);\n};\n\nconst oldUnmount = options.unmount;\noptions.unmount = function (vnode) {\n\t/** @type {import('./internal').Component} */\n\tconst component = vnode._component;\n\tif (component && component._onResolve) {\n\t\tcomponent._onResolve();\n\t}\n\n\t// if the component is still hydrating\n\t// most likely it is because the component is suspended\n\t// we set the vnode.type as `null` so that it is not a typeof function\n\t// so the unmount will remove the vnode._dom\n\tif (component && vnode._hydrating === true) {\n\t\tvnode.type = null;\n\t}\n\n\tif (oldUnmount) oldUnmount(vnode);\n};\n\nfunction detachedClone(vnode, detachedParent, parentDom) {\n\tif (vnode) {\n\t\tif (vnode._component && vnode._component.__hooks) {\n\t\t\tvnode._component.__hooks._list.forEach(effect => {\n\t\t\t\tif (typeof effect._cleanup == 'function') effect._cleanup();\n\t\t\t});\n\n\t\t\tvnode._component.__hooks = null;\n\t\t}\n\n\t\tvnode = assign({}, vnode);\n\t\tif (vnode._component != null) {\n\t\t\tif (vnode._component._parentDom === parentDom) {\n\t\t\t\tvnode._component._parentDom = detachedParent;\n\t\t\t}\n\t\t\tvnode._component = null;\n\t\t}\n\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tdetachedClone(child, detachedParent, parentDom)\n\t\t\t);\n\t}\n\n\treturn vnode;\n}\n\nfunction removeOriginal(vnode, detachedParent, originalParent) {\n\tif (vnode) {\n\t\tvnode._original = null;\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tremoveOriginal(child, detachedParent, originalParent)\n\t\t\t);\n\n\t\tif (vnode._component) {\n\t\t\tif (vnode._component._parentDom === detachedParent) {\n\t\t\t\tif (vnode._dom) {\n\t\t\t\t\toriginalParent.insertBefore(vnode._dom, vnode._nextDom);\n\t\t\t\t}\n\t\t\t\tvnode._component._force = true;\n\t\t\t\tvnode._component._parentDom = originalParent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {Promise} promise The thrown promise\n * @param {import('./internal').VNode<any, any>} suspendingVNode The suspending component\n */\nSuspense.prototype._childDidSuspend = function (promise, suspendingVNode) {\n\tconst suspendingComponent = suspendingVNode._component;\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\t\tsuspendingComponent._onResolve = null;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._onResolve = onResolved;\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\t// If the suspension was during hydration we don't need to restore the\n\t\t\t// suspended children into the _children array\n\t\t\tif (c.state._suspended) {\n\t\t\t\tconst suspendedVNode = c.state._suspended;\n\t\t\t\tc._vnode._children[0] = removeOriginal(\n\t\t\t\t\tsuspendedVNode,\n\t\t\t\t\tsuspendedVNode._component._parentDom,\n\t\t\t\t\tsuspendedVNode._component._originalParentDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * We do not set `suspended: true` during hydration because we want the actual markup\n\t * to remain on screen and hydrate it when the suspense actually gets resolved.\n\t * While in non-hydration cases the usual fallback -> component flow would occour.\n\t */\n\tconst wasHydrating = suspendingVNode._hydrating === true;\n\tif (!c._pendingSuspensionCount++ && !wasHydrating) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.componentWillUnmount = function () {\n\tthis._suspenders = [];\n};\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {import('./internal').SuspenseComponent[\"props\"]} props\n * @param {import('./internal').SuspenseState} state\n */\nSuspense.prototype.render = function (props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children) {\n\t\t\tconst detachedParent = document.createElement('div');\n\t\t\tconst detachedComponent = this._vnode._children[0]._component;\n\t\t\tthis._vnode._children[0] = detachedClone(\n\t\t\t\tthis._detachOnNextRender,\n\t\t\t\tdetachedParent,\n\t\t\t\t(detachedComponent._originalParentDom = detachedComponent._parentDom)\n\t\t\t);\n\t\t}\n\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\t// Wrap fallback tree in a VNode that prevents itself from being marked as aborting mid-hydration:\n\t/** @type {import('./internal').VNode} */\n\tconst fallback =\n\t\tstate._suspended && createElement(Fragment, null, props.fallback);\n\tif (fallback) fallback._hydrating = null;\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tfallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('./internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\t/** @type {import('./internal').Component} */\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function (child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function (props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate =\n\tSuspenseList.prototype.componentDidMount = function () {\n\t\t// Iterate through all children after mounting for two reasons:\n\t\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t\t//    The nodes can now be completely consumed from the linked list.\n\t\t// 2. Handle nodes that might have gotten resolved between render and\n\t\t//    componentDidMount.\n\t\tthis._map.forEach((node, child) => {\n\t\t\tresolve(this, child, node);\n\t\t});\n\t};\n","import { createElement, render } from 'preact';\n\n/**\n * @param {import('../../src/index').RenderableProps<{ context: any }>} props\n */\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\treturn props.children;\n}\n\n/**\n * Portal component\n * @this {import('./internal').Component}\n * @param {object | null | undefined} props\n *\n * TODO: use createRoot() instead of fake root\n */\nfunction Portal(props) {\n\tconst _this = this;\n\tlet container = props._container;\n\n\t_this.componentWillUnmount = function () {\n\t\trender(null, _this._temp);\n\t\t_this._temp = null;\n\t\t_this._container = null;\n\t};\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\t_this.componentWillUnmount();\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props._vnode) {\n\t\tif (!_this._temp) {\n\t\t\t_this._container = container;\n\n\t\t\t// Create a fake DOM parent node that manages a subset of `container`'s children:\n\t\t\t_this._temp = {\n\t\t\t\tnodeType: 1,\n\t\t\t\tparentNode: container,\n\t\t\t\tchildNodes: [],\n\t\t\t\tappendChild(child) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tinsertBefore(child, before) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tremoveChild(child) {\n\t\t\t\t\tthis.childNodes.splice(this.childNodes.indexOf(child) >>> 1, 1);\n\t\t\t\t\t_this._container.removeChild(child);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Render our wrapping element into temp.\n\t\trender(\n\t\t\tcreateElement(ContextProvider, { context: _this.context }, props._vnode),\n\t\t\t_this._temp\n\t\t);\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._temp) {\n\t\t_this.componentWillUnmount();\n\t}\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\tconst el = createElement(Portal, { _vnode: vnode, _container: container });\n\tel.containerInfo = container;\n\treturn el;\n}\n","import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\nconst CAMEL_PROPS =\n\t/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\nconst ON_ANI = /^on(Ani|Tra|Tou|BeforeInp|Compo)/;\nconst CAMEL_REPLACE = /[A-Z0-9]/g;\n\nconst IS_DOM = typeof document !== 'undefined';\n\n// Input types for which onchange should not be converted to oninput.\n// type=\"file|checkbox|radio\", plus \"range\" in IE11.\n// (IE11 doesn't support Symbol, which we use here to turn `rad` into `ra` which matches \"range\")\nconst onChangeInputType = type =>\n\t(typeof Symbol != 'undefined' && typeof Symbol() == 'symbol'\n\t\t? /fil|che|rad/\n\t\t: /fil|che|ra/\n\t).test(type);\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n// `UNSAFE_*` lifecycle hooks\n// Preact only ever invokes the unprefixed methods.\n// Here we provide a base \"fallback\" implementation that calls any defined UNSAFE_ prefixed method.\n// - If a component defines its own `componentDidMount()` (including via defineProperty), use that.\n// - If a component defines `UNSAFE_componentDidMount()`, `componentDidMount` is the alias getter/setter.\n// - If anything assigns to an `UNSAFE_*` property, the assignment is forwarded to the unprefixed property.\n// See https://github.com/preactjs/preact/issues/1941\n[\n\t'componentWillMount',\n\t'componentWillReceiveProps',\n\t'componentWillUpdate'\n].forEach(key => {\n\tObject.defineProperty(Component.prototype, key, {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn this['UNSAFE_' + key];\n\t\t},\n\t\tset(v) {\n\t\t\tObject.defineProperty(this, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: v\n\t\t\t});\n\t\t}\n\t});\n});\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\tparent.textContent = '';\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\n\te.persist = empty;\n\te.isPropagationStopped = isPropagationStopped;\n\te.isDefaultPrevented = isDefaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\nfunction empty() {}\n\nfunction isPropagationStopped() {\n\treturn this.cancelBubble;\n}\n\nfunction isDefaultPrevented() {\n\treturn this.defaultPrevented;\n}\n\nconst classNameDescriptorNonEnumberable = {\n\tenumerable: false,\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nfunction handleDomVNode(vnode) {\n\tlet props = vnode.props,\n\t\ttype = vnode.type,\n\t\tnormalizedProps = {};\n\n\tfor (let i in props) {\n\t\tlet value = props[i];\n\n\t\tif (\n\t\t\t(i === 'value' && 'defaultValue' in props && value == null) ||\n\t\t\t// Emulate React's behavior of not rendering the contents of noscript tags on the client.\n\t\t\t(IS_DOM && i === 'children' && type === 'noscript') ||\n\t\t\ti === 'class' ||\n\t\t\ti === 'className'\n\t\t) {\n\t\t\t// Skip applying value if it is null/undefined and we already set\n\t\t\t// a default value\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet lowerCased = i.toLowerCase();\n\t\tif (i === 'defaultValue' && 'value' in props && props.value == null) {\n\t\t\t// `defaultValue` is treated as a fallback `value` when a value prop is present but null/undefined.\n\t\t\t// `defaultValue` for Elements with no value prop is the same as the DOM defaultValue property.\n\t\t\ti = 'value';\n\t\t} else if (i === 'download' && value === true) {\n\t\t\t// Calling `setAttribute` with a truthy value will lead to it being\n\t\t\t// passed as a stringified value, e.g. `download=\"true\"`. React\n\t\t\t// converts it to an empty string instead, otherwise the attribute\n\t\t\t// value will be used as the file name and the file will be called\n\t\t\t// \"true\" upon downloading it.\n\t\t\tvalue = '';\n\t\t} else if (lowerCased === 'ondoubleclick') {\n\t\t\ti = 'ondblclick';\n\t\t} else if (\n\t\t\tlowerCased === 'onchange' &&\n\t\t\t(type === 'input' || type === 'textarea') &&\n\t\t\t!onChangeInputType(props.type)\n\t\t) {\n\t\t\tlowerCased = i = 'oninput';\n\t\t} else if (lowerCased === 'onfocus') {\n\t\t\ti = 'onfocusin';\n\t\t} else if (lowerCased === 'onblur') {\n\t\t\ti = 'onfocusout';\n\t\t} else if (ON_ANI.test(i)) {\n\t\t\ti = lowerCased;\n\t\t} else if (type.indexOf('-') === -1 && CAMEL_PROPS.test(i)) {\n\t\t\ti = i.replace(CAMEL_REPLACE, '-$&').toLowerCase();\n\t\t} else if (value === null) {\n\t\t\tvalue = undefined;\n\t\t}\n\n\t\t// Add support for onInput and onChange, see #3561\n\t\t// if we have an oninput prop already change it to oninputCapture\n\t\tif (lowerCased === 'oninput') {\n\t\t\ti = lowerCased;\n\t\t\tif (normalizedProps[i]) {\n\t\t\t\ti = 'oninputCapture';\n\t\t\t}\n\t\t}\n\n\t\tnormalizedProps[i] = value;\n\t}\n\n\t// Add support for array select values: <select multiple value={[]} />\n\tif (\n\t\ttype == 'select' &&\n\t\tnormalizedProps.multiple &&\n\t\tArray.isArray(normalizedProps.value)\n\t) {\n\t\t// forEach() always returns undefined, which we abuse here to unset the value prop.\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tchild.props.selected =\n\t\t\t\tnormalizedProps.value.indexOf(child.props.value) != -1;\n\t\t});\n\t}\n\n\t// Adding support for defaultValue in select tag\n\tif (type == 'select' && normalizedProps.defaultValue != null) {\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tif (normalizedProps.multiple) {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue.indexOf(child.props.value) != -1;\n\t\t\t} else {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue == child.props.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (props.class && !props.className) {\n\t\tnormalizedProps.class = props.class;\n\t\tObject.defineProperty(\n\t\t\tnormalizedProps,\n\t\t\t'className',\n\t\t\tclassNameDescriptorNonEnumberable\n\t\t);\n\t} else if (props.className && !props.class) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t} else if (props.class && props.className) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t}\n\n\tvnode.props = normalizedProps;\n}\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\t// only normalize props on Element nodes\n\tif (typeof vnode.type === 'string') {\n\t\thandleDomVNode(vnode);\n\t}\n\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n// Only needed for react-relay\nlet currentComponent;\nconst oldBeforeRender = options._render;\noptions._render = function (vnode) {\n\tif (oldBeforeRender) {\n\t\toldBeforeRender(vnode);\n\t}\n\tcurrentComponent = vnode._component;\n};\n\nconst oldDiffed = options.diffed;\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = function (vnode) {\n\tif (oldDiffed) {\n\t\toldDiffed(vnode);\n\t}\n\n\tconst props = vnode.props;\n\tconst dom = vnode._dom;\n\n\tif (\n\t\tdom != null &&\n\t\tvnode.type === 'textarea' &&\n\t\t'value' in props &&\n\t\tprops.value !== dom.value\n\t) {\n\t\tdom.value = props.value == null ? '' : props.value;\n\t}\n\n\tcurrentComponent = null;\n};\n\n// This is a very very private internal function for React it\n// is used to sort-of do runtime dependency injection. So far\n// only `react-relay` makes use of it. It uses it to read the\n// context value.\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n\tReactCurrentDispatcher: {\n\t\tcurrent: {\n\t\t\treadContext(context) {\n\t\t\t\treturn currentComponent._globalContext[context._id].props.value;\n\t\t\t}\n\t\t}\n\t}\n};\n","import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport { is } from './util';\nimport {\n\thydrate,\n\trender,\n\tREACT_ELEMENT_TYPE,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n} from './render';\n\nconst version = '17.0.2'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * In React, `flushSync` flushes the entire tree and forces a rerender. It's\n * implmented here as a no-op.\n * @template Arg\n * @template Result\n * @param {(arg: Arg) => Result} callback function that runs before the flush\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n * @returns\n */\nconst flushSync = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\nexport function startTransition(cb) {\n\tcb();\n}\n\nexport function useDeferredValue(val) {\n\treturn val;\n}\n\nexport function useTransition() {\n\treturn [false, startTransition];\n}\n\n// TODO: in theory this should be done after a VNode is diffed as we want to insert\n// styles/... before it attaches\nexport const useInsertionEffect = useLayoutEffect;\n\n/**\n * This is taken from https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShimClient.js#L84\n * on a high level this cuts out the warnings, ... and attempts a smaller implementation\n */\nexport function useSyncExternalStore(subscribe, getSnapshot) {\n\tconst value = getSnapshot();\n\n\tconst [{ _instance }, forceUpdate] = useState({\n\t\t_instance: { _value: value, _getSnapshot: getSnapshot }\n\t});\n\n\tuseLayoutEffect(() => {\n\t\t_instance._value = value;\n\t\t_instance._getSnapshot = getSnapshot;\n\n\t\tif (!is(_instance._value, getSnapshot())) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\t}, [subscribe, value, getSnapshot]);\n\n\tuseEffect(() => {\n\t\tif (!is(_instance._value, _instance._getSnapshot())) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\n\t\treturn subscribe(() => {\n\t\t\tif (!is(_instance._value, _instance._getSnapshot())) {\n\t\t\t\tforceUpdate({ _instance });\n\t\t\t}\n\t\t});\n\t}, [subscribe]);\n\n\treturn value;\n}\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseInsertionEffect,\n\tuseTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tstartTransition,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n","import range from 'just-range';\n\nconst SORTED_PITCHES = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\nconst ACCIDENTAL_PITCHES = ['Db', 'Eb', 'Gb', 'Ab', 'Bb'];\nconst PITCH_INDEXES = {\n  C: 0,\n  'C#': 1,\n  Db: 1,\n  D: 2,\n  'D#': 3,\n  Eb: 3,\n  E: 4,\n  F: 5,\n  'F#': 6,\n  Gb: 6,\n  G: 7,\n  'G#': 8,\n  Ab: 8,\n  A: 9,\n  'A#': 10,\n  Bb: 10,\n  B: 11,\n};\nconst MIDI_NUMBER_C0 = 12;\nconst MIN_MIDI_NUMBER = MIDI_NUMBER_C0;\nconst MAX_MIDI_NUMBER = 127;\nconst NOTE_REGEX = /([a-g])([#b]?)(\\d+)/;\nconst NOTES_IN_OCTAVE = 12;\n\n// Converts string notes in scientific pitch notation to a MIDI number, or null.\n//\n// Example: \"c#0\" => 13, \"eb5\" => 75, \"abc\" => null\n//\n// References:\n// - http://www.flutopedia.com/octave_notation.htm\n// - https://github.com/danigb/tonal/blob/master/packages/note/index.js\nfunction fromNote(note) {\n  if (!note) {\n    throw Error('Invalid note argument');\n  }\n  const match = NOTE_REGEX.exec(note.toLowerCase());\n  if (!match) {\n    throw Error('Invalid note argument');\n  }\n  const [, letter, accidental, octave] = match;\n  const pitchName = `${letter.toUpperCase()}${accidental}`;\n  const pitchIndex = PITCH_INDEXES[pitchName];\n  if (pitchIndex == null) {\n    throw Error('Invalid note argument');\n  }\n  return MIDI_NUMBER_C0 + pitchIndex + NOTES_IN_OCTAVE * parseInt(octave, 10);\n}\n\n//\n// Build cache for getAttributes\n//\nfunction buildMidiNumberAttributes(midiNumber) {\n  const pitchIndex = (midiNumber - MIDI_NUMBER_C0) % NOTES_IN_OCTAVE;\n  const octave = Math.floor((midiNumber - MIDI_NUMBER_C0) / NOTES_IN_OCTAVE);\n  const pitchName = SORTED_PITCHES[pitchIndex];\n  return {\n    note: `${pitchName}${octave}`,\n    pitchName,\n    octave,\n    midiNumber,\n    isAccidental: ACCIDENTAL_PITCHES.includes(pitchName),\n  };\n}\n\nfunction buildMidiNumberAttributesCache() {\n  return range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).reduce((cache, midiNumber) => {\n    cache[midiNumber] = buildMidiNumberAttributes(midiNumber);\n    return cache;\n  }, {});\n}\n\nconst midiNumberAttributesCache = buildMidiNumberAttributesCache();\n\n// Returns an object containing various attributes for a given MIDI number.\n// Throws error for invalid midiNumbers.\nfunction getAttributes(midiNumber) {\n  const attrs = midiNumberAttributesCache[midiNumber];\n  if (!attrs) {\n    throw Error('Invalid MIDI number');\n  }\n  return attrs;\n}\n\n// Returns all MIDI numbers corresponding to natural notes, e.g. C and not C# or Bb.\nconst NATURAL_MIDI_NUMBERS = range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).filter(\n  (midiNumber) => !getAttributes(midiNumber).isAccidental,\n);\n\nexport default {\n  fromNote,\n  getAttributes,\n  MIN_MIDI_NUMBER,\n  MAX_MIDI_NUMBER,\n  NATURAL_MIDI_NUMBERS,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport MidiNumbers from './MidiNumbers';\n\nclass Key extends React.Component {\n  static propTypes = {\n    midiNumber: PropTypes.number.isRequired,\n    naturalKeyWidth: PropTypes.number.isRequired, // Width as a ratio between 0 and 1\n    gliss: PropTypes.bool.isRequired,\n    useTouchEvents: PropTypes.bool.isRequired,\n    accidental: PropTypes.bool.isRequired,\n    active: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool.isRequired,\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    accidentalWidthRatio: PropTypes.number.isRequired,\n    pitchPositions: PropTypes.object.isRequired,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    accidentalWidthRatio: 0.65,\n    pitchPositions: {\n      C: 0,\n      Db: 0.55,\n      D: 1,\n      Eb: 1.8,\n      E: 2,\n      F: 3,\n      Gb: 3.5,\n      G: 4,\n      Ab: 4.7,\n      A: 5,\n      Bb: 5.85,\n      B: 6,\n    },\n  };\n\n  onPlayNoteInput = () => {\n    this.props.onPlayNoteInput(this.props.midiNumber);\n  };\n\n  onStopNoteInput = () => {\n    this.props.onStopNoteInput(this.props.midiNumber);\n  };\n\n  // Key position is represented by the number of natural key widths from the left\n  getAbsoluteKeyPosition(midiNumber) {\n    const OCTAVE_WIDTH = 7;\n    const { octave, pitchName } = MidiNumbers.getAttributes(midiNumber);\n    const pitchPosition = this.props.pitchPositions[pitchName];\n    const octavePosition = OCTAVE_WIDTH * octave;\n    return pitchPosition + octavePosition;\n  }\n\n  getRelativeKeyPosition(midiNumber) {\n    return (\n      this.getAbsoluteKeyPosition(midiNumber) -\n      this.getAbsoluteKeyPosition(this.props.noteRange.first)\n    );\n  }\n\n  render() {\n    const {\n      naturalKeyWidth,\n      accidentalWidthRatio,\n      midiNumber,\n      gliss,\n      useTouchEvents,\n      accidental,\n      active,\n      disabled,\n      children,\n    } = this.props;\n\n    // Need to conditionally include/exclude handlers based on useTouchEvents,\n    // because otherwise mobile taps double fire events.\n    return (\n      <div\n        className={classNames('ReactPiano__Key', {\n          'ReactPiano__Key--accidental': accidental,\n          'ReactPiano__Key--natural': !accidental,\n          'ReactPiano__Key--disabled': disabled,\n          'ReactPiano__Key--active': active,\n        })}\n        style={{\n          left: ratioToPercentage(this.getRelativeKeyPosition(midiNumber) * naturalKeyWidth),\n          width: ratioToPercentage(\n            accidental ? accidentalWidthRatio * naturalKeyWidth : naturalKeyWidth,\n          ),\n        }}\n        onMouseDown={useTouchEvents ? null : this.onPlayNoteInput}\n        onMouseUp={useTouchEvents ? null : this.onStopNoteInput}\n        onMouseEnter={gliss ? this.onPlayNoteInput : null}\n        onMouseLeave={this.onStopNoteInput}\n        onTouchStart={useTouchEvents ? this.onPlayNoteInput : null}\n        onTouchCancel={useTouchEvents ? this.onStopNoteInput : null}\n        onTouchEnd={useTouchEvents ? this.onStopNoteInput : null}\n      >\n        <div className=\"ReactPiano__NoteLabelContainer\">{children}</div>\n      </div>\n    );\n  }\n}\n\nfunction ratioToPercentage(ratio) {\n  return `${ratio * 100}%`;\n}\n\nexport default Key;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport range from 'just-range';\nimport classNames from 'classnames';\n\nimport Key from './Key';\nimport MidiNumbers from './MidiNumbers';\n\nclass Keyboard extends React.Component {\n  static propTypes = {\n    noteRange: noteRangePropType,\n    activeNotes: PropTypes.arrayOf(PropTypes.number),\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    keyWidthToHeight: PropTypes.number.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    gliss: PropTypes.bool,\n    useTouchEvents: PropTypes.bool,\n    // If width is not provided, must have fixed width and height in parent container\n    width: PropTypes.number,\n  };\n\n  static defaultProps = {\n    disabled: false,\n    gliss: false,\n    useTouchEvents: false,\n    keyWidthToHeight: 0.33,\n    renderNoteLabel: () => {},\n  };\n\n  // Range of midi numbers on keyboard\n  getMidiNumbers() {\n    return range(this.props.noteRange.first, this.props.noteRange.last + 1);\n  }\n\n  getNaturalKeyCount() {\n    return this.getMidiNumbers().filter((number) => {\n      const { isAccidental } = MidiNumbers.getAttributes(number);\n      return !isAccidental;\n    }).length;\n  }\n\n  // Returns a ratio between 0 and 1\n  getNaturalKeyWidth() {\n    return 1 / this.getNaturalKeyCount();\n  }\n\n  getWidth() {\n    return this.props.width ? this.props.width : '100%';\n  }\n\n  getHeight() {\n    if (!this.props.width) {\n      return '100%';\n    }\n    const keyWidth = this.props.width * this.getNaturalKeyWidth();\n    return `${keyWidth / this.props.keyWidthToHeight}px`;\n  }\n\n  render() {\n    const naturalKeyWidth = this.getNaturalKeyWidth();\n    return (\n      <div\n        className={classNames('ReactPiano__Keyboard', this.props.className)}\n        style={{ width: this.getWidth(), height: this.getHeight() }}\n      >\n        {this.getMidiNumbers().map((midiNumber) => {\n          const { note, isAccidental } = MidiNumbers.getAttributes(midiNumber);\n          const isActive = !this.props.disabled && this.props.activeNotes.includes(midiNumber);\n          return (\n            <Key\n              naturalKeyWidth={naturalKeyWidth}\n              midiNumber={midiNumber}\n              noteRange={this.props.noteRange}\n              active={isActive}\n              accidental={isAccidental}\n              disabled={this.props.disabled}\n              onPlayNoteInput={this.props.onPlayNoteInput}\n              onStopNoteInput={this.props.onStopNoteInput}\n              gliss={this.props.gliss}\n              useTouchEvents={this.props.useTouchEvents}\n              key={midiNumber}\n            >\n              {this.props.disabled\n                ? null\n                : this.props.renderNoteLabel({\n                    isActive,\n                    isAccidental,\n                    midiNumber,\n                  })}\n            </Key>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nfunction isNaturalMidiNumber(value) {\n  if (typeof value !== 'number') {\n    return false;\n  }\n  return MidiNumbers.NATURAL_MIDI_NUMBERS.includes(value);\n}\n\nfunction noteRangePropType(props, propName, componentName) {\n  const { first, last } = props[propName];\n  if (!first || !last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} must be an object with .first and .last values.`,\n    );\n  }\n  if (!isNaturalMidiNumber(first) || !isNaturalMidiNumber(last)) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes).`,\n    );\n  }\n  if (first >= last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName}.first must be smaller than ${propName}.last.`,\n    );\n  }\n}\n\nexport default Keyboard;\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref || null);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = Forwarded;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (children == null) return null;\n\treturn toChildArray(toChildArray(children).map(fn));\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tconst normalized = toChildArray(children);\n\t\tif (normalized.length !== 1) throw 'Children.only';\n\t\treturn normalized[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport Keyboard from './Keyboard';\n\nclass ControlledPiano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    activeNotes: PropTypes.arrayOf(PropTypes.number.isRequired).isRequired,\n    playNote: PropTypes.func.isRequired,\n    stopNote: PropTypes.func.isRequired,\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    renderNoteLabel: ({ keyboardShortcut, midiNumber, isActive, isAccidental }) =>\n      keyboardShortcut ? (\n        <div\n          className={classNames('ReactPiano__NoteLabel', {\n            'ReactPiano__NoteLabel--active': isActive,\n            'ReactPiano__NoteLabel--accidental': isAccidental,\n            'ReactPiano__NoteLabel--natural': !isAccidental,\n          })}\n        >\n          {keyboardShortcut}\n        </div>\n      ) : null,\n  };\n\n  state = {\n    isMouseDown: false,\n    useTouchEvents: false,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.activeNotes !== prevProps.activeNotes) {\n      this.handleNoteChanges({\n        prevActiveNotes: prevProps.activeNotes || [],\n        nextActiveNotes: this.props.activeNotes || [],\n      });\n    }\n  }\n\n  // This function is responsible for diff'ing activeNotes\n  // and playing or stopping notes accordingly.\n  handleNoteChanges = ({ prevActiveNotes, nextActiveNotes }) => {\n    if (this.props.disabled) {\n      return;\n    }\n    const notesStopped = difference(prevActiveNotes, nextActiveNotes);\n    const notesStarted = difference(nextActiveNotes, prevActiveNotes);\n    notesStarted.forEach((midiNumber) => {\n      this.props.playNote(midiNumber);\n    });\n    notesStopped.forEach((midiNumber) => {\n      this.props.stopNote(midiNumber);\n    });\n  };\n\n  getMidiNumberForKey = (key) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = this.props.keyboardShortcuts.find((sh) => sh.key === key);\n    return shortcut && shortcut.midiNumber;\n  };\n\n  getKeyForMidiNumber = (midiNumber) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = this.props.keyboardShortcuts.find((sh) => sh.midiNumber === midiNumber);\n    return shortcut && shortcut.key;\n  };\n\n  onKeyDown = (event) => {\n    // Don't conflict with existing combinations like ctrl + t\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onPlayNoteInput(midiNumber);\n    }\n  };\n\n  onKeyUp = (event) => {\n    // This *should* also check for event.ctrlKey || event.metaKey || event.ShiftKey like onKeyDown does,\n    // but at least on Mac Chrome, when mashing down many alphanumeric keystrokes at once,\n    // ctrlKey is fired unexpectedly, which would cause onStopNote to NOT be fired, which causes problematic\n    // lingering notes. Since it's fairly safe to call onStopNote even when not necessary,\n    // the ctrl/meta/shift check is removed to fix that issue.\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onStopNoteInput(midiNumber);\n    }\n  };\n\n  onPlayNoteInput = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onPlayNoteInput(midiNumber, this.props.activeNotes);\n  };\n\n  onStopNoteInput = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onStopNoteInput(midiNumber, this.props.activeNotes);\n  };\n\n  onMouseDown = () => {\n    this.setState({\n      isMouseDown: true,\n    });\n  };\n\n  onMouseUp = () => {\n    this.setState({\n      isMouseDown: false,\n    });\n  };\n\n  onTouchStart = () => {\n    this.setState({\n      useTouchEvents: true,\n    });\n  };\n\n  renderNoteLabel = ({ midiNumber, isActive, isAccidental }) => {\n    const keyboardShortcut = this.getKeyForMidiNumber(midiNumber);\n    return this.props.renderNoteLabel({ keyboardShortcut, midiNumber, isActive, isAccidental });\n  };\n\n  render() {\n    return (\n      <div\n        style={{ width: '100%', height: '100%' }}\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onTouchStart={this.onTouchStart}\n        data-testid=\"container\"\n      >\n        <Keyboard\n          noteRange={this.props.noteRange}\n          onPlayNoteInput={this.onPlayNoteInput}\n          onStopNoteInput={this.onStopNoteInput}\n          activeNotes={this.props.activeNotes}\n          className={this.props.className}\n          disabled={this.props.disabled}\n          width={this.props.width}\n          keyWidthToHeight={this.props.keyWidthToHeight}\n          gliss={this.state.isMouseDown}\n          useTouchEvents={this.state.useTouchEvents}\n          renderNoteLabel={this.renderNoteLabel}\n        />\n      </div>\n    );\n  }\n}\n\nexport default ControlledPiano;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport ControlledPiano from './ControlledPiano';\nimport Keyboard from './Keyboard';\n\nclass Piano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    activeNotes: PropTypes.arrayOf(PropTypes.number.isRequired),\n    playNote: PropTypes.func.isRequired,\n    stopNote: PropTypes.func.isRequired,\n    onPlayNoteInput: PropTypes.func,\n    onStopNoteInput: PropTypes.func,\n    renderNoteLabel: PropTypes.func,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n  };\n\n  state = {\n    activeNotes: this.props.activeNotes || [],\n  };\n\n  componentDidUpdate(prevProps) {\n    // Make activeNotes \"controllable\" by using internal\n    // state by default, but allowing prop overrides.\n    if (\n      prevProps.activeNotes !== this.props.activeNotes &&\n      this.state.activeNotes !== this.props.activeNotes\n    ) {\n      this.setState({\n        activeNotes: this.props.activeNotes || [],\n      });\n    }\n  }\n\n  handlePlayNoteInput = (midiNumber) => {\n    this.setState((prevState) => {\n      // Need to be handled inside setState in order to set prevActiveNotes without\n      // race conditions.\n      if (this.props.onPlayNoteInput) {\n        this.props.onPlayNoteInput(midiNumber, { prevActiveNotes: prevState.activeNotes });\n      }\n\n      // Don't append note to activeNotes if it's already present\n      if (prevState.activeNotes.includes(midiNumber)) {\n        return null;\n      }\n      return {\n        activeNotes: prevState.activeNotes.concat(midiNumber),\n      };\n    });\n  };\n\n  handleStopNoteInput = (midiNumber) => {\n    this.setState((prevState) => {\n      // Need to be handled inside setState in order to set prevActiveNotes without\n      // race conditions.\n      if (this.props.onStopNoteInput) {\n        this.props.onStopNoteInput(midiNumber, { prevActiveNotes: this.state.activeNotes });\n      }\n      return {\n        activeNotes: prevState.activeNotes.filter((note) => midiNumber !== note),\n      };\n    });\n  };\n\n  render() {\n    const { activeNotes, onPlayNoteInput, onStopNoteInput, ...otherProps } = this.props;\n    return (\n      <ControlledPiano\n        activeNotes={this.state.activeNotes}\n        onPlayNoteInput={this.handlePlayNoteInput}\n        onStopNoteInput={this.handleStopNoteInput}\n        {...otherProps}\n      />\n    );\n  }\n}\n\nexport default Piano;\n","import { useCallback, useMemo, useState } from 'preact/hooks';\n\nconst WsMonitor = ({ websocket }) => {\n  const {\n    ws,\n    wsUrl,\n    setWsUrl,\n    history,\n    myChannels,\n    availableChannels,\n    id,\n    wsState,\n    joinChannel,\n    getChannels,\n    heartbeat,\n    broadcastMessage,\n    sendMessageToTargetClient,\n    sendMessageToTargetChannel,\n    sendMessageToJoinedChannels,\n  } = websocket;\n\n  const [message, setMessage] = useState('');\n  const [targetChannel, setTargetChannel] = useState('');\n  const [targetId, setTargetId] = useState('');\n\n  const messageIsValidJSON = useMemo(() => {\n    try {\n      JSON.parse(message);\n    } catch (e) {\n      return false;\n    }\n    return true;\n  }, [message]);\n\n  const handleWsUrlChange = useCallback(\n    (e) => {\n      e.preventDefault();\n      setWsUrl(e.target.wsUrl.value);\n    },\n    [setWsUrl]\n  );\n\n  return (\n    <div className='flex flex-col gap-4'>\n      <div className='flex gap-8'>\n        <div>{wsState}</div>\n        {ws && wsUrl && <div>connected to: {wsUrl}</div>}\n        <form onSubmit={handleWsUrlChange}>\n          <input type='text' name='wsUrl' placeholder={wsUrl} />\n          <button type='submit'>go</button>\n        </form>\n      </div>\n\n      {ws && (\n        <>\n          <div>\n            {id && <div>id: {id}</div>}\n            {heartbeat && <div>heartbeat: {JSON.stringify(heartbeat)}</div>}\n          </div>\n\n          <div>\n            <div className='flex flex-row gap-8'>\n              <button onClick={getChannels}>get channels</button>\n              <form onSubmit={joinChannel}>\n                <input type='text' name='channel' />\n                <button type='submit' className='ml-2'>\n                  join channel\n                </button>\n              </form>\n            </div>\n            <ul>\n              my channels:\n              {myChannels.map(({ channel, members }) => (\n                <li key={channel} className={'ml-2'}>\n                  {channel} | {members.length} members: {members.join(', ')}\n                </li>\n              ))}\n            </ul>\n            <ul>\n              all channels:\n              {availableChannels.map(({ channel, members }) => (\n                <li key={channel} className={'ml-2'}>\n                  {channel}{' '}\n                  {members.length\n                    ? `| ${members.length} members: ${members.join(', ')}`\n                    : '(no members)'}\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div>\n            <div className='flex flex-col gap-1'>\n              <div>\n                <label htmlFor='message'>message</label>\n                <textarea\n                  cols={100}\n                  rows={1}\n                  name='message'\n                  placeholder={`{\"hello\": 1}`}\n                  value={message}\n                  onInput={(e) => setMessage(e.target.value)}\n                />\n              </div>\n              <div>\n                <label htmlFor='targetChannel'>target channel</label>\n                <input\n                  name='targetChannel'\n                  type='text'\n                  value={targetChannel}\n                  onInput={(e) => setTargetChannel(e.target.value)}\n                />\n              </div>\n              <div>\n                <label htmlFor='targetChannel'>target client</label>\n                <input\n                  name='targetId'\n                  type='text'\n                  value={targetId}\n                  onInput={(e) => setTargetId(e.target.value)}\n                />\n              </div>\n              <div>\n                <button\n                  disabled={!messageIsValidJSON}\n                  onClick={() => sendMessageToTargetClient(message, targetId)}>\n                  send to another client\n                </button>\n                <button\n                  disabled={!messageIsValidJSON}\n                  onClick={() =>\n                    sendMessageToTargetChannel(message, targetChannel)\n                  }>\n                  send to channel\n                </button>\n                <button\n                  disabled={!messageIsValidJSON}\n                  onClick={() => sendMessageToJoinedChannels(message)}>\n                  send to joined channel\n                </button>\n                <button\n                  disabled={!messageIsValidJSON}\n                  onClick={() => broadcastMessage(message)}>\n                  broadcast\n                </button>\n              </div>\n            </div>\n            {!messageIsValidJSON && message.length ? (\n              <div>Invalid JSON</div>\n            ) : (\n              <></>\n            )}\n          </div>\n\n          <div>incoming messages:</div>\n          <div style={{ overflow: 'scroll', height: '200px' }}>\n            {history.map((data) => (\n              <div key={data}>{JSON.stringify(data)}</div>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default WsMonitor;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import { useCallback, useState, useEffect, useMemo } from 'preact/hooks';\n\nconst useWs = () => {\n  const [ws, setWs] = useState(null);\n  const [wsUrl, setWsUrl] = useState('');\n  const [history, setHistory] = useState([]);\n  const [heartbeat, setHeartbeat] = useState(null);\n  const [myChannels, setMyChannels] = useState([]);\n  const [availableChannels, setAvailableChannels] = useState([]);\n  const [id, setId] = useState(null);\n  const [incomingMessage, setIncomingMessage] = useState('');\n\n  const onMessage = useCallback(async (event) => {\n    const data = await JSON.parse(event.data);\n    switch (data.type) {\n      case 'id':\n        setId(data.id);\n        break;\n      case 'heartbeat':\n        setHeartbeat(data.heartbeat);\n        break;\n      case 'myChannels':\n        setMyChannels(data.channels);\n        break;\n      case 'availableChannels':\n        setAvailableChannels(data.channels);\n        break;\n      default:\n        setHistory((p) => [data, ...p]);\n        break;\n    }\n\n    setIncomingMessage(data);\n  }, []);\n\n  useEffect(() => {\n    if (!window) return;\n\n    const protocol = window.location.protocol.includes('https') ? 'wss' : 'ws';\n    const port = window.location.protocol.includes('https') ? '' : ':8081';\n    const url = `${protocol}://${location.hostname}${port}?channels=welcome`;\n\n    setWsUrl(url);\n  }, []);\n\n  useEffect(() => {\n    if (!wsUrl.length || typeof window === 'undefined') return;\n\n    console.log('attempting to connect to', wsUrl);\n\n    const wsConnection = new WebSocket(wsUrl);\n    wsConnection.onmessage = onMessage;\n\n    setWs(wsConnection);\n  }, [onMessage, wsUrl]);\n\n  const getChannels = useCallback(() => {\n    ws?.send(JSON.stringify({ type: 'myChannels' }));\n    ws?.send(JSON.stringify({ type: 'availableChannels' }));\n  }, [ws]);\n\n  const wsState = useMemo(() => {\n    if (typeof window === 'undefined') return;\n\n    switch (ws?.readyState) {\n      case WebSocket.CONNECTING:\n        return 'connecting';\n      case WebSocket.OPEN:\n        return 'open';\n      case WebSocket.CLOSING:\n        return 'closing';\n      case WebSocket.CLOSED:\n        return 'closed';\n      default:\n        return 'uninitialized';\n    }\n  }, [ws?.readyState]);\n\n  useEffect(() => {\n    if (wsState === 'open') getChannels();\n  }, [getChannels, ws, wsState]);\n\n  const joinChannel = useCallback(\n    (e) => {\n      e.preventDefault();\n      ws?.send(\n        JSON.stringify({ type: 'joinChannel', channel: e.target.channel.value })\n      );\n    },\n    [ws]\n  );\n\n  const broadcastMessage = useCallback(\n    (message) =>\n      wsState === 'open' &&\n      ws?.send(\n        JSON.stringify({\n          type: 'broadcast',\n          message: { ...JSON.parse(message), timestamp: Date.now() },\n        })\n      ),\n    [ws, wsState]\n  );\n\n  const sendMessageToTargetChannel = useCallback(\n    (message, channel) => {\n      wsState === 'open' &&\n        ws?.send(\n          JSON.stringify({\n            ...JSON.parse(message),\n            timestamp: Date.now(),\n            channel,\n          })\n        );\n    },\n    [ws, wsState]\n  );\n\n  const sendMessageToTargetClient = useCallback(\n    (message, targetId) => {\n      console.log('sending to target id', message, targetId);\n      wsState === 'open' &&\n        ws?.send(\n          JSON.stringify({\n            ...JSON.parse(message),\n            timestamp: Date.now(),\n            targetId,\n          })\n        );\n    },\n    [ws, wsState]\n  );\n\n  const sendMessageToJoinedChannels = useCallback(\n    (message) => {\n      wsState === 'open' &&\n        ws?.send(\n          JSON.stringify({ ...JSON.parse(message), timestamp: Date.now() })\n        );\n    },\n    [ws, wsState]\n  );\n\n  return {\n    ws,\n    wsUrl,\n    setWsUrl,\n    history,\n    myChannels,\n    availableChannels,\n    id,\n    incomingMessage,\n    wsState,\n    joinChannel,\n    getChannels,\n    heartbeat,\n    broadcastMessage,\n    sendMessageToTargetClient,\n    sendMessageToTargetChannel,\n    sendMessageToJoinedChannels,\n  };\n};\n\nexport default useWs;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order of result values is determined by the\n * order they occur in the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = difference;\n","export default class PolySynth {\n  constructor() {\n    this.audioContext = new (window.AudioContext ||\n      window.webkitAudioContext)();\n    this.voices = [];\n  }\n\n  playNote(note, velocity = 127) {\n    try {\n      // Create a voice for the note\n      const voice = new Voice(this.audioContext, note, velocity);\n      this.voices.push(voice);\n\n      // Start the voice\n      voice.start();\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  stopNote(note) {\n    try {\n      // Find the voice playing the note\n      const voice = this.voices.find((voice) => voice.note === note);\n\n      if (voice) {\n        // Stop and remove the voice\n        voice.stop();\n        this.voices = this.voices.filter((v) => v !== voice);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n}\n\nclass Voice {\n  constructor(audioContext, note, velocity) {\n    this.audioContext = audioContext;\n    this.note = note;\n    this.velocity = velocity;\n\n    // Create an oscillator\n    this.oscillator = this.audioContext.createOscillator();\n    this.oscillator.frequency.value = getFrequency(note);\n\n    // Create a gain node\n    this.gainNode = this.audioContext.createGain();\n    this.gainNode.gain.value = velocity / 127;\n\n    // Connect the oscillator to the gain node and the gain node to the audio context destination\n    this.oscillator.connect(this.gainNode);\n    this.gainNode.connect(this.audioContext.destination);\n  }\n\n  start() {\n    // Start the oscillator\n    this.oscillator.start();\n  }\n\n  stop() {\n    // Stop the oscillator smoothly over 500ms\n    this.gainNode.gain.linearRampToValueAtTime(\n      0,\n      this.audioContext.currentTime + 0.5\n    );\n\n    // Stop the oscillator completely after 500ms\n    this.oscillator.stop(this.audioContext.currentTime + 0.5);\n  }\n}\n\nfunction getFrequency(note) {\n  return 440 * Math.pow(2, (note - 69) / 12);\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { Piano, MidiNumbers } from 'react-piano';\nimport 'react-piano/dist/styles.css';\n\nexport default function MIDIPiano({ onPlayNote, onStopNote }) {\n  const firstNote = MidiNumbers.fromNote('c3');\n  const lastNote = MidiNumbers.fromNote('f5');\n  // const keyboardShortcuts = KeyboardShortcuts.create({\n  //   firstNote,\n  //   lastNote,\n  //   keyboardConfig: KeyboardShortcuts.HOME_ROW,\n  // });\n\n  return (\n    <Piano\n      noteRange={{ first: firstNote, last: lastNote }}\n      playNote={onPlayNote}\n      stopNote={onStopNote}\n      width={1000}\n      // keyboardShortcuts={keyboardShortcuts}\n    />\n  );\n}\n","import { useCallback, useState, useEffect } from 'preact/hooks';\n\nimport PolySynth from '../../../utils/polysynth';\nimport MIDIPiano from './piano';\nimport useWs from '../../../hooks/useWs';\nimport Monitor from '../../wsMonitor';\n\nconst SynthClient = () => {\n  const ws = useWs();\n\n  const {\n    incomingMessage,\n    broadcastMessage,\n    myChannels,\n    sendMessageToTargetClient,\n  } = ws;\n\n  const [polySynth, setPolySynth] = useState(null);\n  const [muteIncoming, setMuteIncoming] = useState(false);\n  const [muteOutgoing, setMuteOutgoing] = useState(false);\n  const [broadcastNotes, setBroadcastNotes] = useState(true);\n\n  useEffect(() => {\n    if (!incomingMessage) return;\n    switch (incomingMessage.type) {\n      case 'playNote':\n        if (!muteIncoming) polySynth?.playNote(...incomingMessage.noteData);\n        break;\n      case 'stopNote':\n        polySynth?.stopNote(...incomingMessage.noteData);\n        break;\n    }\n  }, [polySynth, incomingMessage, muteIncoming]);\n\n  useEffect(() => {\n    if (!window) return;\n    setPolySynth(new PolySynth());\n  }, []);\n\n  const handlePlayNote = useCallback(\n    (note) => {\n      console.log('playing', note);\n      if (polySynth && !muteOutgoing) polySynth.playNote(note);\n      if (broadcastNotes)\n        broadcastMessage(\n          JSON.stringify({ type: 'playNote', noteData: [note] })\n        );\n    },\n    [broadcastMessage, broadcastNotes, muteOutgoing, polySynth]\n  );\n\n  const handleStopNote = useCallback(\n    (note) => {\n      console.log('stopping', note);\n      if (polySynth) polySynth.stopNote(note);\n      if (broadcastNotes)\n        broadcastMessage(\n          JSON.stringify({ type: 'stopNote', noteData: [note] })\n        );\n    },\n    [broadcastMessage, broadcastNotes, polySynth]\n  );\n\n  const [sequencerIntervalId, setSequencerIntervalId] = useState(null);\n\n  const handleSequenceChannel = useCallback(\n    (channelName) => {\n      if (!channelName.length) return;\n\n      if (sequencerIntervalId) clearInterval(sequencerIntervalId);\n      console.log('setting new interval id');\n\n      let sequenceTarget;\n\n      setSequencerIntervalId(\n        setInterval(() => {\n          const targetChannel = myChannels.find(\n            (c) => c.channel === channelName\n          );\n          if (!targetChannel) return;\n          console.log('targetChannel', targetChannel);\n\n          const members = targetChannel.members.filter((m) => m !== ws.id);\n          if (!members.length) return;\n          console.log('members', members);\n\n          const targetIndex = sequenceTarget\n            ? (members.findIndex((m) => m === sequenceTarget) + 1) %\n              members.length\n            : 0;\n\n          sequenceTarget = sequenceTarget ? members[targetIndex] : members[0];\n\n          console.log('sequencing', members, sequenceTarget, targetIndex);\n\n          sendMessageToTargetClient(\n            JSON.stringify({ type: 'playNote', noteData: [69 + targetIndex] }),\n            sequenceTarget\n          );\n\n          setTimeout(() => {\n            sendMessageToTargetClient(\n              JSON.stringify({\n                type: 'stopNote',\n                noteData: [69 + targetIndex],\n              }),\n              sequenceTarget\n            );\n          }, 100);\n        }, 1000)\n      );\n\n      return () => clearInterval(sequencerIntervalId);\n    },\n    [myChannels, sendMessageToTargetClient, sequencerIntervalId, ws.id]\n  );\n\n  return (\n    <div>\n      <Monitor websocket={ws} />\n\n      <div className='mb-2'>\n        <div>\n          <label htmlFor='mute'>mute incoming notes</label>\n          <input\n            name={'mute incoming'}\n            type='checkbox'\n            checked={muteIncoming}\n            onChange={() => setMuteIncoming((p) => !p)}\n          />\n        </div>\n        <div>\n          <label htmlFor='mute'>mute outgoing notes</label>\n          <input\n            name={'mute outgoing'}\n            type='checkbox'\n            checked={muteOutgoing}\n            onChange={() => setMuteOutgoing((p) => !p)}\n          />\n        </div>\n        <div>\n          <label htmlFor='broadcastNotes'>broadcast notes</label>\n          <input\n            name={'broadcastNotes'}\n            type='checkbox'\n            checked={broadcastNotes}\n            onChange={() => setBroadcastNotes(!broadcastNotes)}\n          />\n        </div>\n      </div>\n      <div className='flex flex-row gap-2 mb-2'>\n        <span>sequence to channel</span>\n        <select\n          className='px-1'\n          name='channel'\n          onChange={(e) => handleSequenceChannel(e.target.value)}>\n          <>\n            <option />\n            {myChannels.map((c) => (\n              <option key={c.channel}>{c.channel}</option>\n            ))}\n          </>\n        </select>\n      </div>\n      <MIDIPiano onPlayNote={handlePlayNote} onStopNote={handleStopNote} />\n    </div>\n  );\n};\n\nexport default SynthClient;\n","// extracted by mini-css-extract-plugin\nexport default {\"home\":\"home__Tk3DL\",\"resource\":\"resource__-GqBH\"};","import style from './style.css';\nimport SynthClient from '../../components/clients/synth';\n\nconst Synth = () => {\n  return (\n    <div class={style.home}>\n      <SynthClient />\n    </div>\n  );\n};\n\nexport default Synth;\n"],"sourceRoot":""}