(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"6MY0":function(n,t,e){"use strict";(function(n,o){var r=e("QRet"),i=e("Zp5c");t.a=()=>{const{ws:t,wsUrl:e,setWsUrl:a,history:c,myChannels:_,availableChannels:u,id:l,wsState:s,joinChannel:f,getChannels:h,heartbeat:p,broadcastMessage:d,sendMessageToTargetChannel:b,sendMessageToJoinedChannels:v}=Object(i.a)(),[m,g]=Object(r.k)(""),[y,O]=Object(r.k)(""),j=Object(r.h)((()=>{try{JSON.parse(m)}catch(n){return!1}return!0}),[m]),w=Object(r.a)((n=>{n.preventDefault(),b(JSON.stringify({type:"bloop",channel:n.target.channel.value}))}),[b]),S=Object(r.a)((()=>v(JSON.stringify({type:"bloop"}))),[v]),N=Object(r.a)((()=>d(JSON.stringify({type:"bloop"}))),[d]),C=Object(r.a)((n=>{n.preventDefault(),a(n.target.wsUrl.value)}),[a]);return n("div",null,n("div",null,"state: ",s),n("form",{onSubmit:C},n("input",{type:"text",name:"wsUrl",placeholder:e}),n("button",{type:"submit"},"go")),t&&n(o,null,e&&n("div",null,"connected to: ",e),l&&n("div",null,"id: ",l),p&&n("div",null,"heartbeat: ",JSON.stringify(p)),n("form",{onSubmit:f},n("input",{type:"text",name:"channel"}),n("button",{type:"submit"},"join channel")),n("div",null,"my channels: ",JSON.stringify(_)),n("div",null,"available channels: ",JSON.stringify(u)),n("form",{onSubmit:w},n("input",{type:"text",name:"channel"}),n("button",{type:"submit"},"bloop channel")),n("button",{onClick:h},"get channels"),n("button",{onClick:S},"bloop my channels"),n("button",{onClick:N},"broadcast bloop"),n("div",null,n("div",null,n("div",null,n("label",{htmlFor:"message"},"message"),n("textarea",{cols:100,rows:1,name:"message",placeholder:'{"hello": 1}',value:m,onInput:n=>g(n.target.value)})),n("div",null,n("label",{htmlFor:"targetChannel"},"target channel"),n("input",{name:"targetChannel",type:"text",value:y,onInput:n=>O(n.target.value)})),n("button",{disabled:!j,onClick:()=>b(m,y)},"send to channel"),n("button",{disabled:!j,onClick:()=>d(m)},"broadcast")),!j&&m.length?n("div",null,"Invalid JSON"):n(o,null)),n("div",null,"incoming messages:"),n("div",{style:{overflow:"scroll",height:"200px"}},c.map((t=>n("div",{key:t},JSON.stringify(t)))))))}}).call(this,e("hosL").h,e("hosL").Fragment)},FA6U:function(n,t){"use strict";t.a={home:"home__uRcqa",resource:"resource__reFLt"}},QRet:function(n,t,e){"use strict";function o(n,t){N.options.__h&&N.options.__h(j,n,C||t),C=0;var e=j.__H||(j.__H={__:[],__h:[]});return n>=e.__.length&&e.__.push({__V:J}),e.__[n]}function r(n){return C=1,i(y,n)}function i(n,t,e){var r=o(O++,2);if(r.t=n,!r.__c&&(r.__=[e?e(t):y(void 0,t),function(n){var t=r.__N?r.__N[0]:r.__[0],e=r.t(t,n);t!==e&&(r.__N=[e,r.__[1]],r.__c.setState({}))}],r.__c=j,!j.u)){var i=function(n,t,e){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(n){return n.__c}));if(o.every((function(n){return!n.__N})))return!a||a.call(this,n,t,e);var i=!1;return o.forEach((function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}})),!(!i&&r.__c.props===n)&&(!a||a.call(this,n,t,e))};j.u=!0;var a=j.shouldComponentUpdate,c=j.componentWillUpdate;j.componentWillUpdate=function(n,t,e){if(this.__e){var o=a;a=void 0,i(n,t,e),a=o}c&&c.call(this,n,t,e)},j.shouldComponentUpdate=i}return r.__N||r.__}function a(n,t){var e=o(O++,3);!N.options.__s&&g(e.__H,t)&&(e.__=n,e.i=t,j.__H.__h.push(e))}function c(n,t){var e=o(O++,4);!N.options.__s&&g(e.__H,t)&&(e.__=n,e.i=t,j.__h.push(e))}function _(n){return C=5,l((function(){return{current:n}}),[])}function u(n,t,e){C=6,c((function(){return"function"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0}),null==e?e:e.concat(n))}function l(n,t){var e=o(O++,7);return g(e.__H,t)?(e.__V=n(),e.i=t,e.__h=n,e.__V):e.__}function s(n,t){return C=8,l((function(){return n}),t)}function f(n){var t=j.context[n.__c],e=o(O++,9);return e.c=n,t?(null==e.__&&(e.__=!0,t.sub(j)),t.props.value):n.__}function h(n,t){N.options.useDebugValue&&N.options.useDebugValue(t?t(n):n)}function p(){var n=o(O++,11);if(!n.__){for(var t=j.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var e=t.__m||(t.__m=[0,0]);n.__="P"+e[0]+"-"+e[1]++}return n.__}function d(){for(var n;n=k.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(v),n.__H.__h.forEach(m),n.__H.__h=[]}catch(t){n.__H.__h=[],N.options.__e(t,n.__v)}}function b(n){var t,e=function(){clearTimeout(o),F&&cancelAnimationFrame(t),setTimeout(n)},o=setTimeout(e,100);F&&(t=requestAnimationFrame(e))}function v(n){var t=j,e=n.__c;"function"==typeof e&&(n.__c=void 0,e()),j=t}function m(n){var t=j;n.__c=n.__(),j=t}function g(n,t){return!n||n.length!==t.length||t.some((function(t,e){return t!==n[e]}))}function y(n,t){return"function"==typeof t?t(n):t}e.d(t,"a",(function(){return s})),e.d(t,"b",(function(){return f})),e.d(t,"c",(function(){return h})),e.d(t,"d",(function(){return a})),e.d(t,"e",(function(){return p})),e.d(t,"f",(function(){return u})),e.d(t,"g",(function(){return c})),e.d(t,"h",(function(){return l})),e.d(t,"i",(function(){return i})),e.d(t,"j",(function(){return _})),e.d(t,"k",(function(){return r}));var O,j,w,S,N=e("hosL"),C=0,k=[],J=[],H=N.options.__b,D=N.options.__r,E=N.options.diffed,P=N.options.__c,T=N.options.unmount;N.options.__b=function(n){j=null,H&&H(n)},N.options.__r=function(n){D&&D(n),O=0;var t=(j=n.__c).__H;t&&(w===j?(t.__h=[],j.__h=[],t.__.forEach((function(n){n.__N&&(n.__=n.__N),n.__V=J,n.__N=n.i=void 0}))):(t.__h.forEach(v),t.__h.forEach(m),t.__h=[],O=0)),w=j},N.options.diffed=function(n){E&&E(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==k.push(t)&&S===N.options.requestAnimationFrame||((S=N.options.requestAnimationFrame)||b)(d)),t.__H.__.forEach((function(n){n.i&&(n.__H=n.i),n.__V!==J&&(n.__=n.__V),n.i=void 0,n.__V=J}))),w=j=null},N.options.__c=function(n,t){t.some((function(n){try{n.__h.forEach(v),n.__h=n.__h.filter((function(n){return!n.__||m(n)}))}catch(e){t.some((function(n){n.__h&&(n.__h=[])})),t=[],N.options.__e(e,n.__v)}})),P&&P(n,t)},N.options.unmount=function(n){T&&T(n);var t,e=n.__c;e&&e.__H&&(e.__H.__.forEach((function(n){try{v(n)}catch(n){t=n}})),e.__H=void 0,t&&N.options.__e(t,e.__v))};var F="function"==typeof requestAnimationFrame},YD9F:function(n,t,e){"use strict";e.r(t),function(n){var o=e("FA6U"),r=e("6MY0");t.default=()=>n("div",{class:o.a.home},n(r.a,null))}.call(this,e("hosL").h)},Zp5c:function(n,t,e){"use strict";function o(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,o)}return e}function r(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?o(Object(e),!0).forEach((function(t){i(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function i(n,t,e){return(t=function(n){var t=function(n,t){if("object"!=typeof n||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var o=e.call(n,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==typeof t?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var a=e("QRet");t.a=()=>{const[n,t]=Object(a.k)(null),[e,o]=Object(a.k)(""),[i,c]=Object(a.k)([]),[_,u]=Object(a.k)(null),[l,s]=Object(a.k)([]),[f,h]=Object(a.k)([]),[p,d]=Object(a.k)(null),[b,v]=Object(a.k)(""),m=Object(a.a)((async n=>{const t=await JSON.parse(n.data);switch(t.type){case"id":d(t.id);break;case"heartbeat":u(t.heartbeat);break;case"myChannels":s(t.channels);break;case"availableChannels":h(t.channels);break;default:c((n=>[t,...n]))}v(t)}),[]);Object(a.d)((()=>{if(!window)return;const n=window.location.protocol.includes("https")?"wss":"ws",t=window.location.protocol.includes("https")?"":":8081",e=`${n}://${location.hostname}${t}?channels=welcome`;o(e)}),[]),Object(a.d)((()=>{if(!e.length||"undefined"==typeof window)return;console.log("attempting to connect to",e);const n=new WebSocket(e);n.onmessage=m,t(n)}),[m,e]);const g=Object(a.a)((()=>{null==n||n.send(JSON.stringify({type:"myChannels"})),null==n||n.send(JSON.stringify({type:"availableChannels"}))}),[n]),y=Object(a.h)((()=>{if("undefined"!=typeof window)switch(null==n?void 0:n.readyState){case WebSocket.CONNECTING:return"connecting";case WebSocket.OPEN:return"open";case WebSocket.CLOSING:return"closing";case WebSocket.CLOSED:return"closed";default:return"uninitialized"}}),[null==n?void 0:n.readyState]);Object(a.d)((()=>{"open"===y&&g()}),[g,n,y]);const O=Object(a.a)((t=>{t.preventDefault(),null==n||n.send(JSON.stringify({type:"joinChannel",channel:t.target.channel.value}))}),[n]),j=Object(a.a)((t=>"open"===y&&(null==n?void 0:n.send(JSON.stringify({type:"broadcast",message:r(r({},JSON.parse(t)),{},{timestamp:Date.now()})})))),[n,y]),w=Object(a.a)(((t,e)=>{"open"===y&&(null==n||n.send(JSON.stringify(r(r({},JSON.parse(t)),{},{timestamp:Date.now(),channel:e}))))}),[n,y]),S=Object(a.a)(((t,e)=>{console.log("sending to target id",t,e),"open"===y&&(null==n||n.send(JSON.stringify(r(r({},JSON.parse(t)),{},{timestamp:Date.now(),targetId:e}))))}),[n,y]),N=Object(a.a)((t=>{"open"===y&&(null==n||n.send(JSON.stringify(r(r({},JSON.parse(t)),{},{timestamp:Date.now()}))))}),[n,y]);return{ws:n,wsUrl:e,setWsUrl:o,history:i,myChannels:l,availableChannels:f,id:p,incomingMessage:b,wsState:y,joinChannel:O,getChannels:g,heartbeat:_,broadcastMessage:j,sendMessageToTargetClient:S,sendMessageToTargetChannel:w,sendMessageToJoinedChannels:N}}}}]);
//# sourceMappingURL=route-home.chunk.ce4a1.esm.js.map