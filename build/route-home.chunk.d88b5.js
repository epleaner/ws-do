(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"6MY0":function(n,t,e){"use strict";(function(n){var r=e("RaXK"),o=e("Zp5c");t.a=function(){var t=Object(o.a)();return n(r.a,{websocket:t})}}).call(this,e("hosL").h)},FA6U:function(n,t){"use strict";t.a={home:"home__uRcqa",resource:"resource__reFLt"}},QRet:function(n,t,e){"use strict";function r(n,t){N.options.__h&&N.options.__h(w,n,C||t),C=0;var e=w.__H||(w.__H={__:[],__h:[]});return n>=e.__.length&&e.__.push({__V:A}),e.__[n]}function o(n){return C=1,i(g,n)}function i(n,t,e){var o=r(O++,2);if(o.t=n,!o.__c&&(o.__=[e?e(t):g(void 0,t),function(n){var t=o.__N?o.__N[0]:o.__[0],e=o.t(t,n);t!==e&&(o.__N=[e,o.__[1]],o.__c.setState({}))}],o.__c=w,!w.u)){var i=function(n,t,e){if(!o.__c.__H)return!0;var r=o.__c.__H.__.filter((function(n){return n.__c}));if(r.every((function(n){return!n.__N})))return!a||a.call(this,n,t,e);var i=!1;return r.forEach((function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}})),!(!i&&o.__c.props===n)&&(!a||a.call(this,n,t,e))};w.u=!0;var a=w.shouldComponentUpdate,u=w.componentWillUpdate;w.componentWillUpdate=function(n,t,e){if(this.__e){var r=a;a=void 0,i(n,t,e),a=r}u&&u.call(this,n,t,e)},w.shouldComponentUpdate=i}return o.__N||o.__}function a(n,t){var e=r(O++,3);!N.options.__s&&y(e.__H,t)&&(e.__=n,e.i=t,w.__H.__h.push(e))}function u(n,t){var e=r(O++,4);!N.options.__s&&y(e.__H,t)&&(e.__=n,e.i=t,w.__h.push(e))}function c(n){return C=5,s((function(){return{current:n}}),[])}function l(n,t,e){C=6,u((function(){return"function"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0}),null==e?e:e.concat(n))}function s(n,t){var e=r(O++,7);return y(e.__H,t)?(e.__V=n(),e.i=t,e.__h=n,e.__V):e.__}function _(n,t){return C=8,s((function(){return n}),t)}function f(n){var t=w.context[n.__c],e=r(O++,9);return e.c=n,t?(null==e.__&&(e.__=!0,t.sub(w)),t.props.value):n.__}function h(n,t){N.options.useDebugValue&&N.options.useDebugValue(t?t(n):n)}function p(){var n=r(O++,11);if(!n.__){for(var t=w.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var e=t.__m||(t.__m=[0,0]);n.__="P"+e[0]+"-"+e[1]++}return n.__}function d(){for(var n;n=k.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(m),n.__H.__h.forEach(v),n.__H.__h=[]}catch(t){n.__H.__h=[],N.options.__e(t,n.__v)}}function b(n){var t,e=function(){clearTimeout(r),I&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(e,100);I&&(t=requestAnimationFrame(e))}function m(n){var t=w,e=n.__c;"function"==typeof e&&(n.__c=void 0,e()),w=t}function v(n){var t=w;n.__c=n.__(),w=t}function y(n,t){return!n||n.length!==t.length||t.some((function(t,e){return t!==n[e]}))}function g(n,t){return"function"==typeof t?t(n):t}e.d(t,"a",(function(){return _})),e.d(t,"b",(function(){return f})),e.d(t,"c",(function(){return h})),e.d(t,"d",(function(){return a})),e.d(t,"e",(function(){return p})),e.d(t,"f",(function(){return l})),e.d(t,"g",(function(){return u})),e.d(t,"h",(function(){return s})),e.d(t,"i",(function(){return i})),e.d(t,"j",(function(){return c})),e.d(t,"k",(function(){return o}));var O,w,j,S,N=e("hosL"),C=0,k=[],A=[],H=N.options.__b,J=N.options.__r,E=N.options.diffed,T=N.options.__c,x=N.options.unmount;N.options.__b=function(n){w=null,H&&H(n)},N.options.__r=function(n){J&&J(n),O=0;var t=(w=n.__c).__H;t&&(j===w?(t.__h=[],w.__h=[],t.__.forEach((function(n){n.__N&&(n.__=n.__N),n.__V=A,n.__N=n.i=void 0}))):(t.__h.forEach(m),t.__h.forEach(v),t.__h=[],O=0)),j=w},N.options.diffed=function(n){E&&E(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==k.push(t)&&S===N.options.requestAnimationFrame||((S=N.options.requestAnimationFrame)||b)(d)),t.__H.__.forEach((function(n){n.i&&(n.__H=n.i),n.__V!==A&&(n.__=n.__V),n.i=void 0,n.__V=A}))),j=w=null},N.options.__c=function(n,t){t.some((function(n){try{n.__h.forEach(m),n.__h=n.__h.filter((function(n){return!n.__||v(n)}))}catch(e){t.some((function(n){n.__h&&(n.__h=[])})),t=[],N.options.__e(e,n.__v)}})),T&&T(n,t)},N.options.unmount=function(n){x&&x(n);var t,e=n.__c;e&&e.__H&&(e.__H.__.forEach((function(n){try{m(n)}catch(n){t=n}})),e.__H=void 0,t&&N.options.__e(t,e.__v))};var I="function"==typeof requestAnimationFrame},RaXK:function(n,t,e){"use strict";(function(n,r){function o(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;c=!1}else for(;!(c=(r=i.call(e)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(n){l=!0,o=n}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return i(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var a=e("QRet");t.a=function(t){var e=t.websocket,i=e.ws,u=e.wsUrl,c=e.setWsUrl,l=e.history,s=e.myChannels,_=e.availableChannels,f=e.id,h=e.wsState,p=e.joinChannel,d=e.getChannels,b=e.heartbeat,m=e.broadcastMessage,v=e.sendMessageToTargetClient,y=e.sendMessageToTargetChannel,g=e.sendMessageToJoinedChannels,O=o(Object(a.k)(""),2),w=O[0],j=O[1],S=o(Object(a.k)(""),2),N=S[0],C=S[1],k=o(Object(a.k)(""),2),A=k[0],H=k[1],J=Object(a.h)((function(){try{JSON.parse(w)}catch(n){return!1}return!0}),[w]),E=Object(a.a)((function(n){n.preventDefault(),c(n.target.wsUrl.value)}),[c]);return n("div",{className:"flex flex-col gap-4"},n("div",{className:"flex gap-8"},i&&u&&n("div",null,h," on: ",u),n("form",{onSubmit:E},n("input",{type:"text",name:"wsUrl",placeholder:u}),n("button",{type:"submit"},"go"))),i&&n(r,null,n("div",null,f&&n("div",null,"id: ",f),b&&n("div",null,"heartbeat: ",JSON.stringify(b))),n("div",null,n("div",{className:"flex flex-row gap-8"},n("button",{onClick:d},"get channels"),n("form",{onSubmit:p},n("input",{type:"text",name:"channel"}),n("button",{type:"submit",className:"ml-2"},"join channel"))),n("ul",null,"my channels:",s.map((function(t){var e=t.channel,r=t.members;return n("li",{key:e,className:"ml-2"},e," | ",r.length," members: ",r.join(", "))}))),n("ul",null,"all channels:",_.map((function(t){var e=t.channel,r=t.members;return n("li",{key:e,className:"ml-2"},e," ",r.length?"| ".concat(r.length," members: ").concat(r.join(", ")):"(no members)")})))),n("div",null,n("div",{className:"flex flex-col gap-1"},n("div",null,n("label",{htmlFor:"message"},"message"),n("textarea",{cols:100,rows:1,name:"message",placeholder:'{"hello": 1}',value:w,onInput:function(n){return j(n.target.value)}})),n("div",null,n("label",{htmlFor:"targetChannel"},"target channel"),n("input",{name:"targetChannel",type:"text",value:N,onInput:function(n){return C(n.target.value)}})),n("div",null,n("label",{htmlFor:"targetChannel"},"target client"),n("input",{name:"targetId",type:"text",value:A,onInput:function(n){return H(n.target.value)}})),n("div",null,n("button",{disabled:!J,onClick:function(){return v(w,A)}},"send to another client"),n("button",{disabled:!J,onClick:function(){return y(w,N)}},"send to channel"),n("button",{disabled:!J,onClick:function(){return g(w)}},"send to joined channel"),n("button",{disabled:!J,onClick:function(){return m(w)}},"broadcast"))),!J&&w.length?n("div",null,"Invalid JSON"):n(r,null)),n("div",null,"incoming messages:"),n("div",{style:{overflow:"scroll",height:"200px"}},l.map((function(t){return n("div",{key:t},JSON.stringify(t))})))))}}).call(this,e("hosL").h,e("hosL").Fragment)},YD9F:function(n,t,e){"use strict";e.r(t),function(n){var r=e("FA6U"),o=e("6MY0");t.default=function(){return n("div",{class:r.a.home},n(o.a,null))}}.call(this,e("hosL").h)},Zp5c:function(n,t,e){"use strict";function r(n){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function o(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?o(Object(e),!0).forEach((function(t){a(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function a(n,t,e){return(t=function(n){var t=function(n,t){if("object"!==r(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var o=e.call(n,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"===r(t)?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function u(n){return function(n){if(Array.isArray(n))return _(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||s(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(n,t,e,r,o,i,a){try{var u=n[i](a),c=u.value}catch(n){return void e(n)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;c=!1}else for(;!(c=(r=i.call(e)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(n){l=!0,o=n}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(n,t)||s(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(n,t){if(n){if("string"==typeof n)return _(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_(n,t):void 0}}function _(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var f=e("QRet");t.a=function(){var n=l(Object(f.k)(null),2),t=n[0],e=n[1],r=l(Object(f.k)(""),2),o=r[0],a=r[1],s=l(Object(f.k)([]),2),_=s[0],h=s[1],p=l(Object(f.k)(null),2),d=p[0],b=p[1],m=l(Object(f.k)([]),2),v=m[0],y=m[1],g=l(Object(f.k)([]),2),O=g[0],w=g[1],j=l(Object(f.k)(null),2),S=j[0],N=j[1],C=l(Object(f.k)(""),2),k=C[0],A=C[1],H=Object(f.a)(function(){var n,t=(n=function*(n){var t=yield JSON.parse(n.data);switch(t.type){case"id":N(t.id);break;case"heartbeat":b(t.heartbeat);break;case"myChannels":y(t.channels);break;case"availableChannels":w(t.channels);break;default:h((function(n){return[t].concat(u(n))}))}A(t)},function(){var t=this,e=arguments;return new Promise((function(r,o){function i(n){c(u,r,o,i,a,"next",n)}function a(n){c(u,r,o,i,a,"throw",n)}var u=n.apply(t,e);i(void 0)}))});return function(n){return t.apply(this,arguments)}}(),[]);Object(f.d)((function(){if(window){var n=window.location.protocol.includes("https")?"wss":"ws",t=window.location.protocol.includes("https")?"":":3000",e="".concat(n,"://").concat(location.hostname).concat(t,"?channels=welcome");a(e)}}),[]),Object(f.d)((function(){if(o.length&&"undefined"!=typeof window){console.log("attempting to connect to",o),t&&t.close();var n=new WebSocket(o);n.onmessage=H,n.onopen=function(){console.log("hey were open")},e(n)}}),[H,o]);var J=Object(f.a)((function(){null==t||t.send(JSON.stringify({type:"myChannels"})),null==t||t.send(JSON.stringify({type:"availableChannels"}))}),[t]),E=Object(f.h)((function(){if("undefined"!=typeof window)switch(null==t?void 0:t.readyState){case WebSocket.CONNECTING:return"connecting";case WebSocket.OPEN:return"open";case WebSocket.CLOSING:return"closing";case WebSocket.CLOSED:return"closed";default:return"uninitialized"}}),[null==t?void 0:t.readyState]);Object(f.d)((function(){"open"===E&&J()}),[J,t,E]);var T=Object(f.a)((function(n){n.preventDefault(),null==t||t.send(JSON.stringify({type:"joinChannel",channel:n.target.channel.value}))}),[t]),x=Object(f.a)((function(n){return"open"===E&&(null==t?void 0:t.send(JSON.stringify({type:"broadcast",message:i(i({},JSON.parse(n)),{},{timestamp:Date.now()})})))}),[t,E]),I=Object(f.a)((function(n,e){"open"===E&&(null==t||t.send(JSON.stringify(i(i({},JSON.parse(n)),{},{timestamp:Date.now(),channel:e}))))}),[t,E]),P=Object(f.a)((function(n,e){console.log("sending to target id",n,e),"open"===E&&(null==t||t.send(JSON.stringify(i(i({},JSON.parse(n)),{},{timestamp:Date.now(),targetId:e}))))}),[t,E]),D=Object(f.a)((function(n){"open"===E&&(null==t||t.send(JSON.stringify(i(i({},JSON.parse(n)),{},{timestamp:Date.now()}))))}),[t,E]);return{ws:t,wsUrl:o,setWsUrl:a,history:_,myChannels:v,availableChannels:O,id:S,incomingMessage:k,wsState:E,joinChannel:T,getChannels:J,heartbeat:d,broadcastMessage:x,sendMessageToTargetClient:P,sendMessageToTargetChannel:I,sendMessageToJoinedChannels:D}}}}]);
//# sourceMappingURL=route-home.chunk.d88b5.js.map