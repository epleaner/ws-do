{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./routes/home/index.js","webpack:///./components/clients/basic.js","webpack:///../node_modules/classnames/index.js","webpack:///../node_modules/just-range/index.js","webpack:///../node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///./routes/home/style.css?b889","webpack:///external \"preact\"","webpack:///../node_modules/webpack/buildin/amd-options.js","webpack:///../node_modules/prop-types/factoryWithThrowingShims.js","webpack:///../node_modules/preact/hooks/src/index.js","webpack:///./style/index.css?3992","webpack:///../node_modules/preact-router/src/util.js","webpack:///../node_modules/preact-router/src/index.js","webpack:///./components/app.js","webpack:///./index.js","webpack:///../node_modules/preact/compat/src/util.js","webpack:///../node_modules/preact/compat/src/PureComponent.js","webpack:///../node_modules/preact/compat/src/memo.js","webpack:///../node_modules/preact/compat/src/forwardRef.js","webpack:///../node_modules/preact/compat/src/Children.js","webpack:///../node_modules/preact/compat/src/suspense.js","webpack:///../node_modules/preact/compat/src/suspense-list.js","webpack:///../node_modules/preact/compat/src/portals.js","webpack:///../node_modules/preact/compat/src/render.js","webpack:///../node_modules/preact/compat/src/index.js","webpack:///../node_modules/react-piano/src/MidiNumbers.js","webpack:///../node_modules/react-piano/src/Key.js","webpack:///../node_modules/react-piano/src/Keyboard.js","webpack:///../node_modules/react-piano/src/ControlledPiano.js","webpack:///../node_modules/react-piano/src/Piano.js","webpack:///../node_modules/react-piano/src/KeyboardShortcuts.js","webpack:///./components/header/index.js","webpack:///./components/wsMonitor.js","webpack:///./routes/synth/index.js","webpack:///../node_modules/prop-types/index.js","webpack:///./hooks/useWs.js","webpack:///./routes/midi/style.css?1849","webpack:///./routes/midi/index.js","webpack:///../node_modules/lodash.difference/index.js","webpack:///./utils/polysynth.js","webpack:///./utils/midihandler.js","webpack:///../node_modules/react-piano/dist/styles.css","webpack:///./components/clients/synth/piano.js","webpack:///./components/clients/synth/index.js","webpack:///./routes/synth/style.css?90c8","webpack:///./components/clients/midi/index.js"],"names":["Home","h","class","style","home","Basic","WsClient","_useWs","useWs","ws","wsUrl","setWsUrl","history","myChannels","availableChannels","id","wsState","joinChannel","getChannels","heartbeat","broadcastMessage","sendMessageToTargetChannel","sendMessageToJoinedChannels","_useState","useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","targetChannel","setTargetChannel","messageIsValidJSON","useMemo","JSON","parse","e","bloopChannel","useCallback","preventDefault","stringify","type","channel","target","value","bloopChannels","broadcastBloop","handleWsUrlChange","onSubmit","name","placeholder","Fragment","onClick","htmlFor","cols","rows","onInput","disabled","length","overflow","height","map","data","key","hasOwn","hasOwnProperty","nativeCodeString","classNames","classes","i","arguments","arg","argType","_typeof","push","Array","isArray","inner","apply","toString","Object","prototype","includes","call","join","module","exports","default","define","window","range","start","stop","step","Error","toReturn","increasing","ReactPropTypesSecret","require","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","err","isRequired","getShim","ReactPropTypes","array","bigint","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","t","r","u","o","f","c","n","__b","a","__r","v","diffed","l","__c","m","unmount","d","__h","__H","__","__V","s","B","__N","setState","filter","every","forEach","shouldComponentUpdate","componentWillUpdate","__e","p","__s","z","y","_","F","current","A","concat","T","q","context","sub","x","useDebugValue","P","componentDidCatch","V","__v","__m","b","shift","__P","k","w","requestAnimationFrame","j","some","g","clearTimeout","cancelAnimationFrame","setTimeout","EMPTY$1","assign","obj","exec","url","route","opts","reg","match","matches","ret","split","decodeURIComponent","slice","segmentize","replace","max","Math","i$1","charAt","param","flags","plus","indexOf","star","val","pathRankSort","rank","index","prepareVNodeForRanking","vnode","rankChild","rankSegment","segment","path","customHistory","ROUTERS","subscribers","EMPTY","setUrl","getCurrentUrl","getCurrentLocation","pathname","search","canRoute","routeTo","didRoute","routeFromLink","getAttribute","href","handleLinkClick","ctrlKey","metaKey","altKey","shiftKey","button","currentTarget","prevent","stopImmediatePropagation","stopPropagation","delegateLinkHandler","String","nodeName","toUpperCase","hasAttribute","parentNode","eventListenersInitialized","initEventListeners","addEventListener","Router","Component$$1","state","static","onChange","children","toChildArray","getMatchingChildren","updating","forceUpdate","componentWillMount","componentDidMount","unlisten","listen","this$1","componentWillUnmount","splice","componentDidUpdate","invoke","sort","newProps","ref","cloneElement","Boolean","render","ref$1","active","previous","previousUrl","router","Component","Link","createElement","Route","component","App","Header","Synth","MIDI","C","E","displayName","isReactComponent","__f","isPureReactComponent","R","N","Symbol","for","$$typeof","O","count","only","toArray","then","__k","I","L","U","insertBefore","__d","D","__u","__a","M","__R","__O","pop","document","fallback","W","delete","revealOrder","size","getChildContext","nodeType","childNodes","appendChild","removeChild","containerInfo","get","Map","reverse","set","H","Z","Y","$","test","G","textContent","J","defineProperty","configurable","writable","K","event","Q","X","cancelBubble","nn","defaultPrevented","persist","isPropagationStopped","isDefaultPrevented","nativeEvent","tn","en","enumerable","rn","toLowerCase","multiple","selected","defaultValue","className","un","on","ln","ReactCurrentDispatcher","readContext","__n","cn","fn","bind","an","sn","hn","vn","base","dn","pn","mn","yn","_n","bn","Sn","gn","Cn","useId","useReducer","useEffect","useLayoutEffect","useInsertionEffect","useTransition","useDeferredValue","useSyncExternalStore","startTransition","useRef","useImperativeHandle","useContext","S","version","Children","hydrate","unmountComponentAtNode","createPortal","createContext","createFactory","createRef","isValidElement","findDOMNode","PureComponent","memo","forwardRef","flushSync","unstable_batchedUpdates","StrictMode","Suspense","SuspenseList","lazy","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","SORTED_PITCHES","ACCIDENTAL_PITCHES","PITCH_INDEXES","Db","Eb","Gb","Ab","Bb","MIDI_NUMBER_C0","MIN_MIDI_NUMBER","MAX_MIDI_NUMBER","NOTE_REGEX","NOTES_IN_OCTAVE","fromNote","note","letter","_match","accidental","octave","pitchName","pitchIndex","parseInt","buildMidiNumberAttributes","midiNumber","floor","isAccidental","buildMidiNumberAttributesCache","reduce","cache","midiNumberAttributesCache","getAttributes","attrs","NATURAL_MIDI_NUMBERS","MidiNumbers","Key","onPlayNoteInput","_this","onStopNoteInput","OCTAVE_WIDTH","_MidiNumbers$getAttri","pitchPosition","pitchPositions","octavePosition","getAbsoluteKeyPosition","noteRange","first","naturalKeyWidth","_this$props","accidentalWidthRatio","gliss","useTouchEvents","React","left","ratioToPercentage","getRelativeKeyPosition","width","onMouseDown","onMouseUp","onMouseEnter","onMouseLeave","onTouchStart","onTouchCancel","onTouchEnd","ratio","Keyboard","last","getMidiNumbers","getNaturalKeyCount","keyWidth","getNaturalKeyWidth","keyWidthToHeight","getWidth","getHeight","_MidiNumbers$getAttri2","isActive","activeNotes","renderNoteLabel","noteRangePropType","isNaturalMidiNumber","_props$propName","ControlledPiano","isMouseDown","_ref","prevActiveNotes","nextActiveNotes","notesStopped","difference","notesStarted","playNote","stopNote","keyboardShortcuts","shortcut","find","sh","getMidiNumberForKey","_ref2","keyboardShortcut","getKeyForMidiNumber","onKeyDown","onKeyUp","removeEventListener","prevProps","prevState","handleNoteChanges","_ref3","Piano","otherProps","_objectWithoutProperties","_extends","handlePlayNoteInput","handleStopNoteInput","createKeyboardShortcuts","firstNote","lastNote","keyboardConfig","currentMidiNumber","naturalKeyIndex","flat","natural","KeyboardShortcuts","create","BOTTOM_ROW","sharp","HOME_ROW","QWERTY_ROW","WsMonitor","websocket","sendMessageToTargetClient","_useState5","_useState6","targetId","setTargetId","members","SynthClient","process","setWs","setHistory","_useState7","_useState8","setHeartbeat","_useState9","_useState10","setMyChannels","_useState11","_useState12","setAvailableChannels","_useState13","_useState14","setId","_useState15","_useState16","incomingMessage","setIncomingMessage","onMessage","_asyncToGenerator","channels","_toConsumableArray","_x2","protocol","port","hostname","console","log","wsConnection","WebSocket","onmessage","send","readyState","CONNECTING","OPEN","CLOSING","CLOSED","_objectSpread","timestamp","Date","now","MidiClient","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","funcTag","genTag","reRegExpChar","reIsHostCtor","freeGlobal","global","freeSelf","self","root","Function","thisArg","args","arrayIncludes","baseIndexOf","arrayIncludesWith","comparator","arrayMap","iteratee","result","arrayPush","values","offset","baseFindIndex","predicate","fromIndex","fromRight","baseIsNaN","baseUnary","cacheHas","has","getValue","undefined","isHostObject","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","keys","IE_PROTO","funcToString","objectToString","reIsNative","RegExp","propertyIsEnumerable","spreadableSymbol","isConcatSpreadable","nativeMax","getNative","nativeCreate","Hash","entries","clear","entry","hashClear","__data__","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","lastIndex","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","SetCache","add","setCacheAdd","setCacheHas","eq","baseDifference","isCommon","valuesLength","outer","computed","valuesIndex","baseFlatten","depth","isStrict","isFlattenable","baseIsNative","isObject","isMasked","pattern","isFunction","toSource","baseRest","otherArgs","isKeyable","isArguments","isArrayLikeObject","other","isArrayLike","isLength","isObjectLike","tag","PolySynth","_classCallCheck","audioContext","AudioContext","webkitAudioContext","voices","_createClass","velocity","voice","Voice","oscillator","createOscillator","frequency","getFrequency","gainNode","createGain","gain","connect","destination","linearRampToValueAtTime","currentTime","pow","MIDIHandler","synth","navigator","requestMIDIAccess","onMIDISuccess","onMIDIFailure","onMIDIMessage","_message$data","status","selectedInput","midiAccess","inputs","selectedDeviceId","access","devices","selectElement","getElementById","_iterator","_createForOfIteratorHelper","_step","done","device","optionElement","text","onDeviceSelect","_iterator2","_step2","input","onmidimessage","_iterator3","_step3","_iterator4","_step4","setupKeyboardListener","_this2","code","toggleMIDIDeviceSelect","deviceSelectContainer","display","MIDIPiano","onPlayNote","onStopNote","polySynth","setPolySynth","muteIncoming","setMuteIncoming","muteOutgoing","setMuteOutgoing","broadcastNotes","setBroadcastNotes","noteData","handlePlayNote","handleStopNote","sequencerIntervalId","setSequencerIntervalId","handleSequenceChannel","channelName","clearInterval","sequenceTarget","setInterval","targetIndex","findIndex","Monitor","checked","setMidiHandler"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;AClFA;AAAA;AAAgC;AACmB;AAEnD,IAAMA,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAS;EACjB,OACEC,CAAA;IAAKC,KAAK,EAAEC,0DAAK,CAACC;EAAK,GACrBH,CAAA,CAACI,yEAAK,MAAE,CACL,CAAC;AAEV,CAAC;AAEcL,6DAAI,E;;;;;;;;;;;;;;;;;ACX2C;AACxB;AAEtC,IAAMM,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;EACrB,IAAAC,MAAA,GAeIC,oEAAK,CAAC,CAAC;IAdTC,EAAE,GAAAF,MAAA,CAAFE,EAAE;IACFC,KAAK,GAAAH,MAAA,CAALG,KAAK;IACLC,QAAQ,GAAAJ,MAAA,CAARI,QAAQ;IACRC,OAAO,GAAAL,MAAA,CAAPK,OAAO;IACPC,UAAU,GAAAN,MAAA,CAAVM,UAAU;IACVC,iBAAiB,GAAAP,MAAA,CAAjBO,iBAAiB;IACjBC,EAAE,GAAAR,MAAA,CAAFQ,EAAE;IACFC,OAAO,GAAAT,MAAA,CAAPS,OAAO;IACPC,WAAW,GAAAV,MAAA,CAAXU,WAAW;IACXC,WAAW,GAAAX,MAAA,CAAXW,WAAW;IACXC,SAAS,GAAAZ,MAAA,CAATY,SAAS;IACTC,gBAAgB,GAAAb,MAAA,CAAhBa,gBAAgB;IAChBC,0BAA0B,GAAAd,MAAA,CAA1Bc,0BAA0B;IAC1BC,2BAA2B,GAAAf,MAAA,CAA3Be,2BAA2B;EAG7B,IAAAC,SAAA,GAA8BC,qEAAQ,CAAC,EAAE,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA;IAAnCI,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAC1B,IAAAI,UAAA,GAA0CL,qEAAQ,CAAC,EAAE,CAAC;IAAAM,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA/CE,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EAEtC,IAAMG,kBAAkB,GAAGC,oEAAO,CAAC,YAAM;IACvC,IAAI;MACFC,IAAI,CAACC,KAAK,CAACT,OAAO,CAAC;IACrB,CAAC,CAAC,OAAOU,CAAC,EAAE;MACV,OAAO,KAAK;IACd;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAACV,OAAO,CAAC,CAAC;EAEb,IAAMW,YAAY,GAAGC,wEAAW,CAC9B,UAACF,CAAC,EAAK;IACLA,CAAC,CAACG,cAAc,CAAC,CAAC;IAClBnB,0BAA0B,CACxBc,IAAI,CAACM,SAAS,CAAC;MACbC,IAAI,EAAE,OAAO;MACbC,OAAO,EAAEN,CAAC,CAACO,MAAM,CAACD,OAAO,CAACE;IAC5B,CAAC,CACH,CAAC;EACH,CAAC,EACD,CAACxB,0BAA0B,CAC7B,CAAC;EAED,IAAMyB,aAAa,GAAGP,wEAAW,CAC/B;IAAA,OAAMjB,2BAA2B,CAACa,IAAI,CAACM,SAAS,CAAC;MAAEC,IAAI,EAAE;IAAQ,CAAC,CAAC,CAAC;EAAA,GACpE,CAACpB,2BAA2B,CAC9B,CAAC;EAED,IAAMyB,cAAc,GAAGR,wEAAW,CAChC;IAAA,OAAMnB,gBAAgB,CAACe,IAAI,CAACM,SAAS,CAAC;MAAEC,IAAI,EAAE;IAAQ,CAAC,CAAC,CAAC;EAAA,GACzD,CAACtB,gBAAgB,CACnB,CAAC;EAED,IAAM4B,iBAAiB,GAAGT,wEAAW,CACnC,UAACF,CAAC,EAAK;IACLA,CAAC,CAACG,cAAc,CAAC,CAAC;IAClB7B,QAAQ,CAAC0B,CAAC,CAACO,MAAM,CAAClC,KAAK,CAACmC,KAAK,CAAC;EAChC,CAAC,EACD,CAAClC,QAAQ,CACX,CAAC;EAED,OACEV,CAAA,cACEA,CAAA,cAAK,SAAO,EAACe,OAAa,CAAC,EAC3Bf,CAAA;IAAMgD,QAAQ,EAAED;EAAkB,GAChC/C,CAAA;IAAOyC,IAAI,EAAC,MAAM;IAACQ,IAAI,EAAC,OAAO;IAACC,WAAW,EAAEzC;EAAM,CAAE,CAAC,EACtDT,CAAA;IAAQyC,IAAI,EAAC;EAAQ,GAAC,IAAU,CAC5B,CAAC,EAENjC,EAAE,IACDR,CAAA,CAAAmD,QAAA,QACG1C,KAAK,IAAIT,CAAA,cAAK,gBAAc,EAACS,KAAW,CAAC,EACzCK,EAAE,IAAId,CAAA,cAAK,MAAI,EAACc,EAAQ,CAAC,EACzBI,SAAS,IAAIlB,CAAA,cAAK,aAAW,EAACkC,IAAI,CAACM,SAAS,CAACtB,SAAS,CAAO,CAAC,EAC/DlB,CAAA;IAAMgD,QAAQ,EAAEhC;EAAY,GAC1BhB,CAAA;IAAOyC,IAAI,EAAC,MAAM;IAACQ,IAAI,EAAC;EAAS,CAAE,CAAC,EACpCjD,CAAA;IAAQyC,IAAI,EAAC;EAAQ,GAAC,cAAoB,CACtC,CAAC,EACPzC,CAAA,cAAK,eAAa,EAACkC,IAAI,CAACM,SAAS,CAAC5B,UAAU,CAAO,CAAC,EACpDZ,CAAA,cAAK,sBAAoB,EAACkC,IAAI,CAACM,SAAS,CAAC3B,iBAAiB,CAAO,CAAC,EAClEb,CAAA;IAAMgD,QAAQ,EAAEX;EAAa,GAC3BrC,CAAA;IAAOyC,IAAI,EAAC,MAAM;IAACQ,IAAI,EAAC;EAAS,CAAE,CAAC,EACpCjD,CAAA;IAAQyC,IAAI,EAAC;EAAQ,GAAC,eAAqB,CACvC,CAAC,EACPzC,CAAA;IAAQoD,OAAO,EAAEnC;EAAY,GAAC,cAAoB,CAAC,EACnDjB,CAAA;IAAQoD,OAAO,EAAEP;EAAc,GAAC,mBAAyB,CAAC,EAC1D7C,CAAA;IAAQoD,OAAO,EAAEN;EAAe,GAAC,iBAAuB,CAAC,EAEzD9C,CAAA,cACEA,CAAA,cACEA,CAAA,cACEA,CAAA;IAAOqD,OAAO,EAAC;EAAS,GAAC,SAAc,CAAC,EACxCrD,CAAA;IACEsD,IAAI,EAAE,GAAI;IACVC,IAAI,EAAE,CAAE;IACRN,IAAI,EAAC,SAAS;IACdC,WAAW,kBAAiB;IAC5BN,KAAK,EAAElB,OAAQ;IACf8B,OAAO,EAAE,SAAAA,QAACpB,CAAC;MAAA,OAAKT,UAAU,CAACS,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC;IAAA;EAAC,CAC5C,CACE,CAAC,EACN5C,CAAA,cACEA,CAAA;IAAOqD,OAAO,EAAC;EAAe,GAAC,gBAAqB,CAAC,EACrDrD,CAAA;IACEiD,IAAI,EAAC,eAAe;IACpBR,IAAI,EAAC,MAAM;IACXG,KAAK,EAAEd,aAAc;IACrB0B,OAAO,EAAE,SAAAA,QAACpB,CAAC;MAAA,OAAKL,gBAAgB,CAACK,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC;IAAA;EAAC,CAClD,CACE,CAAC,EACN5C,CAAA;IACEyD,QAAQ,EAAE,CAACzB,kBAAmB;IAC9BoB,OAAO,EAAE,SAAAA,QAAA;MAAA,OACPhC,0BAA0B,CAACM,OAAO,EAAEI,aAAa,CAAC;IAAA;EACnD,GAAC,iBAEI,CAAC,EACT9B,CAAA;IACEyD,QAAQ,EAAE,CAACzB,kBAAmB;IAC9BoB,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAMjC,gBAAgB,CAACO,OAAO,CAAC;IAAA;EAAC,GAAC,WAEpC,CAEL,CAAC,EACL,CAACM,kBAAkB,IAAIN,OAAO,CAACgC,MAAM,GACpC1D,CAAA,cAAK,cAAiB,CAAC,GAEvBA,CAAA,CAAAmD,QAAA,MAAI,CAEH,CAAC,EAENnD,CAAA,cAAK,oBAAuB,CAAC,EAC7BA,CAAA;IAAKE,KAAK,EAAE;MAAEyD,QAAQ,EAAE,QAAQ;MAAEC,MAAM,EAAE;IAAQ;EAAE,GACjDjD,OAAO,CAACkD,GAAG,CAAC,UAACC,IAAI;IAAA,OAChB9D,CAAA;MAAK+D,GAAG,EAAED;IAAK,GAAE5B,IAAI,CAACM,SAAS,CAACsB,IAAI,CAAO,CAAC;EAAA,CAC7C,CACE,CACL,CAED,CAAC;AAEV,CAAC;AAEczD,iEAAQ,E;;;;;;;;;AClJvB;AACA;AACA;AACA;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAEZ,IAAI2D,MAAM,GAAG,CAAC,CAAC,CAACC,cAAc;EAC9B,IAAIC,gBAAgB,GAAG,eAAe;EAEtC,SAASC,UAAUA,CAAA,EAAG;IACrB,IAAIC,OAAO,GAAG,EAAE;IAEhB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACZ,MAAM,EAAEW,CAAC,EAAE,EAAE;MAC1C,IAAIE,GAAG,GAAGD,SAAS,CAACD,CAAC,CAAC;MACtB,IAAI,CAACE,GAAG,EAAE;MAEV,IAAIC,OAAO,GAAAC,OAAA,CAAUF,GAAG;MAExB,IAAIC,OAAO,KAAK,QAAQ,IAAIA,OAAO,KAAK,QAAQ,EAAE;QACjDJ,OAAO,CAACM,IAAI,CAACH,GAAG,CAAC;MAClB,CAAC,MAAM,IAAII,KAAK,CAACC,OAAO,CAACL,GAAG,CAAC,EAAE;QAC9B,IAAIA,GAAG,CAACb,MAAM,EAAE;UACf,IAAImB,KAAK,GAAGV,UAAU,CAACW,KAAK,CAAC,IAAI,EAAEP,GAAG,CAAC;UACvC,IAAIM,KAAK,EAAE;YACVT,OAAO,CAACM,IAAI,CAACG,KAAK,CAAC;UACpB;QACD;MACD,CAAC,MAAM,IAAIL,OAAO,KAAK,QAAQ,EAAE;QAChC,IAAID,GAAG,CAACQ,QAAQ,KAAKC,MAAM,CAACC,SAAS,CAACF,QAAQ,IAAI,CAACR,GAAG,CAACQ,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAACG,QAAQ,CAAC,eAAe,CAAC,EAAE;UACrGd,OAAO,CAACM,IAAI,CAACH,GAAG,CAACQ,QAAQ,CAAC,CAAC,CAAC;UAC5B;QACD;QAEA,KAAK,IAAIhB,GAAG,IAAIQ,GAAG,EAAE;UACpB,IAAIP,MAAM,CAACmB,IAAI,CAACZ,GAAG,EAAER,GAAG,CAAC,IAAIQ,GAAG,CAACR,GAAG,CAAC,EAAE;YACtCK,OAAO,CAACM,IAAI,CAACX,GAAG,CAAC;UAClB;QACD;MACD;IACD;IAEA,OAAOK,OAAO,CAACgB,IAAI,CAAC,GAAG,CAAC;EACzB;EAEA,IAAI,KAA6B,IAAIC,MAAM,CAACC,OAAO,EAAE;IACpDnB,UAAU,CAACoB,OAAO,GAAGpB,UAAU;IAC/BkB,MAAM,CAACC,OAAO,GAAGnB,UAAU;EAC5B,CAAC,MAAM,IAAI,KAA4B,IAAIM,OAAA,CAAOe,2BAAU,MAAK,QAAQ,IAAIA,2BAAU,EAAE;IACxF;IACAA,iCAAqB,EAAE,mCAAE,YAAY;MACpC,OAAOrB,UAAU;IAClB,CAAC;AAAA,oGAAC;EACH,CAAC,MAAM;IACNsB,MAAM,CAACtB,UAAU,GAAGA,UAAU;EAC/B;AACD,CAAC,EAAC,CAAC,C;;;;;;;AC3DHkB,MAAM,CAACC,OAAO,GAAGI,KAAK;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,KAAKA,CAACC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAE;EAChC,IAAIF,KAAK,IAAI,IAAI,IAAI,OAAOA,KAAK,IAAI,QAAQ,EAAE;IAC7C,MAAM,IAAIG,KAAK,CAAC,gCAAgC,CAAC;EACnD;EACA,IAAIF,IAAI,IAAI,IAAI,IAAI,OAAOA,IAAI,IAAI,QAAQ,EAAE;IAC3C,MAAM,IAAIE,KAAK,CAAC,+BAA+B,CAAC;EAClD;EACA,IAAID,IAAI,IAAI,IAAI,IAAI,OAAOA,IAAI,IAAI,QAAQ,EAAE;IAC3C,MAAM,IAAIC,KAAK,CAAC,+BAA+B,CAAC;EAClD;EACA,IAAIF,IAAI,IAAI,IAAI,EAAE;IAChBA,IAAI,GAAGD,KAAK,IAAI,CAAC;IACjBA,KAAK,GAAG,CAAC;EACX;EACA,IAAIE,IAAI,IAAI,IAAI,EAAE;IAChBA,IAAI,GAAGD,IAAI,GAAGD,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;EAC9B;EACA,IAAII,QAAQ,GAAG,EAAE;EACjB,IAAIC,UAAU,GAAGL,KAAK,GAAGC,IAAI,CAAC,CAAC;EAC/B,OAAOI,UAAU,GAAGL,KAAK,GAAGC,IAAI,GAAGD,KAAK,GAAGC,IAAI,EAAED,KAAK,IAAIE,IAAI,EAAE;IAC9DE,QAAQ,CAACrB,IAAI,CAACiB,KAAK,CAAC;EACtB;EACA,OAAOI,QAAQ;AACjB,C;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,IAAIE,oBAAoB,GAAG,8CAA8C;AAEzEZ,MAAM,CAACC,OAAO,GAAGW,oBAAoB,C;;;;;;;;ACXrC;AACe,0DAAC,kDAAkD,E;;;;;;;ACDlE,mC;;;;;;;ACAA;AACA;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,IAAIA,oBAAoB,GAAGC,mBAAO,CAAC,MAA4B,CAAC;AAEhE,SAASC,aAAaA,CAAA,EAAG,CAAC;AAC1B,SAASC,sBAAsBA,CAAA,EAAG,CAAC;AACnCA,sBAAsB,CAACC,iBAAiB,GAAGF,aAAa;AAExDd,MAAM,CAACC,OAAO,GAAG,YAAW;EAC1B,SAASgB,IAAIA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,QAAQ,EAAEC,YAAY,EAAEC,MAAM,EAAE;IAC5E,IAAIA,MAAM,KAAKX,oBAAoB,EAAE;MACnC;MACA;IACF;IACA,IAAIY,GAAG,GAAG,IAAIf,KAAK,CACjB,sFAAsF,GACtF,+CAA+C,GAC/C,gDACF,CAAC;IACDe,GAAG,CAAC5D,IAAI,GAAG,qBAAqB;IAChC,MAAM4D,GAAG;EACX;EAAC;EACDP,IAAI,CAACQ,UAAU,GAAGR,IAAI;EACtB,SAASS,OAAOA,CAAA,EAAG;IACjB,OAAOT,IAAI;EACb;EAAC;EACD;EACA;EACA,IAAIU,cAAc,GAAG;IACnBC,KAAK,EAAEX,IAAI;IACXY,MAAM,EAAEZ,IAAI;IACZa,IAAI,EAAEb,IAAI;IACVc,IAAI,EAAEd,IAAI;IACVe,MAAM,EAAEf,IAAI;IACZgB,MAAM,EAAEhB,IAAI;IACZiB,MAAM,EAAEjB,IAAI;IACZkB,MAAM,EAAElB,IAAI;IAEZmB,GAAG,EAAEnB,IAAI;IACToB,OAAO,EAAEX,OAAO;IAChBY,OAAO,EAAErB,IAAI;IACbsB,WAAW,EAAEtB,IAAI;IACjBuB,UAAU,EAAEd,OAAO;IACnBe,IAAI,EAAExB,IAAI;IACVyB,QAAQ,EAAEhB,OAAO;IACjBiB,KAAK,EAAEjB,OAAO;IACdkB,SAAS,EAAElB,OAAO;IAClBmB,KAAK,EAAEnB,OAAO;IACdoB,KAAK,EAAEpB,OAAO;IAEdqB,cAAc,EAAEhC,sBAAsB;IACtCC,iBAAiB,EAAEF;EACrB,CAAC;EAEDa,cAAc,CAACqB,SAAS,GAAGrB,cAAc;EAEzC,OAAOA,cAAc;AACvB,CAAC,C;;;;;;;;;;;;;;;;;;;;;;;AC7DD,IAAIsB,CAAA;EAGAC,CAAA;EAGAC,CAAA;EAiBAnE,CAAA;EAdAoE,CAAA,GAAc;EAGdC,CAAA,GAAoB;EAEpBC,CAAA,GAAQ;EAERvG,CAAA,GAAgBwG,8CAAA,CAApBC,GAAA;EACIC,CAAA,GAAkBF,8CAAA,CAAtBG,GAAA;EACIC,CAAA,GAAeJ,8CAAA,CAAQK,MAAA;EACvBC,CAAA,GAAYN,8CAAA,CAAhBO,GAAA;EACIC,CAAA,GAAmBR,8CAAA,CAAQS,OAAA;AAqG/B,SAASC,EAAahB,CAAA,EAAOE,CAAA;EACxBI,8CAAA,CAAeW,GAAA,IAClBX,8CAAA,CAAAW,GAAA,CAAchB,CAAA,EAAkBD,CAAA,EAAOG,CAAA,IAAeD,CAAA,GAEvDC,CAAA,GAAc;EAOd,IAAMpE,CAAA,GACLkE,CAAA,CAAgBiB,GAAA,KACfjB,CAAA,CAAgBiB,GAAA,GAAW;IAC3BC,EAAA,EAAO;IACPF,GAAA,EAAiB;EAAA;EAMnB,OAHIjB,CAAA,IAASjE,CAAA,CAAKoF,EAAA,CAAO/F,MAAA,IACxBW,CAAA,CAAAoF,EAAA,CAAY/E,IAAA,CAAK;IAAEgF,GAAA,EAAef;EAAA,IAE5BtE,CAAA,CAAAoF,EAAA,CAAYnB,CAAA,CACnB;AAAA;AAKM,SAAStI,EAAS4I,CAAA;EAExB,OADAH,CAAA,GAAc,GACPkB,CAAA,CAAWC,CAAA,EAAgBhB,CAAA,CAClC;AAAA;AAQe,SAAAe,EAAWf,CAAA,EAASJ,CAAA,EAAcnE,CAAA;EAEjD,IAAMoE,CAAA,GAAYa,CAAA,CAAahB,CAAA,IAAgB;EAE/C,IADAG,CAAA,CAAUH,CAAA,GAAWM,CAAA,GAChBH,CAAA,CAALU,GAAA,KACCV,CAAA,CAAAgB,EAAA,GAAmB,CACjBpF,CAAA,GAAiDA,CAAA,CAAKmE,CAAA,IAA/CoB,CAAA,MAAe,GAAWpB,CAAA,GAElC,UAAAI,CAAA;IACC,IAAMN,CAAA,GAAeG,CAAA,CAAAoB,GAAA,GAClBpB,CAAA,CAASoB,GAAA,CAAY,KACrBpB,CAAA,CAASgB,EAAA,CAAQ;MACdlB,CAAA,GAAYE,CAAA,CAAUH,CAAA,CAASA,CAAA,EAAcM,CAAA;IAE/CN,CAAA,KAAiBC,CAAA,KACpBE,CAAA,CAASoB,GAAA,GAAc,CAACtB,CAAA,EAAWE,CAAA,CAASgB,EAAA,CAAQ,KACpDhB,CAAA,CAASU,GAAA,CAAYW,QAAA,CAAS,CAA9B,GAED;EAAA,IAGFrB,CAAA,CAAAU,GAAA,GAAuBZ,CAAA,GAElBA,CAAA,CAAiBC,CAAA,GAAkB;IAgC9B,IAAAE,CAAA,GAAT,SAASA,EAAgBE,CAAA,EAAGN,CAAA,EAAGC,CAAA;MAC9B,KAAKE,CAAA,CAADU,GAAA,CAAAK,GAAA,EAA+B;MAEnC,IAAMhB,CAAA,GAAaC,CAAA,CAASU,GAAA,CAA0BK,GAAA,CAAAC,EAAA,CAAAM,MAAA,CACrD,UAAAnB,CAAA;QAAK,OAAAA,CAAA,CAAJO,GAAA;MAAA;MAKF,IAHsBX,CAAA,CAAWwB,KAAA,CAAM,UAAApB,CAAA;QAAK,QAACA,CAAA,CAADiB,GAAJ;MAAA,IAIvC,QAAOlB,CAAA,IAAUA,CAAA,CAAQxD,IAAA,CAAK,MAAMyD,CAAA,EAAGN,CAAA,EAAGC,CAAA;MAM3C,IAAIlE,CAAA,IAAe;MAUnB,OATAmE,CAAA,CAAWyB,OAAA,CAAQ,UAAArB,CAAA;QAClB,IAAIA,CAAA,CAAAiB,GAAA,EAAqB;UACxB,IAAMvB,CAAA,GAAeM,CAAA,CAAAa,EAAA,CAAgB;UACrCb,CAAA,CAAQa,EAAA,GAAUb,CAAA,CAClBiB,GAAA,EAAAjB,CAAA,CAAAiB,GAAA,QAAsB,GAClBvB,CAAA,KAAiBM,CAAA,CAAQa,EAAA,CAAQ,OAAIpF,CAAA,IAAe,EACxD;QAAA;MACD,OAEMA,CAAA,IAAgBoE,CAAA,CAASU,GAAA,CAAY5C,KAAA,KAAUqC,CAAA,OACnDD,CAAA,IACCA,CAAA,CAAQxD,IAAA,CAAK,MAAMyD,CAAA,EAAGN,CAAA,EAAGC,CAAA,EAG7B;IAAA;IA9DDA,CAAA,CAAiBC,CAAA,IAAmB;IACpC,IAAIG,CAAA,GAAUJ,CAAA,CAAiB2B,qBAAA;MACzB9H,CAAA,GAAUmG,CAAA,CAAiB4B,mBAAA;IAKjC5B,CAAA,CAAiB4B,mBAAA,GAAsB,UAAUvB,CAAA,EAAGN,CAAA,EAAGC,CAAA;MACtD,IAAI,KAAa6B,GAAA;QAChB,IAAI5B,CAAA,GAAMG,CAAA;QAEVA,CAAA,QAAU,GACVD,CAAA,CAAgBE,CAAA,EAAGN,CAAA,EAAGC,CAAA,GACtBI,CAAA,GAAUH,CACV;MAAA;MAEGpG,CAAA,IAASA,CAAA,CAAQ+C,IAAA,CAAK,MAAMyD,CAAA,EAAGN,CAAA,EAAGC,CAAA,CACtC;IAAA,GA+CDA,CAAA,CAAiB2B,qBAAA,GAAwBxB,CACzC;EAAA;EAGF,OAAOD,CAAA,CAAAoB,GAAA,IAAwBpB,CAAA,CAAxBgB,EACP;AAAA;AAMe,SAAAY,EAAU7B,CAAA,EAAUnE,CAAA;EAEnC,IAAMoE,CAAA,GAAQa,CAAA,CAAahB,CAAA,IAAgB;EAAA,CACtCM,8CAAA,CAAD0B,GAAA,IAAyBC,CAAA,CAAY9B,CAAA,CAADe,GAAA,EAAcnF,CAAA,MACrDoE,CAAA,CAAKgB,EAAA,GAAUjB,CAAA,EACfC,CAAA,CAAMpE,CAAA,GAAeA,CAAA,EAErBkE,CAAA,CAAAiB,GAAA,CAAAD,GAAA,CAAyC7E,IAAA,CAAK+D,CAAA,EAE/C;AAAA;AAMe,SAAA+B,EAAgBhC,CAAA,EAAUnE,CAAA;EAEzC,IAAMoE,CAAA,GAAQa,CAAA,CAAahB,CAAA,IAAgB;EAAA,CACtCM,8CAAA,CAAA0B,GAAA,IAAwBC,CAAA,CAAY9B,CAAA,CAADe,GAAA,EAAcnF,CAAA,MACrDoE,CAAA,CAAKgB,EAAA,GAAUjB,CAAA,EACfC,CAAA,CAAMpE,CAAA,GAAeA,CAAA,EAErBkE,CAAA,CAAgBgB,GAAA,CAAkB7E,IAAA,CAAK+D,CAAA,EAExC;AAAA;AAEe,SAAAgC,EAAO7B,CAAA;EAEtB,OADAH,CAAA,GAAc,GACPiC,CAAA,CAAQ;IAAO;MAAEC,OAAA,EAAS/B;IAAA,CAAlB;EAAA,GAAmC,GAClD;AAAA;AAOM,SAASgC,EAAoBhC,CAAA,EAAKN,CAAA,EAAcC,CAAA;EACtDE,CAAA,GAAc,GACd+B,CAAA,CACC;IACC,OAAkB,qBAAP5B,CAAA,IACVA,CAAA,CAAIN,CAAA,KACG;MAAA,OAAMM,CAAA,CAAI,KAAV;IAAA,KACGA,CAAA,IACVA,CAAA,CAAI+B,OAAA,GAAUrC,CAAA,IACA;MAAA,OAAAM,CAAA,CAAI+B,OAAA,GAAU,IAArB;IAAA,UAFG,CAIX;EAAA,GACO,QAARpC,CAAA,GAAeA,CAAA,GAAOA,CAAA,CAAKsC,MAAA,CAAOjC,CAAA,EAEnC;AAAA;AAAA,SAMe8B,EAAQ9B,CAAA,EAASL,CAAA;EAEhC,IAAMC,CAAA,GAAQc,CAAA,CAAahB,CAAA,IAAgB;EAC3C,OAAIiC,CAAA,CAAY/B,CAAA,CAAagB,GAAA,EAAAjB,CAAA,KAC5BC,CAAA,CAAKkB,GAAA,GAAiBd,CAAA,IACtBJ,CAAA,CAAMnE,CAAA,GAAekE,CAAA,EACrBC,CAAA,CAAAe,GAAA,GAAiBX,CAAA,EACVJ,CAAA,CAAPkB,GAAA,IAGMlB,CAAA,CAAPiB,EACA;AAAA;AAAA,SAMeqB,EAAYlC,CAAA,EAAUN,CAAA;EAErC,OADAG,CAAA,GAAc,GACPiC,CAAA,CAAQ;IAAA,OAAM9B,CAAN;EAAA,GAAgBN,CAAA,CAC/B;AAAA;AAKM,SAASyC,EAAWnC,CAAA;EAC1B,IAAMJ,CAAA,GAAWD,CAAA,CAAiByC,OAAA,CAAQpC,CAAA,CAAzBO,GAAA;IAKX9E,CAAA,GAAQiF,CAAA,CAAahB,CAAA,IAAgB;EAK3C,OADAjE,CAAA,CAAKsE,CAAA,GAAYC,CAAA,EACZJ,CAAA,IAEe,QAAhBnE,CAAA,CAAKoF,EAAA,KACRpF,CAAA,CAAKoF,EAAA,IAAU,GACfjB,CAAA,CAASyC,GAAA,CAAI1C,CAAA,IAEPC,CAAA,CAASjC,KAAA,CAAM3D,KAAA,IANAgG,CAAA,CAEtBa,EAKA;AAAA;AAMe,SAAAyB,EAAc5C,CAAA,EAAOC,CAAA;EAChCK,8CAAA,CAAQuC,aAAA,IACXvC,8CAAA,CAAQuC,aAAA,CAAc5C,CAAA,GAAYA,CAAA,CAAUD,CAAA,IAASA,CAAA,CAEtD;AAAA;AAKM,SAAS8C,EAAiBxC,CAAA;EAEhC,IAAMJ,CAAA,GAAQc,CAAA,CAAahB,CAAA,IAAgB;IACrCjE,CAAA,GAAWrE,CAAA;EAQjB,OAPAwI,CAAA,CAAKiB,EAAA,GAAUb,CAAA,EACVL,CAAA,CAAiB8C,iBAAA,KACrB9C,CAAA,CAAiB8C,iBAAA,GAAoB,UAACzC,CAAA,EAAKN,CAAA;IACtCE,CAAA,CAAciB,EAAA,IAAAjB,CAAA,CAAAiB,EAAA,CAAab,CAAA,EAAKN,CAAA,GACpCjE,CAAA,CAAS,GAAGuE,CAAA,CACZ;EAAA,IAEK,CACNvE,CAAA,CAAS,IACT;IACCA,CAAA,CAAS,QAAG,EACZ;EAAA,EAEF;AAAA;AAEM,SAASiH,EAAA;EACf,IAAM1C,CAAA,GAAQU,CAAA,CAAahB,CAAA,IAAgB;EAC3C,KAAKM,CAAA,CAADa,EAAA,EAAe;IAIlB,KADA,IAAIjB,CAAA,GAAOD,CAAA,CAAXgD,GAAA,EACgB,SAAT/C,CAAA,KAAkBA,CAAA,CAADgD,GAAA,IAAgC,SAAjBhD,CAAA,CAAAiB,EAAA,GACtCjB,CAAA,GAAOA,CAAA,CACPiB,EAAA;IAED,IAAIpF,CAAA,GAAOmE,CAAA,CAAAgD,GAAA,KAAehD,CAAA,CAAIgD,GAAA,GAAS,CAAC,GAAG;IAC3C5C,CAAA,CAAKa,EAAA,GAAU,MAAMpF,CAAA,CAAK,KAAK,MAAMA,CAAA,CAAK,IAC1C;EAAA;EAED,OAAOuE,CAAA,CAAPa,EACA;AAAA;AAID,SAASgC,EAAA;EAER,KADA,IAAInD,CAAA,EACIA,CAAA,GAAYI,CAAA,CAAkBgD,KAAA,KACrC,IAAKpD,CAAA,CAAwBqD,GAAA,IAACrD,CAAA,CAA9BkB,GAAA,EACA;IACClB,CAAA,CAAAkB,GAAA,CAAAD,GAAA,CAAkCU,OAAA,CAAQ2B,CAAA,GAC1CtD,CAAA,CAASkB,GAAA,CAAAD,GAAA,CAAyBU,OAAA,CAAQ4B,CAAA,GAC1CvD,CAAA,CAASkB,GAAA,CAAAD,GAAA,GAA2B,EAIpC;EAAA,CAHC,QAAOhB,CAAA;IACRD,CAAA,CAAAkB,GAAA,CAAAD,GAAA,GAAoC,IACpCX,8CAAA,CAAOwB,GAAA,CAAa7B,CAAA,EAAGD,CAAA,CACvBiD,GAAA;EAAA;AAEF;AA9YD3C,8CAAA,CAAOC,GAAA,GAAS,UAAAD,CAAA;EACfL,CAAA,GAAmB,MACfnG,CAAA,IAAeA,CAAA,CAAcwG,CAAA,CACjC;AAAA,GAEDA,8CAAA,CAAAG,GAAA,GAAkB,UAAAH,CAAA;EACbE,CAAA,IAAiBA,CAAA,CAAgBF,CAAA,GAGrCN,CAAA,GAAe;EAEf,IAAMjE,CAAA,IAHNkE,CAAA,GAAmBK,CAAA,CAAnBO,GAAA,EAGWK,GAAA;EACPnF,CAAA,KACCmE,CAAA,KAAsBD,CAAA,IACzBlE,CAAA,CAAAkF,GAAA,GAAwB,IACxBhB,CAAA,CAAAgB,GAAA,GAAoC,IACpClF,CAAA,CAAAoF,EAAA,CAAYQ,OAAA,CAAQ,UAAArB,CAAA;IACfA,CAAA,CAAJiB,GAAA,KACCjB,CAAA,CAAAa,EAAA,GAAkBb,CAAA,CAAlBiB,GAAA,GAEDjB,CAAA,CAAAc,GAAA,GAAyBf,CAAA,EACzBC,CAAA,CAAAiB,GAAA,GAAsBjB,CAAA,CAASvE,CAAA,QAAe,CAC9C;EAAA,OAEDA,CAAA,CAAKkF,GAAA,CAAiBU,OAAA,CAAQ2B,CAAA,GAC9BvH,CAAA,CAAAkF,GAAA,CAAsBU,OAAA,CAAQ4B,CAAA,GAC9BxH,CAAA,CAAAkF,GAAA,GAAwB,IACxBjB,CAAA,GAAe,KAGjBE,CAAA,GAAoBD,CACpB;AAAA,GAEDK,8CAAA,CAAQK,MAAA,GAAS,UAAAX,CAAA;EACZU,CAAA,IAAcA,CAAA,CAAaV,CAAA;EAE/B,IAAMG,CAAA,GAAIH,CAAA,CAAHa,GAAA;EACHV,CAAA,IAAKA,CAAA,CAATe,GAAA,KACKf,CAAA,CAACe,GAAA,CAAyBD,GAAA,CAAA7F,MAAA,KA4YR,MA5Y2BgF,CAAA,CAAkBhE,IAAA,CAAK+D,CAAA,KA4Y7CpE,CAAA,KAAYuE,8CAAA,CAAQkD,qBAAA,MAC/CzH,CAAA,GAAUuE,8CAAA,CAAQkD,qBAAA,KACNC,CAAA,EAAgBN,CAAA,IA7Y5BhD,CAAA,CAACe,GAAA,CAAAC,EAAA,CAAeQ,OAAA,CAAQ,UAAArB,CAAA;IACnBA,CAAA,CAASvE,CAAA,KACZuE,CAAA,CAAAY,GAAA,GAAiBZ,CAAA,CAASvE,CAAA,GAEvBuE,CAAA,CAAAc,GAAA,KAA2Bf,CAAA,KAC9BC,CAAA,CAAQa,EAAA,GAAUb,CAAA,CAAlBc,GAAA,GAEDd,CAAA,CAASvE,CAAA,QAAe,GACxBuE,CAAA,CAAQc,GAAA,GAAiBf,CACzB;EAAA,KAEFH,CAAA,GAAoBD,CAAA,GAAmB,IACvC;AAAA,GAEDK,8CAAA,CAAAO,GAAA,GAAkB,UAACb,CAAA,EAAOC,CAAA;EACzBA,CAAA,CAAYyD,IAAA,CAAK,UAAA1D,CAAA;IAChB;MACCA,CAAA,CAASiB,GAAA,CAAkBU,OAAA,CAAQ2B,CAAA,GACnCtD,CAAA,CAAAiB,GAAA,GAA6BjB,CAAA,CAAAiB,GAAA,CAA2BQ,MAAA,CAAO,UAAAnB,CAAA;QAAE,QAChEA,CAAA,CAAAa,EAAA,IAAYoC,CAAA,CAAajD,CAAA,CADuC;MAAA,EASjE;IAAA,CANC,QAAOJ,CAAA;MACRD,CAAA,CAAYyD,IAAA,CAAK,UAAApD,CAAA;QACZA,CAAA,CAAoBW,GAAA,KAAAX,CAAA,CAAAW,GAAA,GAAqB,GAC7C;MAAA,IACDhB,CAAA,GAAc,IACdK,8CAAA,CAAOwB,GAAA,CAAa5B,CAAA,EAAGF,CAAA,CACvBiD,GAAA;IAAA;EACD,IAEGrC,CAAA,IAAWA,CAAA,CAAUZ,CAAA,EAAOC,CAAA,CAChC;AAAA,GAEDK,8CAAA,CAAQS,OAAA,GAAU,UAAAf,CAAA;EACbc,CAAA,IAAkBA,CAAA,CAAiBd,CAAA;EAEvC,IAEKC,CAAA;IAFCC,CAAA,GAAIF,CAAA,CAAVa,GAAA;EACIX,CAAA,IAAKA,CAAA,CAATgB,GAAA,KAEChB,CAAA,CAACgB,GAAA,CAAeC,EAAA,CAAAQ,OAAA,CAAQ,UAAArB,CAAA;IACvB;MACCgD,CAAA,CAAchD,CAAA,CAGd;IAAA,CAFC,QAAOA,CAAA;MACRL,CAAA,GAAaK,CACb;IAAA;EACD,IACDJ,CAAA,CAACgB,GAAA,QAAW,GACRjB,CAAA,IAAYK,8CAAA,CAAAwB,GAAA,CAAoB7B,CAAA,EAAYC,CAAA,CAAhC+C,GAAA,EAEjB;AAAA;AAwTD,IAAIU,CAAA,GAA0C,qBAAzBH,qBAAA;AAYrB,SAASC,EAAenD,CAAA;EACvB,IAOIN,CAAA;IAPEC,CAAA,GAAO,SAAPA,EAAA,EAAO;MACZ2D,YAAA,CAAa1D,CAAA,GACTyD,CAAA,IAASE,oBAAA,CAAqB7D,CAAA,GAClC8D,UAAA,CAAWxD,CAAA,CACX;IAAA;IACKJ,CAAA,GAAU4D,UAAA,CAAW7D,CAAA,EAraR;EAwaf0D,CAAA,KACH3D,CAAA,GAAMwD,qBAAA,CAAsBvD,CAAA,EAE7B;AAAA;AAmBD,SAASqD,EAAchD,CAAA;EAGtB,IAAMN,CAAA,GAAOC,CAAA;IACTC,CAAA,GAAUI,CAAA,CAAdO,GAAA;EACsB,qBAAXX,CAAA,KACVI,CAAA,CAAAO,GAAA,QAAgB,GAChBX,CAAA,KAGDD,CAAA,GAAmBD,CACnB;AAAA;AAMD,SAASuD,EAAajD,CAAA;EAGrB,IAAMN,CAAA,GAAOC,CAAA;EACbK,CAAA,CAAAO,GAAA,GAAgBP,CAAA,CAAIa,EAAA,IACpBlB,CAAA,GAAmBD,CACnB;AAAA;AAMD,SAASiC,EAAY3B,CAAA,EAASN,CAAA;EAC7B,QACEM,CAAA,IACDA,CAAA,CAAQlF,MAAA,KAAW4E,CAAA,CAAQ5E,MAAA,IAC3B4E,CAAA,CAAQ0D,IAAA,CAAK,UAAC1D,CAAA,EAAKC,CAAA;IAAU,OAAAD,CAAA,KAAQM,CAAA,CAAQL,CAAA,CAAhC;EAAA,EAEd;AAAA;AAED,SAASqB,EAAehB,CAAA,EAAKN,CAAA;EAC5B,OAAmB,qBAALA,CAAA,GAAkBA,CAAA,CAAEM,CAAA,IAAON,CACzC;AAAA;;;;;;;;;;;;;AC9fD;;;;;;;ACCA,IAAM+D,OAAK,GAAG,EAAE;AAEhB,SAAgBC,uBAAMA,CAACC,GAAG,EAAEhG,KAAK,EAAE;;EAElC,KAAK,IAAIlC,CAAC,IAAIkC,KAAK,EAAE;IACpBgG,GAAG,CAAClI,CAAC,CAAC,GAAGkC,KAAK,CAAClC,CAAC,CAAC;;EAElB,OAAOkI,GAAG;;AAGX,SAAgBC,IAAIA,CAACC,GAAG,EAAEC,KAAK,EAAEC,IAAI,EAAE;EACtC,IAAIC,GAAG,GAAG,uBAAuB;IAChCjE,CAAC,GAAG8D,GAAG,CAACI,KAAK,CAACD,GAAG,CAAC;IAClBE,OAAO,GAAG,EAAE;IACZC,GAAG;EACJ,IAAIpE,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC,EAAE;IACd,IAAI0B,CAAC,GAAG1B,CAAC,CAAC,CAAC,CAAC,CAACqE,KAAK,CAAC,GAAG,CAAC;IACvB,KAAK,IAAI3I,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACgG,CAAC,CAAC3G,MAAM,EAAEW,CAAC,EAAE,EAAE;MAC9B,IAAIkE,CAAC,GAAG8B,CAAC,CAAChG,CAAC,CAAC,CAAC2I,KAAK,CAAC,GAAG,CAAC;MACvBF,OAAO,CAACG,kBAAkB,CAAC1E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG0E,kBAAkB,CAAC1E,CAAC,CAAC2E,KAAK,CAAC,CAAC,CAAC,CAAC9H,IAAI,CAAC,GAAG,CAAC,CAAC;;;EAG9EqH,GAAG,GAAGU,UAAU,CAACV,GAAG,CAACW,OAAO,CAACR,GAAG,EAAE,EAAE,CAAC,CAAC;EACtCF,KAAK,GAAGS,UAAU,CAACT,KAAK,IAAI,EAAE,CAAC;EAC/B,IAAIW,GAAG,GAAGC,IAAI,CAACD,GAAG,CAACZ,GAAG,CAAC/I,MAAM,EAAEgJ,KAAK,CAAChJ,MAAM,CAAC;EAC5C,KAAK,IAAI6J,GAAC,GAAC,CAAC,EAAEA,GAAC,GAACF,GAAG,EAAEE,GAAC,EAAE,EAAE;IACzB,IAAIb,KAAK,CAACa,GAAC,CAAC,IAAIb,KAAK,CAACa,GAAC,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,KAAG,GAAG,EAAE;MACzC,IAAIC,KAAK,GAAGf,KAAK,CAACa,GAAC,CAAC,CAACH,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC;QAChDM,KAAK,GAAG,CAAChB,KAAK,CAACa,GAAC,CAAC,CAACV,KAAK,CAAC,SAAS,CAAC,IAAIR,OAAK,EAAE,CAAC,CAAC,IAAI,EAAE;QACrDsB,IAAI,GAAG,CAACD,KAAK,CAACE,OAAO,CAAC,GAAG,CAAC;QAC1BC,IAAI,GAAG,CAACH,KAAK,CAACE,OAAO,CAAC,GAAG,CAAC;QAC1BE,GAAG,GAAGrB,GAAG,CAACc,GAAC,CAAC,IAAI,EAAE;MACnB,IAAI,CAACO,GAAG,IAAI,CAACD,IAAI,KAAKH,KAAK,CAACE,OAAO,CAAC,GAAG,CAAC,GAAC,CAAC,IAAID,IAAI,CAAC,EAAE;QACpDZ,GAAG,GAAG,KAAK;QACX;;MAEDD,OAAO,CAACW,KAAK,CAAC,GAAGR,kBAAkB,CAACa,GAAG,CAAC;MACxC,IAAIH,IAAI,IAAIE,IAAI,EAAE;QACjBf,OAAO,CAACW,KAAK,CAAC,GAAGhB,GAAG,CAACS,KAAK,CAACK,GAAC,CAAC,CAAC1J,GAAG,CAACoJ,kBAAkB,CAAC,CAAC7H,IAAI,CAAC,GAAG,CAAC;QAC/D;;KAED,MACI,IAAIsH,KAAK,CAACa,GAAC,CAAC,KAAGd,GAAG,CAACc,GAAC,CAAC,EAAE;MAC3BR,GAAG,GAAG,KAAK;MACX;;;EAGF,IAAIJ,IAAI,CAACpH,OAAO,KAAG,IAAI,IAAIwH,GAAG,KAAG,KAAK,EAAE;IAAA,OAAO,KAAK;EAAC;EACrD,OAAOD,OAAO;;AAGf,SAAgBiB,YAAYA,CAACjF,CAAC,EAAE2C,CAAC,EAAE;EAClC,OACE3C,CAAC,CAACkF,IAAI,GAAGvC,CAAC,CAACuC,IAAI,GAAI,CAAC,GACnBlF,CAAC,CAACkF,IAAI,GAAGvC,CAAC,CAACuC,IAAI,GAAI,CAAC,CAAC,GACpBlF,CAAC,CAACmF,KAAK,GAAGxC,CAAC,CAACwC,KAAM;;;;AAKvB,SAAgBC,sBAAsBA,CAACC,KAAK,EAAEF,KAAK,EAAE;EACpDE,KAAK,CAACF,KAAK,GAAGA,KAAK;EACnBE,KAAK,CAACH,IAAI,GAAGI,SAAS,CAACD,KAAK,CAAC;EAC7B,OAAOA,KAAK,CAAC5H,KAAK;;AAGnB,SAAgB4G,UAAUA,CAACV,GAAG,EAAE;EAC/B,OAAOA,GAAG,CAACW,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAACJ,KAAK,CAAC,GAAG,CAAC;;AAGlD,SAAgBqB,WAAWA,CAACC,OAAO,EAAE;EACpC,OAAOA,OAAO,CAACd,MAAM,CAAC,CAAC,CAAC,IAAE,GAAG,GAAI,CAAC,GAAG,KAAK,CAACI,OAAO,CAACU,OAAO,CAACd,MAAM,CAACc,OAAO,CAAC5K,MAAM,GAAC,CAAC,CAAC,CAAC,IAAK,CAAC,GAAG,CAAC;;AAG/F,SAAgBsK,IAAIA,CAACO,IAAI,EAAE;EAC1B,OAAOpB,UAAU,CAACoB,IAAI,CAAC,CAAC1K,GAAG,CAACwK,WAAW,CAAC,CAACjJ,IAAI,CAAC,EAAE,CAAC;;AAGlD,SAASgJ,SAASA,CAACD,KAAK,EAAE;EACzB,OAAOA,KAAK,CAAC5H,KAAK,CAAChB,OAAO,GAAG,CAAC,GAAGyI,IAAI,CAACG,KAAK,CAAC5H,KAAK,CAACgI,IAAI,CAAC;;AC7ExD,IAAIC,aAAa,GAAG,IAAI;AAExB,IAAMC,OAAO,GAAG,EAAE;AAElB,IAAMC,WAAW,GAAG,EAAE;AAEtB,IAAMC,KAAK,GAAG,EAAE;AAEhB,SAASC,MAAMA,CAACnC,GAAG,EAAEhK,IAAW,EAAE;2BAAT,GAAC,MAAM;EAC/B,IAAI+L,aAAa,IAAIA,aAAa,CAAC/L,IAAI,CAAC,EAAE;IACzC+L,aAAa,CAAC/L,IAAI,CAAC,CAACgK,GAAG,CAAC;GACxB,MACI,IAAI,OAAO9L,OAAO,KAAG,WAAW,IAAIA,OAAO,CAAC8B,IAAI,GAAC,OAAO,CAAC,EAAE;IAC/D9B,OAAO,CAAC8B,IAAI,GAAC,OAAO,CAAC,CAAC,IAAI,EAAE,IAAI,EAAEgK,GAAG,CAAC;;;AAKxC,SAASoC,aAAaA,CAAA,EAAG;EACxB,IAAIpC,GAAG;EACP,IAAI+B,aAAa,IAAIA,aAAa,CAAC9H,QAAQ,EAAE;IAC5C+F,GAAG,GAAG+B,aAAa,CAAC9H,QAAQ;GAC5B,MACI,IAAI8H,aAAa,IAAIA,aAAa,CAACM,kBAAkB,EAAE;IAC3DrC,GAAG,GAAG+B,aAAa,CAACM,kBAAkB,EAAE;GACxC,MACI;IACJrC,GAAG,GAAG,OAAO/F,QAAQ,KAAG,WAAW,GAAGA,QAAQ,GAAGiI,KAAK;;EAEvD,OAAO,EAAC,IAAElC,GAAG,CAACsC,QAAQ,IAAI,EAAE,KAAGtC,GAAG,CAACuC,MAAM,IAAI,EAAE;;AAKhD,SAAStC,KAAKA,CAACD,GAAG,EAAEW,OAAa,EAAE;iCAAR,GAAC,KAAK;EAChC,IAAI,OAAOX,GAAG,KAAG,QAAQ,IAAIA,GAAG,CAACA,GAAG,EAAE;IACrCW,OAAO,GAAGX,GAAG,CAACW,OAAO;IACrBX,GAAG,GAAGA,GAAG,CAACA,GAAG;;;;EAId,IAAIwC,yBAAQ,CAACxC,GAAG,CAAC,EAAE;IAClBmC,MAAM,CAACnC,GAAG,EAAEW,OAAO,GAAG,SAAS,GAAG,MAAM,CAAC;;EAG1C,OAAO8B,OAAO,CAACzC,GAAG,CAAC;;;;AAKpB,SAASwC,yBAAQA,CAACxC,GAAG,EAAE;EACtB,KAAK,IAAIpI,CAAC,GAACoK,OAAO,CAAC/K,MAAM,EAAEW,CAAC,EAAE,GAAI;IACjC,IAAIoK,OAAO,CAACpK,CAAC,CAAC,CAAC4K,QAAQ,CAACxC,GAAG,CAAC,EAAE;MAAA,OAAO,IAAI;IAAC;;EAE3C,OAAO,KAAK;;;;AAKb,SAASyC,OAAOA,CAACzC,GAAG,EAAE;EACrB,IAAI0C,QAAQ,GAAG,KAAK;EACpB,KAAK,IAAI9K,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACoK,OAAO,CAAC/K,MAAM,EAAEW,CAAC,EAAE,EAAE;IACpC,IAAIoK,OAAO,CAACpK,CAAC,CAAC,CAAC6K,OAAO,CAACzC,GAAG,CAAC,KAAG,IAAI,EAAE;MACnC0C,QAAQ,GAAG,IAAI;;;EAGjB,KAAK,IAAI5B,GAAC,GAACmB,WAAW,CAAChL,MAAM,EAAE6J,GAAC,EAAE,GAAI;IACrCmB,WAAW,CAACnB,GAAC,CAAC,CAACd,GAAG,CAAC;;EAEpB,OAAO0C,QAAQ;;AAIhB,SAASC,aAAaA,CAACtH,IAAI,EAAE;;EAE5B,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAACuH,YAAY,EAAE;IAAA;EAAO;EAExC,IAAIC,IAAI,GAAGxH,IAAI,CAACuH,YAAY,CAAC,MAAM,CAAC;IACnC1M,MAAM,GAAGmF,IAAI,CAACuH,YAAY,CAAC,QAAQ,CAAC;;;EAGrC,IAAI,CAACC,IAAI,IAAI,CAACA,IAAI,CAACzC,KAAK,CAAC,MAAM,CAAC,IAAKlK,MAAM,IAAI,CAACA,MAAM,CAACkK,KAAK,CAAC,WAAW,CAAE,EAAE;IAAA;EAAO;;;EAGnF,OAAOH,KAAK,CAAC4C,IAAI,CAAC;;AAInB,SAASC,eAAeA,CAACnN,CAAC,EAAE;EAC3B,IAAIA,CAAC,CAACoN,OAAO,IAAIpN,CAAC,CAACqN,OAAO,IAAIrN,CAAC,CAACsN,MAAM,IAAItN,CAAC,CAACuN,QAAQ,IAAIvN,CAAC,CAACwN,MAAM,KAAG,CAAC,EAAE;IAAA;EAAO;EAC7ER,aAAa,CAAChN,CAAC,CAACyN,aAAa,IAAIzN,CAAC,CAACO,MAAM,IAAI,IAAI,CAAC;EAClD,OAAOmN,OAAO,CAAC1N,CAAC,CAAC;;AAIlB,SAAS0N,OAAOA,CAAC1N,CAAC,EAAE;EACnB,IAAIA,CAAC,EAAE;IACN,IAAIA,CAAC,CAAC2N,wBAAwB,EAAE;MAAA3N,CAAC,CAAC2N,wBAAwB,EAAE;IAAC;IAC7D,IAAI3N,CAAC,CAAC4N,eAAe,EAAE;MAAA5N,CAAC,CAAC4N,eAAe,EAAE;IAAC;IAC3C5N,CAAC,CAACG,cAAc,EAAE;;EAEnB,OAAO,KAAK;;AAIb,SAAS0N,mBAAmBA,CAAC7N,CAAC,EAAE;;EAE/B,IAAIA,CAAC,CAACoN,OAAO,IAAIpN,CAAC,CAACqN,OAAO,IAAIrN,CAAC,CAACsN,MAAM,IAAItN,CAAC,CAACuN,QAAQ,IAAIvN,CAAC,CAACwN,MAAM,KAAG,CAAC,EAAE;IAAA;EAAO;EAE7E,IAAItH,CAAC,GAAGlG,CAAC,CAACO,MAAM;EAChB,GAAG;IACF,IAAIuN,MAAM,CAAC5H,CAAC,CAAC6H,QAAQ,CAAC,CAACC,WAAW,EAAE,KAAG,GAAG,IAAI9H,CAAC,CAAC+G,YAAY,CAAC,MAAM,CAAC,EAAE;MACrE,IAAI/G,CAAC,CAAC+H,YAAY,CAAC,QAAQ,CAAC,EAAE;QAAA;MAAO;;MAErC,IAAIjB,aAAa,CAAC9G,CAAC,CAAC,EAAE;QACrB,OAAOwH,OAAO,CAAC1N,CAAC,CAAC;;;GAGnB,QAASkG,CAAC,GAACA,CAAC,CAACgI,UAAU;;AAIzB,IAAIC,yBAAyB,GAAG,KAAK;AAErC,SAASC,kBAAkBA,CAAA,EAAG;EAC7B,IAAID,yBAAyB,EAAE;IAAA;EAAO;EAEtC,IAAI,OAAOE,gBAAgB,KAAG,UAAU,EAAE;IACzC,IAAI,CAACjC,aAAa,EAAE;MACnBiC,gBAAgB,CAAC,UAAU,EAAE,YAAG;QAC/BvB,OAAO,CAACL,aAAa,EAAE,CAAC;OACxB,CAAC;;IAEH4B,gBAAgB,CAAC,OAAO,EAAER,mBAAmB,CAAC;;EAE/CM,yBAAyB,GAAG,IAAI;;AAIjC,IAAMG,uBAAM,aAAAC,YAAA;EAAmB,SAAAD,MACnBA,CAACnK,KAAK,EAAE;IAClBoK,YAAK,CAAAxL,IAAA,CAAC,MAAAoB,KAAK,CAAC;IACZ,IAAIA,KAAK,CAAC5F,OAAO,EAAE;MAClB6N,aAAa,GAAGjI,KAAK,CAAC5F,OAAO;;IAG9B,IAAI,CAACiQ,KAAK,GAAG;MACZnE,GAAG,EAAElG,KAAK,CAACkG,GAAG,IAAIoC,aAAa;KAC/B;IAED2B,kBAAkB,EAAE;;;;;EAGrBE,MAAA,CAAAzL,SAAA,CAAAiF,qBAAqB,YAAAA,sBAAC3D,KAAK,EAAE;IAC5B,IAAIA,KAAK,CAACsK,MAAM,KAAG,IAAI,EAAE;MAAA,OAAO,IAAI;IAAC;IACrC,OAAOtK,KAAK,CAACkG,GAAG,KAAG,IAAI,CAAClG,KAAK,CAACkG,GAAG,IAAIlG,KAAK,CAACuK,QAAQ,KAAG,IAAI,CAACvK,KAAK,CAACuK,QAAQ;GACzE;;;EAGDJ,MAAA,CAAAzL,SAAA,CAAAgK,QAAQ,YAAAA,SAACxC,GAAG,EAAE;IACb,IAAMsE,QAAQ,GAAGC,wCAAY,CAAC,IAAI,CAACzK,KAAK,CAACwK,QAAQ,CAAC;IAClD,OAAO,IAAI,CAACE,mBAAmB,CAACF,QAAQ,EAAEtE,GAAG,EAAE,KAAK,CAAC,CAAC/I,MAAM,GAAG,CAAC;GAChE;;;EAGDgN,MAAA,CAAAzL,SAAA,CAAAiK,OAAO,YAAAA,QAACzC,GAAG,EAAE;IACZ,IAAI,CAAC3C,QAAQ,CAAC;MAAE2C,GAAA,EAAAA;IAAG,CAAE,CAAC;IAEtB,IAAM0C,QAAQ,GAAG,IAAI,CAACF,QAAQ,CAACxC,GAAG,CAAC;;;IAGnC,IAAI,CAAC,IAAI,CAACyE,QAAQ,EAAE;MAAA,IAAI,CAACC,WAAW,EAAE;IAAC;IAEvC,OAAOhC,QAAQ;GACf;EAEDuB,MAAA,CAAAzL,SAAA,CAAAmM,kBAAkB,YAAAA,mBAAA,EAAG;IACpB3C,OAAO,CAAC/J,IAAI,CAAC,IAAI,CAAC;IAClB,IAAI,CAACwM,QAAQ,GAAG,IAAI;GACpB;EAEDR,MAAA,CAAAzL,SAAA,CAAAoM,iBAAiB,YAAAA,kBAAA,EAAG;;IACnB,IAAI7C,aAAa,EAAE;MAClB,IAAI,CAAC8C,QAAQ,GAAG9C,aAAa,CAAC+C,MAAM,CAAC,UAAC7K,QAAQ,EAAE;QAC/C8K,MAAI,CAACtC,OAAO,CAAC,EAAC,IAAExI,QAAQ,CAACqI,QAAQ,IAAI,EAAE,KAAGrI,QAAQ,CAACsI,MAAM,IAAI,EAAE,EAAG;OAClE,CAAC;;IAEH,IAAI,CAACkC,QAAQ,GAAG,KAAK;GACrB;EAEDR,MAAA,CAAAzL,SAAA,CAAAwM,oBAAoB,YAAAA,qBAAA,EAAG;IACtB,IAAI,OAAO,IAAI,CAACH,QAAQ,KAAG,UAAU,EAAE;MAAA,IAAI,CAACA,QAAQ,EAAE;IAAC;IACvD7C,OAAO,CAACiD,MAAM,CAACjD,OAAO,CAACb,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GACxC;EAED8C,MAAA,CAAAzL,SAAA,CAAAkF,mBAAmB,YAAAA,oBAAA,EAAG;IACrB,IAAI,CAAC+G,QAAQ,GAAG,IAAI;GACpB;EAEDR,MAAA,CAAAzL,SAAA,CAAA0M,kBAAkB,YAAAA,mBAAA,EAAG;IACpB,IAAI,CAACT,QAAQ,GAAG,KAAK;GACrB;EAEDR,MAAA,CAAAzL,SAAA,CAAAgM,mBAAmB,YAAAA,oBAACF,QAAQ,EAAEtE,GAAG,EAAEmF,MAAM,EAAE;IAC1C,OAAOb,QAAQ,CACbhH,MAAM,CAACmE,sBAAsB,CAAC,CAC9B2D,IAAI,CAAC9D,YAAY,CAAC,CAClBlK,GAAG,CAAE,UAAAsK,KAAK,EAAC;MACX,IAAIrB,OAAO,GAAGN,IAAI,CAACC,GAAG,EAAE0B,KAAK,CAAC5H,KAAK,CAACgI,IAAI,EAAEJ,KAAK,CAAC5H,KAAK,CAAC;MACtD,IAAIuG,OAAO,EAAE;QACZ,IAAI8E,MAAM,KAAK,KAAK,EAAE;UACrB,IAAIE,QAAQ,GAAG;YAAErF,GAAA,EAAAA,GAAG;YAAEK,OAAA,EAAAA;UAAO,CAAE;UAC/BR,uBAAM,CAACwF,QAAQ,EAAEhF,OAAO,CAAC;UACzB,OAAOgF,QAAQ,CAACC,GAAG;UACnB,OAAOD,QAAQ,CAAC/N,GAAG;UACnB,OAAOiO,wCAAY,CAAC7D,KAAK,EAAE2D,QAAQ,CAAC;;QAErC,OAAO3D,KAAK;;KAEb,CAAC,CAACpE,MAAM,CAACkI,OAAO,CAAC;GACnB;EAEDvB,MAAA,CAAAzL,SAAA,CAAAiN,MAAM,YAAAA,OAACH,GAAA,EAAwBI,KAAA,EAAS;QAA/BpB,QAAQ,GAAAgB,GAAA,CAAAhB,QAAA;QAAED,QAAQ,GAAAiB,GAAA,CAAAjB,QAAA;QAAMrE,GAAG,GAAA0F,KAAA,CAAA1F,GAAA;IACnC,IAAI2F,MAAM,GAAG,IAAI,CAACnB,mBAAmB,CAACD,wCAAY,CAACD,QAAQ,CAAC,EAAEtE,GAAG,EAAE,IAAI,CAAC;IAExE,IAAI9B,OAAO,GAAGyH,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI;IAE/B,IAAIC,QAAQ,GAAG,IAAI,CAACC,WAAW;IAC/B,IAAI7F,GAAG,KAAG4F,QAAQ,EAAE;MACnB,IAAI,CAACC,WAAW,GAAG7F,GAAG;MACtB,IAAI,OAAOqE,QAAQ,KAAG,UAAU,EAAE;QACjCA,QAAQ,CAAC;UACRyB,MAAM,EAAE,IAAI;UACZ9F,GAAA,EAAAA,GAAG;UACH4F,QAAA,EAAAA,QAAQ;UACRD,MAAA,EAAAA,MAAM;UACNzH,OAAA,EAAAA;SACA,CAAC;;;IAIJ,OAAOA,OAAO;GACd;;EAvGmB6H,6BAwGpB;AAED,IAAMC,qBAAI,GAAG,SAAPA,IAAIA,CAAIlM,KAAK,EAAE;EAAA,OACpBmM,yCAAa,CAAC,GAAG,EAAEpG,uBAAM,CAAC;IAAElJ,OAAO,EAAEmM;EAAe,CAAE,EAAEhJ,KAAK,CAAC,CAAC;CAC/D;AAED,IAAMoM,sBAAK,GAAG,SAARA,KAAKA,CAAGpM,KAAK,EAAC;EAAA,OAAGmM,yCAAa,CAACnM,KAAK,CAACqM,SAAS,EAAErM,KAAK,CAAC;AAAA;AAE5DmK,uBAAM,CAAChC,WAAW,GAAGA,WAAW;AAChCgC,uBAAM,CAAC7B,aAAa,GAAGA,aAAa;AACpC6B,uBAAM,CAAChE,KAAK,GAAGA,KAAK;AACpBgE,uBAAM,CAACA,MAAM,GAAGA,uBAAM;AACtBA,uBAAM,CAACiC,KAAK,GAAGA,sBAAK;AACpBjC,uBAAM,CAAC+B,IAAI,GAAGA,qBAAI;AAClB/B,uBAAM,CAAClE,IAAI,GAAGA,IAAI;;;;;;;;;;;;;;;;ACpQS;AACY;AAET;;AAE9B;AACkC;AACE;AACF;AAElC,IAAMqG,OAAG,GAAG,SAANA,GAAGA,CAAA;EAAA,OACP7S,6BAAA;IAAKc,EAAE,EAAC;EAAK,GACXd,6BAAA,CAAC8S,yBAAM,MAAE,CAAC,EACV9S,6BAAA,eACEA,6BAAA,CAAC0Q,uBAAM,QACL1Q,6BAAA,CAACD,uBAAI;IAACwO,IAAI,EAAC;EAAG,CAAE,CAAC,EACjBvO,6BAAA,CAAC+S,wBAAK;IAACxE,IAAI,EAAC;EAAQ,CAAE,CAAC,EACvBvO,6BAAA,CAACgT,uBAAI;IAACzE,IAAI,EAAC;EAAO,CAAE,CACd,CACJ,CACH,CAAC;AAAA,CACP;AAEcsE,+CAAG,E;;ACvBD;AACkB;AAEpBA,8EAAG,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIF,SAAA5G,EAAOrD,CAAA,EAAKN,CAAA;EAC3B,KAAK,IAAIlG,CAAA,IAAKkG,CAAA,EAAOM,CAAA,CAAIxG,CAAA,IAAKkG,CAAA,CAAMlG,CAAA;EACpC,OAA6BwG,CAC7B;AAAA;AAQe,SAAAqK,EAAerK,CAAA,EAAGN,CAAA;EACjC,KAAK,IAAIlG,CAAA,IAAKwG,CAAA,EAAG,IAAU,eAANxG,CAAA,MAAsBA,CAAA,IAAKkG,CAAA,GAAI,QAAO;EAC3D,KAAK,IAAIC,CAAA,IAAKD,CAAA,EAAG,IAAU,eAANC,CAAA,IAAoBK,CAAA,CAAEL,CAAA,MAAOD,CAAA,CAAEC,CAAA,GAAI,QAAxD;EACA,QAAO,CACP;AAAA;AAaM,SAAS2K,EAAGtK,CAAA,EAAGN,CAAA;EACrB,OAAQM,CAAA,KAAMN,CAAA,KAAY,MAANM,CAAA,IAAW,IAAIA,CAAA,IAAM,IAAIN,CAAA,KAAQM,CAAA,IAAMA,CAAA,IAAKN,CAAA,IAAMA,CACtE;AAAA;AC/Be,SAAAuD,EAAcjD,CAAA;EAC7B,KAAKrC,KAAA,GAAQqC,CACb;AAAA;ACEM,SAASsC,EAAKtC,CAAA,EAAGxG,CAAA;EACvB,SAASmG,EAAaK,CAAA;IACrB,IAAIN,CAAA,GAAM,KAAK/B,KAAA,CAAMwL,GAAA;MACjBxJ,CAAA,GAAYD,CAAA,IAAOM,CAAA,CAAUmJ,GAAA;IAKjC,QAJKxJ,CAAA,IAAaD,CAAA,KACjBA,CAAA,CAAInD,IAAA,GAAOmD,CAAA,CAAI,QAASA,CAAA,CAAIqC,OAAA,GAAU,OAGlCvI,CAAA,IAIGA,CAAA,CAAS,KAAKmE,KAAA,EAAOqC,CAAA,MAAeL,CAAA,GAHpC0K,CAAA,CAAe,KAAK1M,KAAA,EAAOqC,CAAA,CAInC;EAAA;EAED,SAASJ,EAAOpG,CAAA;IAEf,OADA,KAAK8H,qBAAA,GAAwB3B,CAAA,EACtBD,yCAAA,CAAcM,CAAA,EAAGxG,CAAA,CACxB;EAAA;EAID,OAHAoG,CAAA,CAAO2K,WAAA,GAAc,WAAWvK,CAAA,CAAEuK,WAAA,IAAevK,CAAA,CAAE3F,IAAA,IAAQ,KAC3DuF,CAAA,CAAOvD,SAAA,CAAUmO,gBAAA,IAAmB,GACpC5K,CAAA,CAAA6K,GAAA,IAAoB,GACb7K,CACP;AAAA;AAAA,CDxBDqD,CAAA,CAAc5G,SAAA,GAAY,IAAI2D,6BAAA,IAEN0K,oBAAA,IAAuB,GAC/CzH,CAAA,CAAc5G,SAAA,CAAUiF,qBAAA,GAAwB,UAAUtB,CAAA,EAAON,CAAA;EAChE,OAAO2K,CAAA,CAAe,KAAK1M,KAAA,EAAOqC,CAAA,KAAUqK,CAAA,CAAe,KAAKrC,KAAA,EAAOtI,CAAA,CACvE;AAAA;AEXD,IAAIiL,CAAA,GAAcnR,2BAAA,CAAlByG,GAAA;AACAzG,2BAAA,CAAAyG,GAAA,GAAgB,UAAAD,CAAA;EACXA,CAAA,CAAMnG,IAAA,IAAQmG,CAAA,CAAMnG,IAAA,CAApB4Q,GAAA,IAAuCzK,CAAA,CAAMmJ,GAAA,KAChDnJ,CAAA,CAAMrC,KAAA,CAAMwL,GAAA,GAAMnJ,CAAA,CAAMmJ,GAAA,EACxBnJ,CAAA,CAAMmJ,GAAA,GAAM,OAETwB,CAAA,IAAaA,CAAA,CAAY3K,CAAA,CAC7B;AAAA;AAEY,IAAA4K,CAAA,GACM,sBAAVC,MAAA,IACPA,MAAA,CAAOC,GAAA,IACPD,MAAA,CAAOC,GAAA,CAAI,wBACZ;AAAA,SASe9H,EAAWhD,CAAA;EAC1B,SAASN,EAAUA,CAAA;IAClB,IAAIlG,CAAA,GAAQ6J,CAAA,CAAO,CAAD,GAAK3D,CAAA;IAEvB,cADOlG,CAAA,CAAM2P,GAAA,EACNnJ,CAAA,CAAGxG,CAAA,EAAOkG,CAAA,CAAMyJ,GAAA,IAAO,KAC9B;EAAA;EAYD,OATAzJ,CAAA,CAAUqL,QAAA,GAAWH,CAAA,EAKrBlL,CAAA,CAAU4J,MAAA,GAAS5J,CAAA,EAEnBA,CAAA,CAAUrD,SAAA,CAAUmO,gBAAA,GAAmB9K,CAAA,CAAS+K,GAAA,IAAc,GAC9D/K,CAAA,CAAU6K,WAAA,GAAc,iBAAiBvK,CAAA,CAAGuK,WAAA,IAAevK,CAAA,CAAG3F,IAAA,IAAQ,KAC/DqF,CACP;AAAA;ACzCD,IAAMsC,eAAA,GAAQ,SAARA,EAAShC,CAAA,EAAUN,CAAA;IACxB,OAAgB,QAAZM,CAAA,GAAyB,OACtBL,wCAAA,CAAaA,wCAAA,CAAaK,CAAA,EAAU/E,GAAA,CAAIyE,CAAA,EAC/C;EAAA;EAGYsL,CAAA,GAAW;IACvB/P,GAAA,EAAK+G,eAAA;IACLX,OAAA,EAASW,eAAA;IACTiJ,KAAA,EAHuB,SAAAA,MAGjBjL,CAAA;MACL,OAAOA,CAAA,GAAWL,wCAAA,CAAaK,CAAA,EAAUlF,MAAA,GAAS,CAClD;IAAA;IACDoQ,IAAA,WAAAA,KAAKlL,CAAA;MACJ,IAAMN,CAAA,GAAaC,wCAAA,CAAaK,CAAA;MAChC,IAA0B,MAAtBN,CAAA,CAAW5E,MAAA,EAAc,MAAM;MACnC,OAAO4E,CAAA,CAAW,EAClB;IAAA;IACDyL,OAAA,EAASxL;EAAA;EChBJuC,CAAA,GAAgB1I,2BAAA,CAAHgI,GAAA;AACnBhI,2BAAA,CAAAgI,GAAA,GAAsB,UAAUxB,CAAA,EAAON,CAAA,EAAUlG,CAAA,EAAUmG,CAAA;EAC1D,IAAIK,CAAA,CAAMoL,IAAA,EAKT,KAHA,IAAIxL,CAAA,EACAC,CAAA,GAAQH,CAAA,EAEJG,CAAA,GAAQA,CAAA,CAAAgB,EAAA,GACf,KAAKjB,CAAA,GAAYC,CAAA,CAAbU,GAAA,KAAkCX,CAAA,CAAtCW,GAAA,EAMC,OALqB,QAAjBb,CAAA,CAAQ8B,GAAA,KACX9B,CAAA,CAAA8B,GAAA,GAAgBhI,CAAA,CAChBgI,GAAA,EAAA9B,CAAA,CAAA2L,GAAA,GAAqB7R,CAAA,CAArB6R,GAAA,GAGMzL,CAAA,CAASW,GAAA,CAAkBP,CAAA,EAAON,CAAA;EAI5CwC,CAAA,CAAclC,CAAA,EAAON,CAAA,EAAUlG,CAAA,EAAUmG,CAAA,CACzC;AAAA;AAED,IAAM2L,CAAA,GAAa9R,2BAAA,CAAQiH,OAAA;AAmB3B,SAAS8K,EAAcvL,CAAA,EAAON,CAAA,EAAgBlG,CAAA;EAyB7C,OAxBIwG,CAAA,KACCA,CAAA,CAAKO,GAAA,IAAeP,CAAA,CAAAO,GAAA,CAAAK,GAAA,KACvBZ,CAAA,CAAKO,GAAA,CAA0BK,GAAA,CAAAC,EAAA,CAAAQ,OAAA,CAAQ,UAAArB,CAAA;IACR,qBAAnBA,CAAA,CAAPO,GAAA,IAAsCP,CAAA,CAAMO,GAAA,EAChD;EAAA,IAEDP,CAAA,CAAKO,GAAA,CAAsBK,GAAA,UAIJ,SADxBZ,CAAA,GAAQqD,CAAA,CAAO,CAAD,GAAKrD,CAAA,GACVO,GAAA,KACJP,CAAA,CAAKO,GAAA,CAAAwC,GAAA,KAA2BvJ,CAAA,KACnCwG,CAAA,CAAAO,GAAA,CAAAwC,GAAA,GAA8BrD,CAAA,GAE/BM,CAAA,CAAAO,GAAA,GAAmB,OAGpBP,CAAA,CAAKqL,GAAA,GACJrL,CAAA,CAAAqL,GAAA,IACArL,CAAA,CAAAqL,GAAA,CAAgBpQ,GAAA,CAAI,UAAA+E,CAAA;IAAA,OACnBuL,CAAA,CAAcvL,CAAA,EAAON,CAAA,EAAgBlG,CAAA,CADb;EAAA,KAKpBwG,CACP;AAAA;AAED,SAASwL,EAAexL,CAAA,EAAON,CAAA,EAAgBlG,CAAA;EAoB9C,OAnBIwG,CAAA,KACHA,CAAA,CAAK2C,GAAA,GAAa,MAClB3C,CAAA,CAAKqL,GAAA,GACJrL,CAAA,CAAAqL,GAAA,IACArL,CAAA,CAAAqL,GAAA,CAAgBpQ,GAAA,CAAI,UAAA+E,CAAA;IAAK,OACxBwL,CAAA,CAAexL,CAAA,EAAON,CAAA,EAAgBlG,CAAA,CADd;EAAA,IAItBwG,CAAA,CAAAO,GAAA,IACCP,CAAA,CAAAO,GAAA,CAAAwC,GAAA,KAAgCrD,CAAA,KAC/BM,CAAA,CAAYwB,GAAA,IACfhI,CAAA,CAAeiS,YAAA,CAAazL,CAAA,CAAYwB,GAAA,EAAAxB,CAAA,CACxC0L,GAAA,GACD1L,CAAA,CAAKO,GAAA,CAAAiB,GAAA,IAAqB,GAC1BxB,CAAA,CAAKO,GAAA,CAAyBwC,GAAA,GAAAvJ,CAAA,IAK1BwG,CACP;AAAA;AAGe,SAAA2L,EAAA;EAEf,KAAAC,GAAA,GAA+B,GAC/B,KAAKlM,CAAA,GAAc,MACnB,KAAAO,GAAA,GAA2B,IAC3B;AAAA;AAmIM,SAAS6B,EAAU9B,CAAA;EAEzB,IAAIN,CAAA,GAAYM,CAAA,CAAHa,EAAA,CAAAN,GAAA;EACb,OAAOb,CAAA,IAAaA,CAAA,CAAJmM,GAAA,IAA4BnM,CAAA,CAAAmM,GAAA,CAAqB7L,CAAA,CACjE;AAAA;AAAA,SAEe8L,EAAK9L,CAAA;EACpB,IAAIxG,CAAA,EACAmG,CAAA,EACAC,CAAA;EAEJ,SAASC,EAAKA,CAAA;IAab,IAZKrG,CAAA,KACJA,CAAA,GAAOwG,CAAA,IACFoL,IAAA,CACJ,UAAApL,CAAA;MACCL,CAAA,GAAYK,CAAA,CAAQrD,OAAA,IAAWqD,CAC/B;IAAA,GACD,UAAAA,CAAA;MACCJ,CAAA,GAAQI,CACR;IAAA,IAICJ,CAAA,EACH,MAAMA,CAAA;IAGP,KAAKD,CAAA,EACJ,MAAMnG,CAAA;IAGP,OAAOkG,yCAAA,CAAcC,CAAA,EAAWE,CAAA,CAChC;EAAA;EAID,OAFAA,CAAA,CAAK0K,WAAA,GAAc,QACnB1K,CAAA,CAAI4K,GAAA,IAAc,GACX5K,CACP;AAAA;ACpQe,SAAA6C,EAAA;EACf,KAAK9C,CAAA,GAAQ,MACb,KAAKC,CAAA,GAAO,IACZ;AAAA;ADaDrG,2BAAA,CAAQiH,OAAA,GAAU,UAAUT,CAAA;EAE3B,IAAMN,CAAA,GAAYM,CAAA,CAAlBO,GAAA;EACIb,CAAA,IAAaA,CAAA,CAAJqM,GAAA,IACZrM,CAAA,CAAAqM,GAAA,IAOGrM,CAAA,KAAkC,MAArBM,CAAA,CAAAW,GAAA,KAChBX,CAAA,CAAMnG,IAAA,GAAO,OAGVyR,CAAA,IAAYA,CAAA,CAAWtL,CAAA,CAC3B;AAAA,IAgED2L,CAAA,CAAStP,SAAA,GAAY,IAAI2D,6BAAA,IAOaO,GAAA,aAAUP,CAAA,EAASN,CAAA;EACxD,IAAMlG,CAAA,GAAsBkG,CAAA,CAAHa,GAAA;IAGnBZ,CAAA,GAAI;EAEW,QAAjBA,CAAA,CAAED,CAAA,KACLC,CAAA,CAAED,CAAA,GAAc,KAEjBC,CAAA,CAAED,CAAA,CAAY5D,IAAA,CAAKtC,CAAA;EAEnB,IAAMoG,CAAA,GAAUkC,CAAA,CAAUnC,CAAA,CAADgD,GAAA;IAErB9C,CAAA,IAAW;IACTpE,CAAA,GAAa,SAAbA,EAAA,EAAa;MACdoE,CAAA,KAEJA,CAAA,IAAW,GACXrG,CAAA,CAAAuS,GAAA,GAAiC,MAE7BnM,CAAA,GACHA,CAAA,CAAQU,CAAA,IAERA,CAAA,GAED;IAAA;EAED9G,CAAA,CAAAuS,GAAA,GAAiCtQ,CAAA;EAEjC,IAAM6E,CAAA,GAAuB,SAAvBA,EAAA,EAAuB;MAC5B,QAAOX,CAAA,CAAPiM,GAAA,EAAkC;QAGjC,IAAIjM,CAAA,CAAEqI,KAAA,CAAkB6D,GAAA;UACvB,IAAM7L,CAAA,GAAiBL,CAAA,CAAEqI,KAAA,CAAA6D,GAAA;UACzBlM,CAAA,CAAAgD,GAAA,CAAA0I,GAAA,CAAmB,KAAKG,CAAA,CACvBxL,CAAA,EACAA,CAAA,CACAO,GAAA,CAAAwC,GAAA,EAAA/C,CAAA,CAAAO,GAAA,CAAAyL,GAAA,CAED;QAAA;QAID,IAAItM,CAAA;QACJ,KAHAC,CAAA,CAAEuB,QAAA,CAAS;UAAE2K,GAAA,EAAalM,CAAA,CAACM,GAAA,GAAuB;QAAA,IAG1CP,CAAA,GAAYC,CAAA,CAAED,CAAA,CAAYuM,GAAA,KACjCvM,CAAA,CAAU6I,WAAA,EAEX;MAAA;IACD;IAOKxI,CAAA,IAA8C,MAA/BL,CAAA,CAAAiB,GAAA;EAChBhB,CAAA,CAAAiM,GAAA,MAAgC7L,CAAA,IACpCJ,CAAA,CAAEuB,QAAA,CAAS;IAAE2K,GAAA,EAAalM,CAAA,CAAAM,GAAA,GAAwBN,CAAA,CAAAgD,GAAA,CAAA0I,GAAA,CAAmB;EAAA,IAEtErL,CAAA,CAAQoL,IAAA,CAAK3P,CAAA,EAAYA,CAAA,CACzB;AAAA,GAEDkQ,CAAA,CAAStP,SAAA,CAAUwM,oBAAA,GAAuB;EACzC,KAAKnJ,CAAA,GAAc,EACnB;AAAA,GAODiM,CAAA,CAAStP,SAAA,CAAUiN,MAAA,GAAS,UAAUtJ,CAAA,EAAOxG,CAAA;EAC5C,IAAI,KAA0ByG,GAAA;IAI7B,IAAI,KAAuB0C,GAAA,CAAA0I,GAAA;MAC1B,IAAM1L,CAAA,GAAiBuM,QAAA,CAASpC,aAAA,CAAc;QACxCjK,CAAA,GAAoB,KAAA8C,GAAA,CAAA0I,GAAA,CAAsB,GAAhD9K,GAAA;MACA,KAAAoC,GAAA,CAAA0I,GAAA,CAAsB,KAAKE,CAAA,CAC1B,KADuCtL,GAAA,EAEvCN,CAAA,EACCE,CAAA,CAAAmM,GAAA,GAAuCnM,CAAA,CAAvCkD,GAAA,CAEF;IAAA;IAED,KAAA9C,GAAA,GAA2B,IAC3B;EAAA;EAID,IAAMxE,CAAA,GACLjC,CAAA,CAAAqS,GAAA,IAAoBnM,yCAAA,CAAcE,4BAAA,EAAU,MAAMI,CAAA,CAAMmM,QAAA;EAGzD,OAFI1Q,CAAA,KAAUA,CAAA,CAAAkF,GAAA,GAAsB,OAE7B,CACNjB,yCAAA,CAAcE,4BAAA,EAAU,MAAMpG,CAAA,CAAKqS,GAAA,GAAc,OAAO7L,CAAA,CAAMmI,QAAA,GAC9D1M,CAAA,CAED;AAAA;AClMD,IAAM2Q,CAAA,GAAU,SAAVA,EAAWpM,CAAA,EAAMN,CAAA,EAAOlG,CAAA;EAc7B,MAbMA,CAAA,CAdgB,OAcSA,CAAA,CAfR,MAqBtBwG,CAAA,CAAKH,CAAA,CAAKwM,MAAA,CAAO3M,CAAA,GAQhBM,CAAA,CAAKrC,KAAA,CAAM2O,WAAA,KACmB,QAA9BtM,CAAA,CAAKrC,KAAA,CAAM2O,WAAA,CAAY,OAActM,CAAA,CAAKH,CAAA,CAAK0M,IAAA,GASjD,KADA/S,CAAA,GAAOwG,CAAA,CAAKJ,CAAA,EACLpG,CAAA,GAAM;IACZ,OAAOA,CAAA,CAAKsB,MAAA,GAAS,IACpBtB,CAAA,CAAKyS,GAAA,EAAL;IAED,IAAIzS,CAAA,CA1CiB,KA0CMA,CAAA,CA3CL,IA4CrB;IAEDwG,CAAA,CAAKJ,CAAA,GAAQpG,CAAA,GAAOA,CAAA,CA5CJ,EA6ChB;EAAA;AACD;AC/CD,SAASgJ,EAAgBxC,CAAA;EAExB,OADA,KAAKwM,eAAA,GAAkB;IAAA,OAAMxM,CAAA,CAAMoC,OAAZ;EAAA,GAChBpC,CAAA,CAAMmI,QACb;AAAA;AASD,SAAShF,EAAOnD,CAAA;EACf,IAAMxG,CAAA,GAAQ;IACVmG,CAAA,GAAYK,CAAA,CAAMvE,CAAA;EAEtBjC,CAAA,CAAMqP,oBAAA,GAAuB;IAC5BhJ,kCAAA,CAAO,MAAMrG,CAAA,CAAM8G,CAAA,GACnB9G,CAAA,CAAM8G,CAAA,GAAQ,MACd9G,CAAA,CAAMiC,CAAA,GAAa,IACnB;EAAA,GAIGjC,CAAA,CAAMiC,CAAA,IAAcjC,CAAA,CAAMiC,CAAA,KAAekE,CAAA,IAC5CnG,CAAA,CAAMqP,oBAAA,IAKH7I,CAAA,CAAJ2C,GAAA,IACMnJ,CAAA,CAAM8G,CAAA,KACV9G,CAAA,CAAMiC,CAAA,GAAakE,CAAA,EAGnBnG,CAAA,CAAM8G,CAAA,GAAQ;IACbmM,QAAA,EAAU;IACV/E,UAAA,EAAY/H,CAAA;IACZ+M,UAAA,EAAY;IACZC,WAAA,EAAY,SAAAA,YAAA3M,CAAA;MACX,KAAK0M,UAAA,CAAW5Q,IAAA,CAAKkE,CAAA,GACrBxG,CAAA,CAAMiC,CAAA,CAAWkR,WAAA,CAAY3M,CAAA,CAC7B;IAAA;IACDyL,YAAA,EARa,SAAAA,aAQAzL,CAAA,EAAON,CAAA;MACnB,KAAKgN,UAAA,CAAW5Q,IAAA,CAAKkE,CAAA,GACrBxG,CAAA,CAAMiC,CAAA,CAAWkR,WAAA,CAAY3M,CAAA,CAC7B;IAAA;IACD4M,WAAA,EAAY,SAAAA,YAAA5M,CAAA;MACX,KAAK0M,UAAA,CAAW5D,MAAA,CAAO,KAAK4D,UAAA,CAAW1H,OAAA,CAAQhF,CAAA,MAAW,GAAG,IAC7DxG,CAAA,CAAMiC,CAAA,CAAWmR,WAAA,CAAY5M,CAAA,CAC7B;IAAA;EAAA,IAKHH,kCAAA,CACCH,yCAAA,CAAc8C,CAAA,EAAiB;IAAEJ,OAAA,EAAS5I,CAAA,CAAM4I;EAAA,GAAWpC,CAAA,CAA9C2C,GAAA,GACbnJ,CAAA,CAAM8G,CAAA,KAKC9G,CAAA,CAAM8G,CAAA,IACd9G,CAAA,CAAMqP,oBAAA,EAEP;AAAA;AAOM,SAASlH,EAAa3B,CAAA,EAAOxG,CAAA;EACnC,IAAMmG,CAAA,GAAKD,yCAAA,CAAcyD,CAAA,EAAQ;IAAER,GAAA,EAAQ3C,CAAA;IAAOvE,CAAA,EAAYjC;EAAA;EAE9D,OADAmG,CAAA,CAAGkN,aAAA,GAAgBrT,CAAA,EACZmG,CACP;AAAA;AAAA,CDxBD+C,CAAA,CAAarG,SAAA,GAAY,IAAI2D,6BAAA,IAEO6L,GAAA,aAAU7L,CAAA;EAC7C,IAAMN,CAAA,GAAO;IACPlG,CAAA,GAAYsI,CAAA,CAAUpC,CAAA,CAA5BiD,GAAA;IAEIhD,CAAA,GAAOD,CAAA,CAAKG,CAAA,CAAKiN,GAAA,CAAI9M,CAAA;EAGzB,OAFAL,CAAA,CA5DuB,gBA8DhBC,CAAA;IACN,IAAMC,CAAA,GAAmB,SAAnBA,EAAA,EAAmB;MACnBH,CAAA,CAAK/B,KAAA,CAAM2O,WAAA,IAKf3M,CAAA,CAAK7D,IAAA,CAAK8D,CAAA,GACVwM,CAAA,CAAQ1M,CAAA,EAAMM,CAAA,EAAOL,CAAA,KAHrBC,CAAA,EAKD;IAAA;IACGpG,CAAA,GACHA,CAAA,CAAUqG,CAAA,IAEVA,CAAA,EAED;EAAA,CACD;AAAA,GAED6C,CAAA,CAAarG,SAAA,CAAUiN,MAAA,GAAS,UAAUtJ,CAAA;EACzC,KAAKJ,CAAA,GAAQ,MACb,KAAKC,CAAA,GAAO,IAAIkN,GAAA;EAEhB,IAAMrN,CAAA,GAAWC,wCAAA,CAAaK,CAAA,CAAMmI,QAAA;EAChCnI,CAAA,CAAMsM,WAAA,IAAwC,QAAzBtM,CAAA,CAAMsM,WAAA,CAAY,MAI1C5M,CAAA,CAASsN,OAAA;EAIV,KAAK,IAAIxT,CAAA,GAAIkG,CAAA,CAAS5E,MAAA,EAAQtB,CAAA,KAY7B,KAAKqG,CAAA,CAAKoN,GAAA,CAAIvN,CAAA,CAASlG,CAAA,GAAK,KAAKoG,CAAA,GAAQ,CAAC,GAAG,GAAG,KAAKA,CAAA;EAEtD,OAAOI,CAAA,CAAMmI,QACb;AAAA,GAEDzF,CAAA,CAAarG,SAAA,CAAU0M,kBAAA,GACtBrG,CAAA,CAAarG,SAAA,CAAUoM,iBAAA,GAAoB;EAAY,IAAAzI,CAAA;EAOtD,KAAKH,CAAA,CAAKwB,OAAA,CAAQ,UAAC3B,CAAA,EAAMlG,CAAA;IACxB4S,CAAA,CAAQpM,CAAA,EAAMxG,CAAA,EAAOkG,CAAA,CACrB;EAAA,EACD;AAAA;AEtHK,IAAMsB,CAAA,GACM,sBAAV6J,MAAA,IAAyBA,MAAA,CAAOC,GAAA,IAAOD,MAAA,CAAOC,GAAA,CAAI,oBAC1D;EAEKoC,CAAA,GACL;EACKC,CAAA,GAAS;EACTC,CAAA,GAAgB;EAEhBC,CAAA,GAA6B,sBAAbnB,QAAA;EAKhB/J,CAAA,GAAoB,SAApBA,EAAoBnC,CAAA;IACzB,QAAkB,sBAAV6K,MAAA,IAA4C,YAAAhP,OAAA,CAAZgP,MAAA,MACrC,gBACA,cACDyC,IAAA,CAAKtN,CAAA,CAJsB;EAAA;AA2CvB,SAASuN,EAAOvN,CAAA,EAAON,CAAA,EAAQlG,CAAA;EAUrC,OAPwB,QAApBkG,CAAA,CAAM2L,GAAA,KACT3L,CAAA,CAAO8N,WAAA,GAAc,KAGtB3N,kCAAA,CAAaG,CAAA,EAAON,CAAA,GACG,qBAAZlG,CAAA,IAAwBA,CAAA,IAE5BwG,CAAA,GAAQA,CAAA,CAAmBO,GAAA,OAClC;AAAA;AAEe,SAAAkN,EAAQzN,CAAA,EAAON,CAAA,EAAQlG,CAAA;EAItC,OAHAiC,mCAAA,CAAcuE,CAAA,EAAON,CAAA,GACE,qBAAZlG,CAAA,IAAwBA,CAAA,IAE5BwG,CAAA,GAAQA,CAAA,CAAHO,GAAA,GAAsB,IAClC;AAAA;AAtDDP,6BAAA,CAAU3D,SAAA,CAAUmO,gBAAA,GAAmB,IASvC,CACC,sBACA,6BACA,uBACCnJ,OAAA,CAAQ,UAAA3B,CAAA;EACTtD,MAAA,CAAOsR,cAAA,CAAe1N,6BAAA,CAAU3D,SAAA,EAAWqD,CAAA,EAAK;IAC/CiO,YAAA,GAAc;IACdb,GAAA,EAAM,SAAAA,IAAA;MACL,OAAO,KAAK,YAAYpN,CAAA,CACxB;IAAA;IACDuN,GAAA,EAAI,SAAAA,IAAAjN,CAAA;MACH5D,MAAA,CAAOsR,cAAA,CAAe,MAAMhO,CAAA,EAAK;QAChCiO,YAAA,GAAc;QACdC,QAAA,GAAU;QACV5T,KAAA,EAAOgG;MAAA,EAER;IAAA;EAAA,EAEF;AAAA;AA6BD,IAAI6N,CAAA,GAAerU,2BAAA,CAAQsU,KAAA;AAU3B,SAASC,EAAA,GAET;AAAA,SAASC,EAAA;EACR,OAAY,KAAAC,YACZ;AAAA;AAED,SAASC,GAAA;EACR,OAAO,KAAKC,gBACZ;AAAA;AAjBD3U,2BAAA,CAAQsU,KAAA,GAAQ,UAAA9N,CAAA;EAMf,OALI6N,CAAA,KAAc7N,CAAA,GAAI6N,CAAA,CAAa7N,CAAA,IAEnCA,CAAA,CAAEoO,OAAA,GAAUL,CAAA,EACZ/N,CAAA,CAAEqO,oBAAA,GAAuBL,CAAA,EACzBhO,CAAA,CAAEsO,kBAAA,GAAqBJ,EAAA,EACflO,CAAA,CAAEuO,WAAA,GAAcvO,CACxB;AAAA;AAYD,IA+HIwO,EAAA;EA/HEC,EAAA,GAAoC;IACzCC,UAAA,GAAY;IACZf,YAAA,GAAc;IACdb,GAAA,EAHyC,SAAAA,IAAA;MAIxC,OAAY,KAAAzV,KACZ;IAAA;EAAA;EA6GEsX,EAAA,GAAenV,2BAAA,CAAQ+L,KAAA;AAC3B/L,2BAAA,CAAQ+L,KAAA,GAAQ,UAAAvF,CAAA;EAEW,mBAAfA,CAAA,CAAMnG,IAAA,IA7GlB,UAAwBmG,CAAA;IACvB,IAAIN,CAAA,GAAQM,CAAA,CAAMrC,KAAA;MACjBnE,CAAA,GAAOwG,CAAA,CAAMnG,IAAA;MACb+F,CAAA,GAAkB;IAEnB,KAAK,IAAIC,CAAA,IAAKH,CAAA,EAAO;MACpB,IAAIjE,CAAA,GAAQiE,CAAA,CAAMG,CAAA;MAElB,MACQ,YAANA,CAAA,IAAiB,kBAAkBH,CAAA,IAAkB,QAATjE,CAAA,IAE5C4R,CAAA,IAAgB,eAANxN,CAAA,IAA6B,eAATrG,CAAA,IACzB,YAANqG,CAAA,IACM,gBAANA,CAAA,GALD;QAYA,IAAIS,CAAA,GAAaT,CAAA,CAAE+O,WAAA;QACT,mBAAN/O,CAAA,IAAwB,WAAWH,CAAA,IAAwB,QAAfA,CAAA,CAAM1F,KAAA,GAGrD6F,CAAA,GAAI,UACY,eAANA,CAAA,KAA8B,MAAVpE,CAAA,GAM9BA,CAAA,GAAQ,KACiB,oBAAf6E,CAAA,GACVT,CAAA,GAAI,eAEW,eAAfS,CAAA,IACU,YAAT9G,CAAA,IAA6B,eAATA,CAAA,IACpB2I,CAAA,CAAkBzC,CAAA,CAAM7F,IAAA,IAGA,cAAfyG,CAAA,GACVT,CAAA,GAAI,cACqB,aAAfS,CAAA,GACVT,CAAA,GAAI,eACMsN,CAAA,CAAOG,IAAA,CAAKzN,CAAA,IACtBA,CAAA,GAAIS,CAAA,IAC6B,MAAvB9G,CAAA,CAAKwL,OAAA,CAAQ,QAAekI,CAAA,CAAYI,IAAA,CAAKzN,CAAA,IACvDA,CAAA,GAAIA,CAAA,CAAE2E,OAAA,CAAQ4I,CAAA,EAAe,OAAOwB,WAAA,KAChB,SAAVnT,CAAA,KACVA,CAAA,QAAQ,KAVR6E,CAAA,GAAaT,CAAA,GAAI,WAeC,cAAfS,CAAA,IAECV,CAAA,CADJC,CAAA,GAAIS,CAAA,MAEHT,CAAA,GAAI,mBAIND,CAAA,CAAgBC,CAAA,IAAKpE,CA3CpB;MAAA;IA4CD;IAIQ,YAARjC,CAAA,IACAoG,CAAA,CAAgBiP,QAAA,IAChB9S,KAAA,CAAMC,OAAA,CAAQ4D,CAAA,CAAgB5F,KAAA,MAG9B4F,CAAA,CAAgB5F,KAAA,GAAQ2F,wCAAA,CAAaD,CAAA,CAAMyI,QAAA,EAAU9G,OAAA,CAAQ,UAAArB,CAAA;MAC5DA,CAAA,CAAMrC,KAAA,CAAMmR,QAAA,IAC0C,KAArDlP,CAAA,CAAgB5F,KAAA,CAAMgL,OAAA,CAAQhF,CAAA,CAAMrC,KAAA,CAAM3D,KAAA,CAC3C;IAAA,KAIU,YAARR,CAAA,IAAoD,QAAhCoG,CAAA,CAAgBmP,YAAA,KACvCnP,CAAA,CAAgB5F,KAAA,GAAQ2F,wCAAA,CAAaD,CAAA,CAAMyI,QAAA,EAAU9G,OAAA,CAAQ,UAAArB,CAAA;MAE3DA,CAAA,CAAMrC,KAAA,CAAMmR,QAAA,GADTlP,CAAA,CAAgBiP,QAAA,IAE0C,KAA5DjP,CAAA,CAAgBmP,YAAA,CAAa/J,OAAA,CAAQhF,CAAA,CAAMrC,KAAA,CAAM3D,KAAA,IAGjD4F,CAAA,CAAgBmP,YAAA,IAAgB/O,CAAA,CAAMrC,KAAA,CAAM3D,KAE9C;IAAA,KAGE0F,CAAA,CAAMrI,KAAA,KAAUqI,CAAA,CAAMsP,SAAA,IACzBpP,CAAA,CAAgBvI,KAAA,GAAQqI,CAAA,CAAMrI,KAAA,EAC9B+E,MAAA,CAAOsR,cAAA,CACN9N,CAAA,EACA,aACA6O,EAAA,MAES/O,CAAA,CAAMsP,SAAA,KAActP,CAAA,CAAMrI,KAAA,IAE1BqI,CAAA,CAAMrI,KAAA,IAASqI,CAAA,CAAMsP,SAAA,MAD/BpP,CAAA,CAAgBvI,KAAA,GAAQuI,CAAA,CAAgBoP,SAAA,GAAYtP,CAAA,CAAMsP,SAAA,GAK3DhP,CAAA,CAAMrC,KAAA,GAAQiC,CACd;EAAA,CAMC,CAAeI,CAAA,GAGhBA,CAAA,CAAM+K,QAAA,GAAW/J,CAAA,EAEb2N,EAAA,IAAcA,EAAA,CAAa3O,CAAA,CAC/B;AAAA;AAID,IAAMiP,EAAA,GAAkBzV,2BAAA,CAAxB2G,GAAA;AACA3G,2BAAA,CAAO2G,GAAA,GAAW,UAAUH,CAAA;EACvBiP,EAAA,IACHA,EAAA,CAAgBjP,CAAA,GAEjBwO,EAAA,GAAmBxO,CAAA,CACnBO,GAAA;AAAA;AAED,IAAM2O,EAAA,GAAY1V,2BAAA,CAAQ6G,MAAA;AAE1B7G,2BAAA,CAAQ6G,MAAA,GAAS,UAAUL,CAAA;EACtBkP,EAAA,IACHA,EAAA,CAAUlP,CAAA;EAGX,IAAMN,CAAA,GAAQM,CAAA,CAAMrC,KAAA;IACdnE,CAAA,GAAMwG,CAAA,CAAZwB,GAAA;EAGQ,QAAPhI,CAAA,IACe,eAAfwG,CAAA,CAAMnG,IAAA,IACN,WAAW6F,CAAA,IACXA,CAAA,CAAM1F,KAAA,KAAUR,CAAA,CAAIQ,KAAA,KAEpBR,CAAA,CAAIQ,KAAA,GAAuB,QAAf0F,CAAA,CAAM1F,KAAA,GAAgB,KAAK0F,CAAA,CAAM1F,KAAA,GAG9CwU,EAAA,GAAmB,IACnB;AAAA;AAMY,IAAAW,EAAA,GAAqD;IACjEC,sBAAA,EAAwB;MACvBrN,OAAA,EAAS;QACRsN,WAAA,EAAY,SAAAA,YAAArP,CAAA;UACX,OAAOwO,EAAA,CAAgBc,GAAA,CAAgBtP,CAAA,CAAaO,GAAA,EAAA5C,KAAA,CAAM3D,KAC1D;QAAA;MAAA;IAAA;EAAA;EC3OEuV,EAAA,GAAU;AAMhB,SAASC,GAAcxP,CAAA;EACtB,OAAON,iCAAA,CAAc+P,IAAA,CAAK,MAAMzP,CAAA,CAChC;AAAA;AAOD,SAAS0P,GAAe1P,CAAA;EACvB,SAASA,CAAA,IAAWA,CAAA,CAAQ+K,QAAA,KAAa/J,CACzC;AAAA;AASD,SAAS2O,GAAa3P,CAAA;EACrB,OAAK0P,EAAA,CAAe1P,CAAA,IACbF,gCAAA,CAAmB5D,KAAA,CAAM,MAAMR,SAAA,IADDsE,CAErC;AAAA;AAOD,SAAS4P,GAAuB5P,CAAA;EAC/B,SAAIA,CAAA,CAAJqL,GAAA,KACCxL,kCAAA,CAAa,MAAMG,CAAA,IAEnB,EAED;AAAA;AAOD,SAAS6P,GAAY7P,CAAA;EACpB,OACEA,CAAA,KACCA,CAAA,CAAU8P,IAAA,IAAgC,MAAvB9P,CAAA,CAAUyM,QAAA,IAAkBzM,CAAA,KACjD,IAED;AAAA;AAUK,IAAA+P,EAAA,GAA0B,SAA1BA,GAA2B/P,CAAA,EAAUN,CAAA;IAAQ,OAAAM,CAAA,CAASN,CAAA,CAA5B;EAAA;EAW1BsQ,EAAA,GAAY,SAAZA,GAAahQ,CAAA,EAAUN,CAAA;IAAA,OAAQM,CAAA,CAASN,CAAA,CAA5B;EAAA;EAMZuQ,EAAA,GAAarQ,4BAAA;AAAA,SAEHsQ,GAAgBlQ,CAAA;EAC/BA,CAAA,EACA;AAAA;AAAA,SAEemQ,GAAiBnQ,CAAA;EAChC,OAAOA,CACP;AAAA;AAEe,SAAAoQ,GAAA;EACf,OAAO,EAAC,GAAOF,EAAA,CACf;AAAA;AAIY,IAAAG,EAAA,GAAqB3P,uCAAA;AAAA,SAMlB4P,GAAqBtQ,CAAA,EAAWN,CAAA;EAC/C,IAAMlG,CAAA,GAAQkG,CAAA;IAEdC,CAAA,GAAqCO,wCAAA,CAAS;MAC7C9I,CAAA,EAAW;QAAEyJ,EAAA,EAAQrH,CAAA;QAAO4G,CAAA,EAAcV;MAAA;IAAA;IADlCE,CAAA,GAAAD,CAAA,IAAAvI,CAAA;IAAayI,CAAA,GAAAF,CAAA;EAyBtB,OArBAe,+CAAA,CAAgB;IACfd,CAAA,CAAAiB,EAAA,GAAmBrH,CAAA,EACnBoG,CAAA,CAAUQ,CAAA,GAAeV,CAAA,EAEpB4K,CAAA,CAAG1K,CAAA,CAAAiB,EAAA,EAAkBnB,CAAA,OACzBG,CAAA,CAAY;MAAEzI,CAAA,EAAAwI;IAAA,EAEf;EAAA,GAAE,CAACI,CAAA,EAAWxG,CAAA,EAAOkG,CAAA,IAEtBU,yCAAA,CAAU;IAKT,OAJKkK,CAAA,CAAG1K,CAAA,CAAkBiB,EAAA,EAAAjB,CAAA,CAAUQ,CAAA,OACnCP,CAAA,CAAY;MAAEzI,CAAA,EAAAwI;IAAA,IAGRI,CAAA,CAAU;MACXsK,CAAA,CAAG1K,CAAA,CAADiB,EAAA,EAAmBjB,CAAA,CAAUQ,CAAA,OACnCP,CAAA,CAAY;QAAEzI,CAAA,EAAAwI;MAAA,EAEf;IAAA,EACD;EAAA,GAAE,CAACI,CAAA,IAEGxG,CACP;AAAA;AAiCD,IAAe+W,EAAA;EACd5X,QAAA,EAAAuH,gCAAA;EACAsQ,KAAA,EAAAzP,6BAAA;EACA0P,UAAA,EAAArZ,kCAAA;EACAsZ,SAAA,EAAAtQ,iCAAA;EACAuQ,eAAA,EAAAjQ,uCAAA;EACAkQ,kBAAA,EAAAP,EAAA;EACAQ,aAAA,EAAAT,EAAA;EACAU,gBAAA,EAAAX,EAAA;EACAY,oBAAA,EAAAT,EAAA;EACAU,eAAA,EAAAd,EAAA;EACAe,MAAA,EAAAxP,8BAAA;EACAyP,mBAAA,EAAA1Q,2CAAA;EACAnH,OAAA,EAAAuI,+BAAA;EACAlI,WAAA,EAAAmI,mCAAA;EACAsP,UAAA,EAAAtO,kCAAA;EACAN,aAAA,EAAA6O,qCAAA;EACAC,OAAA,EAvLe;EAwLfC,QAAA,EAAAtG,CAAA;EACA1B,MAAA,EAAAiE,CAAA;EACAgE,OAAA,EAAA9D,CAAA;EACA+D,sBAAA,EAAA5B,EAAA;EACA6B,YAAA,EAAA9P,CAAA;EACAmI,aAAA,EAAApK,iCAAA;EACAgS,aAAA,EAAApR,iCAAA;EACAqR,aAAA,EAAAnC,EAAA;EACApG,YAAA,EAAAuG,EAAA;EACAiC,SAAA,EAAA7R,6BAAA;EACAxF,QAAA,EAAAqF,4BAAA;EACAiS,cAAA,EAAAnC,EAAA;EACAoC,WAAA,EAAAjC,EAAA;EACAjG,SAAA,EAAA5J,6BAAA;EACA+R,aAAA,EAAA9O,CAAA;EACA+O,IAAA,EAAA1P,CAAA;EACA2P,UAAA,EAAAjP,CAAA;EACAkP,SAAA,EAAAlC,EAAA;EACAmC,uBAAA,EAAApC,EAAA;EACAqC,UAAA,EAAAnC,EAAA;EACAoC,QAAA,EAAA1G,CAAA;EACA2G,YAAA,EAAA5P,CAAA;EACA6P,IAAA,EAAAzG,CAAA;EACA0G,kDAAA,EAAArD;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClPD,IAAMsD,cAAc,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,GAAZ,EAAiB,IAAjB,EAAuB,GAAvB,EAA4B,GAA5B,EAAiC,IAAjC,EAAuC,GAAvC,EAA4C,IAA5C,EAAkD,GAAlD,EAAuD,IAAvD,EAA6D,GAA7D,CAAvB;AACA,IAAMC,kBAAkB,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,CAA3B;AACA,IAAMC,aAAa,GAAG;EACpBtI,CAAC,EAAE,CADiB;QAEd,CAFc;EAGpBuI,EAAE,EAAE,CAHgB;EAIpBjH,CAAC,EAAE,CAJiB;QAKd,CALc;EAMpBkH,EAAE,EAAE,CANgB;EAOpBvI,CAAC,EAAE,CAPiB;EAQpBxI,CAAC,EAAE,CARiB;QASd,CATc;EAUpBgR,EAAE,EAAE,CAVgB;EAWpBvF,CAAC,EAAE,CAXiB;QAYd,CAZc;EAapBwF,EAAE,EAAE,CAbgB;EAcpB/Q,CAAC,EAAE,CAdiB;QAed,EAfc;EAgBpBgR,EAAE,EAAE,EAhBgB;EAiBpBhS,CAAC,EAAE;CAjBL;AAmBA,IAAMiS,cAAc,GAAG,EAAvB;AACA,IAAMC,eAAe,GAAGD,cAAxB;AACA,IAAME,eAAe,GAAG,GAAxB;AACA,IAAMC,UAAU,GAAG,qBAAnB;AACA,IAAMC,eAAe,GAAG,EAAxB;;;;;;;;AASA,SAASC,QAATA,CAAkBC,IAAlB,EAAwB;MAClB,CAACA,IAAL,EAAW;UACHrW,KAAK,CAAC,uBAAD,CAAX;;MAEI+G,KAAK,GAAGmP,UAAU,CAACxP,IAAX,CAAgB2P,IAAI,CAAC3E,WAAL,EAAhB,CAAd;MACI,CAAC3K,KAAL,EAAY;UACJ/G,KAAK,CAAC,uBAAD,CAAX;;8BAEqC+G,KARjB;IAQbuP,MARa,GAAAC,MAAA;IAQLC,UARK,GAAAD,MAAA;IAQOE,MARP,GAAAF,MAAA;MAShBG,SAAS,MAAA3R,MAAA,CAAMuR,MAAM,CAAChM,WAAP,EAAN,EAAAvF,MAAA,CAA6ByR,UAA7B,CAAf;MACMG,UAAU,GAAGlB,aAAa,CAACiB,SAAD,CAAhC;MACIC,UAAU,IAAI,IAAlB,EAAwB;UAChB3W,KAAK,CAAC,uBAAD,CAAX;;SAEK+V,cAAc,GAAGY,UAAjB,GAA8BR,eAAe,GAAGS,QAAQ,CAACH,MAAD,EAAS,EAAT,CAA/D;;;;;AAMF,SAASI,yBAATA,CAAmCC,UAAnC,EAA+C;MACvCH,UAAU,GAAG,CAACG,UAAU,GAAGf,cAAd,IAAgCI,eAAnD;MACMM,MAAM,GAAGjP,IAAI,CAACuP,KAAL,CAAW,CAACD,UAAU,GAAGf,cAAd,IAAgCI,eAA3C,CAAf;MACMO,SAAS,GAAGnB,cAAc,CAACoB,UAAD,CAAhC;SACO;IACLN,IAAI,KAAAtR,MAAA,CAAK2R,SAAL,EAAA3R,MAAA,CAAiB0R,MAAjB,CADC;IAELC,SAAS,EAATA,SAFK;IAGLD,MAAM,EAANA,MAHK;IAILK,UAAU,EAAVA,UAJK;IAKLE,YAAY,EAAExB,kBAAkB,CAACpW,QAAnB,CAA4BsX,SAA5B;GALhB;;AASF,SAASO,8BAATA,CAAA,EAA0C;SACjCrX,oBAAK,CAACoW,eAAD,EAAkBC,eAAe,GAAG,CAApC,CAAL,CAA4CiB,MAA5C,CAAmD,UAACC,KAAD,EAAQL,UAAR,EAAuB;IAC/EK,KAAK,CAACL,UAAD,CAAL,GAAoBD,yBAAyB,CAACC,UAAD,CAA7C;WACOK,KAAP;GAFK,EAGJ,EAHI,CAAP;;AAMF,IAAMC,yBAAyB,GAAGH,8BAA8B,EAAhE;;;AAIA,SAASI,aAATA,CAAuBP,UAAvB,EAAmC;MAC3BQ,KAAK,GAAGF,yBAAyB,CAACN,UAAD,CAAvC;MACI,CAACQ,KAAL,EAAY;UACJtX,KAAK,CAAC,qBAAD,CAAX;;SAEKsX,KAAP;;;AAIF,IAAMC,oBAAoB,GAAG3X,oBAAK,CAACoW,eAAD,EAAkBC,eAAe,GAAG,CAApC,CAAL,CAA4ChS,MAA5C,CAC3B,UAAC6S,UAAD;SAAgB,CAACO,aAAa,CAACP,UAAD,CAAb,CAA0BE,YAA3C;CAD2B,CAA7B;AAIA,IAAAQ,WAAA,GAAe;EACbpB,QAAQ,EAARA,QADa;EAEbiB,aAAa,EAAbA,aAFa;EAGbrB,eAAe,EAAfA,eAHa;EAIbC,eAAe,EAAfA,eAJa;EAKbsB,oBAAoB,EAApBA;CALF;ICvFME,mBAAA,G;;;;;;;;;;;sEAkCc,YAAM;YACjBhX,KAAL,CAAWiX,eAAX,CAA2BC,KAAA,CAAKlX,KAAL,CAAWqW,UAAtC;;sEAGgB,YAAM;YACjBrW,KAAL,CAAWmX,eAAX,CAA2BD,KAAA,CAAKlX,KAAL,CAAWqW,UAAtC;;;;;;;2CAIqBA,UAAA,EAAY;UAC3Be,YAAY,GAAG,CAArB;kCAC8BL,WAAW,CAACH,aAAZ,CAA0BP,UAA1B,CAFG;QAEzBL,MAFyB,GAAAqB,qBAAA,CAEzBrB,MAFyB;QAEjBC,SAFiB,GAAAoB,qBAAA,CAEjBpB,SAFiB;UAG3BqB,aAAa,GAAG,KAAKtX,KAAL,CAAWuX,cAAX,CAA0BtB,SAA1B,CAAtB;UACMuB,cAAc,GAAGJ,YAAY,GAAGpB,MAAtC;aACOsB,aAAa,GAAGE,cAAvB;;;;2CAGqBnB,UAAA,EAAY;aAE/B,KAAKoB,sBAAL,CAA4BpB,UAA5B,IACA,KAAKoB,sBAAL,CAA4B,KAAKzX,KAAL,CAAW0X,SAAX,CAAqBC,KAAjD,CAFF;;;;6BAMO;wBAWH,KAAK3X,KAXF;QAEL4X,eAFK,GAAAC,WAAA,CAELD,eAFK;QAGLE,oBAHK,GAAAD,WAAA,CAGLC,oBAHK;QAILzB,UAJK,GAAAwB,WAAA,CAILxB,UAJK;QAKL0B,KALK,GAAAF,WAAA,CAKLE,KALK;QAMLC,cANK,GAAAH,WAAA,CAMLG,cANK;QAOLjC,UAPK,GAAA8B,WAAA,CAOL9B,UAPK;QAQLlK,MARK,GAAAgM,WAAA,CAQLhM,MARK;QASL3O,QATK,GAAA2a,WAAA,CASL3a,QATK;QAULsN,QAVK,GAAAqN,WAAA,CAULrN,QAVK;;;aAgBLyN,EAAA,CAAA9L,aAAA;QACEkF,SAAS,EAAEzT,oBAAU,CAAC,iBAAD,EAAoB;yCACRmY,UADQ;sCAEX,CAACA,UAFU;uCAGV7Y,QAHU;qCAIZ2O;SAJR,CADvB;QAOElS,KAAK,EAAE;UACLue,IAAI,EAAEC,iBAAiB,CAAC,KAAKC,sBAAL,CAA4B/B,UAA5B,IAA0CuB,eAA3C,CADlB;UAELS,KAAK,EAAEF,iBAAiB,CACtBpC,UAAU,GAAG+B,oBAAoB,GAAGF,eAA1B,GAA4CA,eADhC;SAT5B;QAaEU,WAAW,EAAEN,cAAc,GAAG,IAAH,GAAU,KAAKf,eAb5C;QAcEsB,SAAS,EAAEP,cAAc,GAAG,IAAH,GAAU,KAAKb,eAd1C;QAeEqB,YAAY,EAAET,KAAK,GAAG,KAAKd,eAAR,GAA0B,IAf/C;QAgBEwB,YAAY,EAAE,KAAKtB,eAhBrB;QAiBEuB,YAAY,EAAEV,cAAc,GAAG,KAAKf,eAAR,GAA0B,IAjBxD;QAkBE0B,aAAa,EAAEX,cAAc,GAAG,KAAKb,eAAR,GAA0B,IAlBzD;QAmBEyB,UAAU,EAAEZ,cAAc,GAAG,KAAKb,eAAR,GAA0B;SAEpDc,EAAA,CAAA9L,aAAA;QAAKkF,SAAS,EAAC;SAAkC7G,QAAjD,CArBF,CADF;;;;EAzEcyN,EAAK,CAAChM,SAAA;gBAAlB+K,mBAAA,eACe;EACjBX,UAAU,EAAEvU,oBAAS,CAAChB,MAAV,CAAiBP,UADZ;EAEjBqX,eAAe,EAAE9V,oBAAS,CAAChB,MAAV,CAAiBP,UAFjB;;EAGjBwX,KAAK,EAAEjW,oBAAS,CAAClB,IAAV,CAAeL,UAHL;EAIjByX,cAAc,EAAElW,oBAAS,CAAClB,IAAV,CAAeL,UAJd;EAKjBwV,UAAU,EAAEjU,oBAAS,CAAClB,IAAV,CAAeL,UALV;EAMjBsL,MAAM,EAAE/J,oBAAS,CAAClB,IAAV,CAAeL,UANN;EAOjBrD,QAAQ,EAAE4E,oBAAS,CAAClB,IAAV,CAAeL,UAPR;EAQjB0W,eAAe,EAAEnV,oBAAS,CAACjB,IAAV,CAAeN,UARf;EASjB4W,eAAe,EAAErV,oBAAS,CAACjB,IAAV,CAAeN,UATf;EAUjBuX,oBAAoB,EAAEhW,oBAAS,CAAChB,MAAV,CAAiBP,UAVtB;EAWjBgX,cAAc,EAAEzV,oBAAS,CAACf,MAAV,CAAiBR,UAXhB;EAYjBiK,QAAQ,EAAE1I,oBAAS,CAACP;;gBAblByV,mBAAA,kBAgBkB;EACpBc,oBAAoB,EAAE,IADF;EAEpBP,cAAc,EAAE;IACd7K,CAAC,EAAE,CADW;IAEduI,EAAE,EAAE,IAFU;IAGdjH,CAAC,EAAE,CAHW;IAIdkH,EAAE,EAAE,GAJU;IAKdvI,CAAC,EAAE,CALW;IAMdxI,CAAC,EAAE,CANW;IAOdgR,EAAE,EAAE,GAPU;IAQdvF,CAAC,EAAE,CARW;IASdwF,EAAE,EAAE,GATU;IAUd/Q,CAAC,EAAE,CAVW;IAWdgR,EAAE,EAAE,IAXU;IAYdhS,CAAC,EAAE;;;AAuET,SAAS8U,iBAATA,CAA2BU,KAA3B,EAAkC;mBACtBA,KAAK,GAAG,GAAlB;;ICpGIC,wBAAA,G;;;;;;;;;;qCAyBa;aACR3Z,oBAAK,CAAC,KAAKa,KAAL,CAAW0X,SAAX,CAAqBC,KAAtB,EAA6B,KAAK3X,KAAL,CAAW0X,SAAX,CAAqBqB,IAArB,GAA4B,CAAzD,CAAZ;;;;yCAGmB;aACZ,KAAKC,cAAL,GAAsBxV,MAAtB,CAA6B,UAAC1C,MAAD,EAAY;oCACrBiW,WAAW,CAACH,aAAZ,CAA0B9V,MAA1B,CADqB;UACtCyV,YADsC,GAAAc,qBAAA,CACtCd,YADsC;eAEvC,CAACA,YAAR;OAFK,EAGJpZ,MAHH;;;;yCAOmB;aACZ,IAAI,KAAK8b,kBAAL,EAAX;;;;+BAGS;aACF,KAAKjZ,KAAL,CAAWqY,KAAX,GAAmB,KAAKrY,KAAL,CAAWqY,KAA9B,GAAsC,MAA7C;;;;gCAGU;UACN,CAAC,KAAKrY,KAAL,CAAWqY,KAAhB,EAAuB;eACd,MAAP;;UAEIa,QAAQ,GAAG,KAAKlZ,KAAL,CAAWqY,KAAX,GAAmB,KAAKc,kBAAL,EAApC;uBACUD,QAAQ,GAAG,KAAKlZ,KAAL,CAAWoZ,gBAAhC;;;;6BAGO;;UACDxB,eAAe,GAAG,KAAKuB,kBAAL,EAAxB;aAEElB,EAAA,CAAA9L,aAAA;QACEkF,SAAS,EAAEzT,oBAAU,CAAC,sBAAD,EAAyB,KAAKoC,KAAL,CAAWqR,SAApC,CADvB;QAEE1X,KAAK,EAAE;UAAE0e,KAAK,EAAE,KAAKgB,QAAL,EAAT;UAA0Bhc,MAAM,EAAE,KAAKic,SAAL;;SAExC,KAAKN,cAAL,GAAsB1b,GAAtB,CAA0B,UAAC+Y,UAAD,EAAgB;qCACVU,WAAW,CAACH,aAAZ,CAA0BP,UAA1B,CADU;UACjCT,IADiC,GAAA2D,sBAAA,CACjC3D,IADiC;UAC3BW,YAD2B,GAAAgD,sBAAA,CAC3BhD,YAD2B;YAEnCiD,QAAQ,GAAG,CAACtC,KAAI,CAAClX,KAAL,CAAW9C,QAAZ,IAAwBga,KAAI,CAAClX,KAAL,CAAWyZ,WAAX,CAAuB9a,QAAvB,CAAgC0X,UAAhC,CAAzC;eAEE4B,EAAA,CAAA9L,aAAA,CAAC6K,mBAAD;UACEY,eAAe,EAAEA,eADnB;UAEEvB,UAAU,EAAEA,UAFd;UAGEqB,SAAS,EAAER,KAAI,CAAClX,KAAL,CAAW0X,SAHxB;UAIE7L,MAAM,EAAE2N,QAJV;UAKEzD,UAAU,EAAEQ,YALd;UAMErZ,QAAQ,EAAEga,KAAI,CAAClX,KAAL,CAAW9C,QANvB;UAOE+Z,eAAe,EAAEC,KAAI,CAAClX,KAAL,CAAWiX,eAP9B;UAQEE,eAAe,EAAED,KAAI,CAAClX,KAAL,CAAWmX,eAR9B;UASEY,KAAK,EAAEb,KAAI,CAAClX,KAAL,CAAW+X,KATpB;UAUEC,cAAc,EAAEd,KAAI,CAAClX,KAAL,CAAWgY,cAV7B;UAWExa,GAAG,EAAE6Y;WAEJa,KAAI,CAAClX,KAAL,CAAW9C,QAAX,GACG,IADH,GAEGga,KAAI,CAAClX,KAAL,CAAW0Z,eAAX,CAA2B;UACzBF,QAAQ,EAARA,QADyB;UAEzBjD,YAAY,EAAZA,YAFyB;UAGzBF,UAAU,EAAVA;SAHF,CAfN,CADF;OAHD,CAJH,CADF;;;;EAvDmB4B,EAAK,CAAChM,SAAA;gBAAvB6M,wBAAA,eACe;EACjBpB,SAAS,EAAEiC,iBADM;EAEjBF,WAAW,EAAE3X,oBAAS,CAACX,OAAV,CAAkBW,oBAAS,CAAChB,MAA5B,CAFI;EAGjBmW,eAAe,EAAEnV,oBAAS,CAACjB,IAAV,CAAeN,UAHf;EAIjB4W,eAAe,EAAErV,oBAAS,CAACjB,IAAV,CAAeN,UAJf;EAKjBmZ,eAAe,EAAE5X,oBAAS,CAACjB,IAAV,CAAeN,UALf;EAMjB6Y,gBAAgB,EAAEtX,oBAAS,CAAChB,MAAV,CAAiBP,UANlB;EAOjB8Q,SAAS,EAAEvP,oBAAS,CAACd,MAPJ;EAQjB9D,QAAQ,EAAE4E,oBAAS,CAAClB,IARH;EASjBmX,KAAK,EAAEjW,oBAAS,CAAClB,IATA;EAUjBoX,cAAc,EAAElW,oBAAS,CAAClB,IAVT;;EAYjByX,KAAK,EAAEvW,oBAAS,CAAChB;;gBAbfgY,wBAAA,kBAgBkB;EACpB5b,QAAQ,EAAE,KADU;EAEpB6a,KAAK,EAAE,KAFa;EAGpBC,cAAc,EAAE,KAHI;EAIpBoB,gBAAgB,EAAE,IAJE;EAKpBM,eAAe,EAAE,SAAAA,gBAAA,EAAM;;AAuE3B,SAASE,mBAATA,CAA6Bvd,KAA7B,EAAoC;MAC9B,OAAOA,KAAP,KAAiB,QAArB,EAA+B;WACtB,KAAP;;SAEK0a,WAAW,CAACD,oBAAZ,CAAiCnY,QAAjC,CAA0CtC,KAA1C,CAAP;;AAGF,SAASsd,iBAATA,CAA2B3Z,KAA3B,EAAkCC,QAAlC,EAA4CC,aAA5C,EAA2D;wBACjCF,KAAK,CAACC,QAAD,CAD4B;IACjD0X,KADiD,GAAAkC,eAAA,CACjDlC,KADiD;IAC1CoB,IAD0C,GAAAc,eAAA,CAC1Cd,IAD0C;MAErD,CAACpB,KAAD,IAAU,CAACoB,IAAf,EAAqB;WACZ,IAAIxZ,KAAJ,iBAAA+E,MAAA,CACWrE,QADX,mBAAAqE,MAAA,CACmCpE,aADnC,QAAAoE,MAAA,CACqDrE,QADrD,sDAAP;;MAIE,CAAC2Z,mBAAmB,CAACjC,KAAD,CAApB,IAA+B,CAACiC,mBAAmB,CAACb,IAAD,CAAvD,EAA+D;WACtD,IAAIxZ,KAAJ,iBAAA+E,MAAA,CACWrE,QADX,mBAAAqE,MAAA,CACmCpE,aADnC,QAAAoE,MAAA,CACqDrE,QADrD,8FAAP;;MAIE0X,KAAK,IAAIoB,IAAb,EAAmB;WACV,IAAIxZ,KAAJ,iBAAA+E,MAAA,CACWrE,QADX,mBAAAqE,MAAA,CACmCpE,aADnC,QAAAoE,MAAA,CACqDrE,QADrD,kCAAAqE,MAAA,CAC4FrE,QAD5F,YAAP;;;IClHE6Z,+BAAA,G;;;;;;;;;;;4DAoCI;MACNC,WAAW,EAAE,KADP;MAEN/B,cAAc,EAAE;;wEAwBE,UAAAgC,IAAA,EAA0C;UAAvCC,eAAuC,GAAAD,IAAA,CAAvCC,eAAuC;QAAtBC,eAAsB,GAAAF,IAAA,CAAtBE,eAAsB;UACxDhD,KAAA,CAAKlX,KAAL,CAAW9C,QAAf,EAAyB;;;UAGnBid,YAAY,GAAGC,2BAAU,CAACH,eAAD,EAAkBC,eAAlB,CAA/B;UACMG,YAAY,GAAGD,2BAAU,CAACF,eAAD,EAAkBD,eAAlB,CAA/B;MACAI,YAAY,CAAC3W,OAAb,CAAqB,UAAC2S,UAAD,EAAgB;cAC9BrW,KAAL,CAAWsa,QAAX,CAAoBjE,UAApB;OADF;MAGA8D,YAAY,CAACzW,OAAb,CAAqB,UAAC2S,UAAD,EAAgB;cAC9BrW,KAAL,CAAWua,QAAX,CAAoBlE,UAApB;OADF;;0EAKoB,UAAC7Y,GAAD,EAAS;UACzB,CAAC0Z,KAAA,CAAKlX,KAAL,CAAWwa,iBAAhB,EAAmC;eAC1B,IAAP;;UAEIC,QAAQ,GAAGvD,KAAA,CAAKlX,KAAL,CAAWwa,iBAAX,CAA6BE,IAA7B,CAAkC,UAACC,EAAD;eAAQA,EAAE,CAACnd,GAAH,KAAWA,GAAnB;OAAlC,CAAjB;aACOid,QAAQ,IAAIA,QAAQ,CAACpE,UAA5B;;0EAGoB,UAACA,UAAD,EAAgB;UAChC,CAACa,KAAA,CAAKlX,KAAL,CAAWwa,iBAAhB,EAAmC;eAC1B,IAAP;;UAEIC,QAAQ,GAAGvD,KAAA,CAAKlX,KAAL,CAAWwa,iBAAX,CAA6BE,IAA7B,CAAkC,UAACC,EAAD;eAAQA,EAAE,CAACtE,UAAH,KAAkBA,UAA1B;OAAlC,CAAjB;aACOoE,QAAQ,IAAIA,QAAQ,CAACjd,GAA5B;;gEAGU,UAAC2S,KAAD,EAAW;;UAEjBA,KAAK,CAAClH,OAAN,IAAiBkH,KAAK,CAACjH,OAAvB,IAAkCiH,KAAK,CAAC/G,QAA5C,EAAsD;;;UAGhDiN,UAAU,GAAGa,KAAA,CAAK0D,mBAAL,CAAyBzK,KAAK,CAAC3S,GAA/B,CAAnB;UACI6Y,UAAJ,EAAgB;cACTY,eAAL,CAAqBZ,UAArB;;;8DAIM,UAAClG,KAAD,EAAW;;;;;;UAMbkG,UAAU,GAAGa,KAAA,CAAK0D,mBAAL,CAAyBzK,KAAK,CAAC3S,GAA/B,CAAnB;UACI6Y,UAAJ,EAAgB;cACTc,eAAL,CAAqBd,UAArB;;;sEAIc,UAACA,UAAD,EAAgB;UAC5Ba,KAAA,CAAKlX,KAAL,CAAW9C,QAAf,EAAyB;;OADO;;YAK3B8C,KAAL,CAAWiX,eAAX,CAA2BZ,UAA3B,EAAuCa,KAAA,CAAKlX,KAAL,CAAWyZ,WAAlD;;sEAGgB,UAACpD,UAAD,EAAgB;UAC5Ba,KAAA,CAAKlX,KAAL,CAAW9C,QAAf,EAAyB;;OADO;;YAK3B8C,KAAL,CAAWmX,eAAX,CAA2Bd,UAA3B,EAAuCa,KAAA,CAAKlX,KAAL,CAAWyZ,WAAlD;;kEAGY,YAAM;YACblW,QAAL,CAAc;QACZwW,WAAW,EAAE;OADf;;gEAKU,YAAM;YACXxW,QAAL,CAAc;QACZwW,WAAW,EAAE;OADf;;mEAKa,YAAM;YACdxW,QAAL,CAAc;QACZyU,cAAc,EAAE;OADlB;;sEAKgB,UAAA6C,KAAA,EAA4C;UAAzCxE,UAAyC,GAAAwE,KAAA,CAAzCxE,UAAyC;QAA7BmD,QAA6B,GAAAqB,KAAA,CAA7BrB,QAA6B;QAAnBjD,YAAmB,GAAAsE,KAAA,CAAnBtE,YAAmB;UACtDuE,gBAAgB,GAAG5D,KAAA,CAAK6D,mBAAL,CAAyB1E,UAAzB,CAAzB;aACOa,KAAA,CAAKlX,KAAL,CAAW0Z,eAAX,CAA2B;QAAEoB,gBAAgB,EAAhBA,gBAAF;QAAoBzE,UAAU,EAAVA,UAApB;QAAgCmD,QAAQ,EAARA,QAAhC;QAA0CjD,YAAY,EAAZA;OAArE,CAAP;;;;;;wCA9GkB;MAClBrX,MAAM,CAACgL,gBAAP,CAAwB,SAAxB,EAAmC,KAAK8Q,SAAxC;MACA9b,MAAM,CAACgL,gBAAP,CAAwB,OAAxB,EAAiC,KAAK+Q,OAAtC;;;;2CAGqB;MACrB/b,MAAM,CAACgc,mBAAP,CAA2B,SAA3B,EAAsC,KAAKF,SAA3C;MACA9b,MAAM,CAACgc,mBAAP,CAA2B,OAA3B,EAAoC,KAAKD,OAAzC;;;;uCAGiBE,SAAA,EAAWC,SAAA,EAAW;UACnC,KAAKpb,KAAL,CAAWyZ,WAAX,KAA2B0B,SAAS,CAAC1B,WAAzC,EAAsD;aAC/C4B,iBAAL,CAAuB;UACrBpB,eAAe,EAAEkB,SAAS,CAAC1B,WAAV,IAAyB,EADrB;UAErBS,eAAe,EAAE,KAAKla,KAAL,CAAWyZ,WAAX,IAA0B;SAF7C;;;;;;6BAqGK;aAELxB,EAAA,CAAA9L,aAAA;QACExS,KAAK,EAAE;UAAE0e,KAAK,EAAE,MAAT;UAAiBhb,MAAM,EAAE;SADlC;QAEEib,WAAW,EAAE,KAAKA,WAFpB;QAGEC,SAAS,EAAE,KAAKA,SAHlB;QAIEG,YAAY,EAAE,KAAKA,YAJrB;uBAKc;SAEZT,EAAA,CAAA9L,aAAA,CAAC2M,wBAAD;QACEpB,SAAS,EAAE,KAAK1X,KAAL,CAAW0X,SADxB;QAEET,eAAe,EAAE,KAAKA,eAFxB;QAGEE,eAAe,EAAE,KAAKA,eAHxB;QAIEsC,WAAW,EAAE,KAAKzZ,KAAL,CAAWyZ,WAJ1B;QAKEpI,SAAS,EAAE,KAAKrR,KAAL,CAAWqR,SALxB;QAMEnU,QAAQ,EAAE,KAAK8C,KAAL,CAAW9C,QANvB;QAOEmb,KAAK,EAAE,KAAKrY,KAAL,CAAWqY,KAPpB;QAQEe,gBAAgB,EAAE,KAAKpZ,KAAL,CAAWoZ,gBAR/B;QASErB,KAAK,EAAE,KAAK1N,KAAL,CAAW0P,WATpB;QAUE/B,cAAc,EAAE,KAAK3N,KAAL,CAAW2N,cAV7B;QAWE0B,eAAe,EAAE,KAAKA;QAlB1B,CADF;;;;EA3J0BzB,EAAK,CAAChM,SAAA;gBAA9B6N,+BAAA,eACe;EACjBpC,SAAS,EAAE5V,oBAAS,CAACf,MAAV,CAAiBR,UADX;EAEjBkZ,WAAW,EAAE3X,oBAAS,CAACX,OAAV,CAAkBW,oBAAS,CAAChB,MAAV,CAAiBP,UAAnC,EAA+CA,UAF3C;EAGjB+Z,QAAQ,EAAExY,oBAAS,CAACjB,IAAV,CAAeN,UAHR;EAIjBga,QAAQ,EAAEzY,oBAAS,CAACjB,IAAV,CAAeN,UAJR;EAKjB0W,eAAe,EAAEnV,oBAAS,CAACjB,IAAV,CAAeN,UALf;EAMjB4W,eAAe,EAAErV,oBAAS,CAACjB,IAAV,CAAeN,UANf;EAOjBmZ,eAAe,EAAE5X,oBAAS,CAACjB,IAAV,CAAeN,UAPf;EAQjB8Q,SAAS,EAAEvP,oBAAS,CAACd,MARJ;EASjB9D,QAAQ,EAAE4E,oBAAS,CAAClB,IATH;EAUjByX,KAAK,EAAEvW,oBAAS,CAAChB,MAVA;EAWjBsY,gBAAgB,EAAEtX,oBAAS,CAAChB,MAXX;EAYjB0Z,iBAAiB,EAAE1Y,oBAAS,CAACX,OAAV,CACjBW,oBAAS,CAACH,KAAV,CAAgB;IACdnE,GAAG,EAAEsE,oBAAS,CAACd,MAAV,CAAiBT,UADR;IAEd8V,UAAU,EAAEvU,oBAAS,CAAChB,MAAV,CAAiBP;GAF/B,CADiB;;gBAbjBuZ,+BAAA,kBAqBkB;EACpBJ,eAAe,EAAE,SAAAA,gBAAA4B,KAAA;QAAGR,gBAAH,GAAAQ,KAAA,CAAGR,gBAAH;MAAqBzE,UAArB,GAAAiF,KAAA,CAAqBjF,UAArB;MAAiCmD,QAAjC,GAAA8B,KAAA,CAAiC9B,QAAjC;MAA2CjD,YAA3C,GAAA+E,KAAA,CAA2C/E,YAA3C;WACfuE,gBAAgB,GACd7C,EAAA,CAAA9L,aAAA;MACEkF,SAAS,EAAEzT,oBAAU,CAAC,uBAAD,EAA0B;yCACZ4b,QADY;6CAERjD,YAFQ;0CAGX,CAACA;OAHhB;OAMpBuE,gBAPH,CADc,GAUZ,IAXW;;;ICrBfS,qBAAA,G;;;;;;;;;;;4DAqBI;MACN9B,WAAW,EAAEvC,KAAA,CAAKlX,KAAL,CAAWyZ,WAAX,IAA0B;;0EAgBnB,UAACpD,UAAD,EAAgB;YAC/B9S,QAAL,CAAc,UAAC6X,SAAD,EAAe;;;YAGvBlE,KAAA,CAAKlX,KAAL,CAAWiX,eAAf,EAAgC;gBACzBjX,KAAL,CAAWiX,eAAX,CAA2BZ,UAA3B,EAAuC;YAAE4D,eAAe,EAAEmB,SAAS,CAAC3B;WAApE;SAJyB;;YAQvB2B,SAAS,CAAC3B,WAAV,CAAsB9a,QAAtB,CAA+B0X,UAA/B,CAAJ,EAAgD;iBACvC,IAAP;;eAEK;UACLoD,WAAW,EAAE2B,SAAS,CAAC3B,WAAV,CAAsBnV,MAAtB,CAA6B+R,UAA7B;SADf;OAXF;;0EAiBoB,UAACA,UAAD,EAAgB;YAC/B9S,QAAL,CAAc,UAAC6X,SAAD,EAAe;;;YAGvBlE,KAAA,CAAKlX,KAAL,CAAWmX,eAAf,EAAgC;gBACzBnX,KAAL,CAAWmX,eAAX,CAA2Bd,UAA3B,EAAuC;YAAE4D,eAAe,EAAE/C,KAAA,CAAK7M,KAAL,CAAWoP;WAArE;;eAEK;UACLA,WAAW,EAAE2B,SAAS,CAAC3B,WAAV,CAAsBjW,MAAtB,CAA6B,UAACoS,IAAD;mBAAUS,UAAU,KAAKT,IAAzB;WAA7B;SADf;OANF;;;;;;uCAhCiBuF,SAAA,EAAW;;;UAI1BA,SAAS,CAAC1B,WAAV,KAA0B,KAAKzZ,KAAL,CAAWyZ,WAArC,IACA,KAAKpP,KAAL,CAAWoP,WAAX,KAA2B,KAAKzZ,KAAL,CAAWyZ,WAFxC,EAGE;aACKlW,QAAL,CAAc;UACZkW,WAAW,EAAE,KAAKzZ,KAAL,CAAWyZ,WAAX,IAA0B;SADzC;;;;;6BAqCK;wBACkE,KAAKzZ,KADvE;QACCyZ,WADD,GAAA5B,WAAA,CACC4B,WADD;QACcxC,eADd,GAAAY,WAAA,CACcZ,eADd;QAC+BE,eAD/B,GAAAU,WAAA,CAC+BV,eAD/B;QACmDqE,UADnD,GAAAC,wBAAA,CAAA5D,WAAA;aAGLI,EAAA,CAAA9L,aAAA,CAAC2N,+BAAD,EAAA4B,QAAA;QACEjC,WAAW,EAAE,KAAKpP,KAAL,CAAWoP,WAD1B;QAEExC,eAAe,EAAE,KAAK0E,mBAFxB;QAGExE,eAAe,EAAE,KAAKyE;SAClBJ,UAJN,EADF;;;;EAvEgBvD,EAAK,CAAChM,SAAA;gBAApBsP,qBAAA,eACe;EACjB7D,SAAS,EAAE5V,oBAAS,CAACf,MAAV,CAAiBR,UADX;EAEjBkZ,WAAW,EAAE3X,oBAAS,CAACX,OAAV,CAAkBW,oBAAS,CAAChB,MAAV,CAAiBP,UAAnC,CAFI;EAGjB+Z,QAAQ,EAAExY,oBAAS,CAACjB,IAAV,CAAeN,UAHR;EAIjBga,QAAQ,EAAEzY,oBAAS,CAACjB,IAAV,CAAeN,UAJR;EAKjB0W,eAAe,EAAEnV,oBAAS,CAACjB,IALV;EAMjBsW,eAAe,EAAErV,oBAAS,CAACjB,IANV;EAOjB6Y,eAAe,EAAE5X,oBAAS,CAACjB,IAPV;EAQjBwQ,SAAS,EAAEvP,oBAAS,CAACd,MARJ;EASjB9D,QAAQ,EAAE4E,oBAAS,CAAClB,IATH;EAUjByX,KAAK,EAAEvW,oBAAS,CAAChB,MAVA;EAWjBsY,gBAAgB,EAAEtX,oBAAS,CAAChB,MAXX;EAYjB0Z,iBAAiB,EAAE1Y,oBAAS,CAACX,OAAV,CACjBW,oBAAS,CAACH,KAAV,CAAgB;IACdnE,GAAG,EAAEsE,oBAAS,CAACd,MAAV,CAAiBT,UADR;IAEd8V,UAAU,EAAEvU,oBAAS,CAAChB,MAAV,CAAiBP;GAF/B,CADiB;;AClBvB,SAASsb,uBAATA,CAAA7B,IAAA,EAA0E;MAAvC8B,SAAuC,GAAA9B,IAAA,CAAvC8B,SAAuC;IAA5BC,QAA4B,GAAA/B,IAAA,CAA5B+B,QAA4B;IAAlBC,cAAkB,GAAAhC,IAAA,CAAlBgC,cAAkB;MACpEC,iBAAiB,GAAGH,SAAxB;MACII,eAAe,GAAG,CAAtB;MACI1B,iBAAiB,GAAG,EAAxB;;;EAIE0B,eAAe,GAAGF,cAAc,CAAC7e,MAAjC;EAAA;EAEA8e,iBAAiB,IAAIF,QAJvB,EAKE;QACMve,GAAG,GAAGwe,cAAc,CAACE,eAAD,CAA1B;gCACyBnF,WAAW,CAACH,aAAZ,CAA0BqF,iBAA1B,CAFzB;MAEQ1F,YAFR,GAAAc,qBAAA,CAEQd,YAFR;QAGIA,YAAJ,EAAkB;MAChBiE,iBAAiB,CAACrc,IAAlB,CAAuB;QACrBX,GAAG,EAAEA,GAAG,CAAC2e,IADY;QAErB9F,UAAU,EAAE4F;OAFd;KADF,MAKO;MACLzB,iBAAiB,CAACrc,IAAlB,CAAuB;QACrBX,GAAG,EAAEA,GAAG,CAAC4e,OADY;QAErB/F,UAAU,EAAE4F;OAFd;MAIAC,eAAe,IAAI,CAAnB;;IAEFD,iBAAiB,IAAI,CAArB;;SAEKzB,iBAAP;;AAGF,IAAA6B,iBAAA,GAAe;EACbC,MAAM,EAAET,uBADK;;EAGbU,UAAU,EAAE,CACV;IAAEH,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GADxB,EAEV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAFxB,EAGV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAHxB,EAIV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAJxB,EAKV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GALxB,EAMV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GANxB,EAOV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAPxB,EAQV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GARxB,EASV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GATxB,EAUV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAVxB,CAHC;EAebC,QAAQ,EAAE,CACR;IAAEL,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAD1B,EAER;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAF1B,EAGR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAH1B,EAIR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAJ1B,EAKR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAL1B,EAMR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAN1B,EAOR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAP1B,EAQR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAR1B,EASR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAT1B,EAUR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAV1B,EAWR;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAX1B,CAfG;EA4BbE,UAAU,EAAE,CACV;IAAEN,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GADxB,EAEV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAFxB,EAGV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAHxB,EAIV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAJxB,EAKV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GALxB,EAMV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GANxB,EAOV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAPxB,EAQV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GARxB,EASV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GATxB,EAUV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAVxB,EAWV;IAAEJ,OAAO,EAAE,GAAX;IAAgBD,IAAI,EAAE,GAAtB;IAA2BK,KAAK,EAAE;GAXxB;CA5Bd;;;;;;;;;AChCA,6CAAMjQ,MAAM,GAAG,SAATA,MAAMA,CAAA;EAAA,OACV9S,CAAA;IAAQ4X,SAAS,EAAC;EAAuE,GACvF5X,CAAA;IACEsP,IAAI,EAAC,GAAG;IACRsI,SAAS,EAAC;EAAoE,GAC9E5X,CAAA,aAAI,SAAW,CACd,CAAC,EACJA,CAAA;IACEsP,IAAI,EAAC,QAAQ;IACbsI,SAAS,EAAC;EAAoE,GAC9E5X,CAAA,aAAI,OAAS,CACZ,CAAC,EACJA,CAAA;IACEsP,IAAI,EAAC,OAAO;IACZsI,SAAS,EAAC;EAAoE,GAC9E5X,CAAA,aAAI,MAAQ,CACX,CACG,CAAC;AAAA,CACV;AAEc8S,+DAAM,E;;;;;;;;;;;;;;;;ACpByC;AAE9D,IAAMoQ,SAAS,GAAG,SAAZA,SAASA,CAAA3C,IAAA,EAAsB;EAAA,IAAhB4C,SAAS,GAAA5C,IAAA,CAAT4C,SAAS;EAC5B,IACE3iB,EAAE,GAeA2iB,SAAS,CAfX3iB,EAAE;IACFC,KAAK,GAcH0iB,SAAS,CAdX1iB,KAAK;IACLC,QAAQ,GAaNyiB,SAAS,CAbXziB,QAAQ;IACRC,OAAO,GAYLwiB,SAAS,CAZXxiB,OAAO;IACPC,UAAU,GAWRuiB,SAAS,CAXXviB,UAAU;IACVC,iBAAiB,GAUfsiB,SAAS,CAVXtiB,iBAAiB;IACjBC,EAAE,GASAqiB,SAAS,CATXriB,EAAE;IACFC,OAAO,GAQLoiB,SAAS,CARXpiB,OAAO;IACPC,WAAW,GAOTmiB,SAAS,CAPXniB,WAAW;IACXC,WAAW,GAMTkiB,SAAS,CANXliB,WAAW;IACXC,SAAS,GAKPiiB,SAAS,CALXjiB,SAAS;IACTC,gBAAgB,GAIdgiB,SAAS,CAJXhiB,gBAAgB;IAChBiiB,yBAAyB,GAGvBD,SAAS,CAHXC,yBAAyB;IACzBhiB,0BAA0B,GAExB+hB,SAAS,CAFX/hB,0BAA0B;IAC1BC,2BAA2B,GACzB8hB,SAAS,CADX9hB,2BAA2B;EAG7B,IAAAC,SAAA,GAA8BC,qEAAQ,CAAC,EAAE,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA;IAAnCI,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAC1B,IAAAI,UAAA,GAA0CL,qEAAQ,CAAC,EAAE,CAAC;IAAAM,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA/CE,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EACtC,IAAAwhB,UAAA,GAAgC9hB,qEAAQ,CAAC,EAAE,CAAC;IAAA+hB,UAAA,GAAA7hB,cAAA,CAAA4hB,UAAA;IAArCE,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAE5B,IAAMthB,kBAAkB,GAAGC,oEAAO,CAAC,YAAM;IACvC,IAAI;MACFC,IAAI,CAACC,KAAK,CAACT,OAAO,CAAC;IACrB,CAAC,CAAC,OAAOU,CAAC,EAAE;MACV,OAAO,KAAK;IACd;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAACV,OAAO,CAAC,CAAC;EAEb,IAAMqB,iBAAiB,GAAGT,wEAAW,CACnC,UAACF,CAAC,EAAK;IACLA,CAAC,CAACG,cAAc,CAAC,CAAC;IAClB7B,QAAQ,CAAC0B,CAAC,CAACO,MAAM,CAAClC,KAAK,CAACmC,KAAK,CAAC;EAChC,CAAC,EACD,CAAClC,QAAQ,CACX,CAAC;EAED,OACEV,CAAA;IAAK4X,SAAS,EAAC;EAAqB,GAClC5X,CAAA;IAAK4X,SAAS,EAAC;EAAY,GACzB5X,CAAA,cAAMe,OAAa,CAAC,EACnBP,EAAE,IAAIC,KAAK,IAAIT,CAAA,cAAK,gBAAc,EAACS,KAAW,CAAC,EAChDT,CAAA;IAAMgD,QAAQ,EAAED;EAAkB,GAChC/C,CAAA;IAAOyC,IAAI,EAAC,MAAM;IAACQ,IAAI,EAAC,OAAO;IAACC,WAAW,EAAEzC;EAAM,CAAE,CAAC,EACtDT,CAAA;IAAQyC,IAAI,EAAC;EAAQ,GAAC,IAAU,CAC5B,CACH,CAAC,EAELjC,EAAE,IACDR,CAAA,CAAAmD,QAAA,QACEnD,CAAA,cACGc,EAAE,IAAId,CAAA,cAAK,MAAI,EAACc,EAAQ,CAAC,EACzBI,SAAS,IAAIlB,CAAA,cAAK,aAAW,EAACkC,IAAI,CAACM,SAAS,CAACtB,SAAS,CAAO,CAC3D,CAAC,EAENlB,CAAA,cACEA,CAAA;IAAK4X,SAAS,EAAC;EAAqB,GAClC5X,CAAA;IAAQoD,OAAO,EAAEnC;EAAY,GAAC,cAAoB,CAAC,EACnDjB,CAAA;IAAMgD,QAAQ,EAAEhC;EAAY,GAC1BhB,CAAA;IAAOyC,IAAI,EAAC,MAAM;IAACQ,IAAI,EAAC;EAAS,CAAE,CAAC,EACpCjD,CAAA;IAAQyC,IAAI,EAAC,QAAQ;IAACmV,SAAS,EAAC;EAAM,GAAC,cAE/B,CACJ,CACH,CAAC,EACN5X,CAAA,aAAI,cAEF,EAACY,UAAU,CAACiD,GAAG,CAAC,UAAAud,KAAA;IAAA,IAAG1e,OAAO,GAAA0e,KAAA,CAAP1e,OAAO;MAAE+gB,OAAO,GAAArC,KAAA,CAAPqC,OAAO;IAAA,OACjCzjB,CAAA;MAAI+D,GAAG,EAAErB,OAAQ;MAACkV,SAAS,EAAE;IAAO,GACjClV,OAAO,EAAC,KAAG,EAAC+gB,OAAO,CAAC/f,MAAM,EAAC,YAAU,EAAC+f,OAAO,CAACre,IAAI,CAAC,IAAI,CACtD,CAAC;EAAA,CACN,CACC,CAAC,EACLpF,CAAA,aAAI,eAEF,EAACa,iBAAiB,CAACgD,GAAG,CAAC,UAAAge,KAAA;IAAA,IAAGnf,OAAO,GAAAmf,KAAA,CAAPnf,OAAO;MAAE+gB,OAAO,GAAA5B,KAAA,CAAP4B,OAAO;IAAA,OACxCzjB,CAAA;MAAI+D,GAAG,EAAErB,OAAQ;MAACkV,SAAS,EAAE;IAAO,GACjClV,OAAO,EAAE,GAAG,EACZ+gB,OAAO,CAAC/f,MAAM,QAAAmH,MAAA,CACN4Y,OAAO,CAAC/f,MAAM,gBAAAmH,MAAA,CAAa4Y,OAAO,CAACre,IAAI,CAAC,IAAI,CAAC,IAClD,cACF,CAAC;EAAA,CACN,CACC,CACD,CAAC,EAENpF,CAAA,cACEA,CAAA;IAAK4X,SAAS,EAAC;EAAqB,GAClC5X,CAAA,cACEA,CAAA;IAAOqD,OAAO,EAAC;EAAS,GAAC,SAAc,CAAC,EACxCrD,CAAA;IACEsD,IAAI,EAAE,GAAI;IACVC,IAAI,EAAE,CAAE;IACRN,IAAI,EAAC,SAAS;IACdC,WAAW,kBAAiB;IAC5BN,KAAK,EAAElB,OAAQ;IACf8B,OAAO,EAAE,SAAAA,QAACpB,CAAC;MAAA,OAAKT,UAAU,CAACS,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC;IAAA;EAAC,CAC5C,CACE,CAAC,EACN5C,CAAA,cACEA,CAAA;IAAOqD,OAAO,EAAC;EAAe,GAAC,gBAAqB,CAAC,EACrDrD,CAAA;IACEiD,IAAI,EAAC,eAAe;IACpBR,IAAI,EAAC,MAAM;IACXG,KAAK,EAAEd,aAAc;IACrB0B,OAAO,EAAE,SAAAA,QAACpB,CAAC;MAAA,OAAKL,gBAAgB,CAACK,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC;IAAA;EAAC,CAClD,CACE,CAAC,EACN5C,CAAA,cACEA,CAAA;IAAOqD,OAAO,EAAC;EAAe,GAAC,eAAoB,CAAC,EACpDrD,CAAA;IACEiD,IAAI,EAAC,UAAU;IACfR,IAAI,EAAC,MAAM;IACXG,KAAK,EAAE2gB,QAAS;IAChB/f,OAAO,EAAE,SAAAA,QAACpB,CAAC;MAAA,OAAKohB,WAAW,CAACphB,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC;IAAA;EAAC,CAC7C,CACE,CAAC,EACN5C,CAAA,cACEA,CAAA;IACEyD,QAAQ,EAAE,CAACzB,kBAAmB;IAC9BoB,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAMggB,yBAAyB,CAAC1hB,OAAO,EAAE6hB,QAAQ,CAAC;IAAA;EAAC,GAAC,wBAEvD,CAAC,EACTvjB,CAAA;IACEyD,QAAQ,EAAE,CAACzB,kBAAmB;IAC9BoB,OAAO,EAAE,SAAAA,QAAA;MAAA,OACPhC,0BAA0B,CAACM,OAAO,EAAEI,aAAa,CAAC;IAAA;EACnD,GAAC,iBAEI,CAAC,EACT9B,CAAA;IACEyD,QAAQ,EAAE,CAACzB,kBAAmB;IAC9BoB,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAM/B,2BAA2B,CAACK,OAAO,CAAC;IAAA;EAAC,GAAC,wBAE/C,CAAC,EACT1B,CAAA;IACEyD,QAAQ,EAAE,CAACzB,kBAAmB;IAC9BoB,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAMjC,gBAAgB,CAACO,OAAO,CAAC;IAAA;EAAC,GAAC,WAEpC,CACL,CACF,CAAC,EACL,CAACM,kBAAkB,IAAIN,OAAO,CAACgC,MAAM,GACpC1D,CAAA,cAAK,cAAiB,CAAC,GAEvBA,CAAA,CAAAmD,QAAA,MAAI,CAEH,CAAC,EAENnD,CAAA,cAAK,oBAAuB,CAAC,EAC7BA,CAAA;IAAKE,KAAK,EAAE;MAAEyD,QAAQ,EAAE,QAAQ;MAAEC,MAAM,EAAE;IAAQ;EAAE,GACjDjD,OAAO,CAACkD,GAAG,CAAC,UAACC,IAAI;IAAA,OAChB9D,CAAA;MAAK+D,GAAG,EAAED;IAAK,GAAE5B,IAAI,CAACM,SAAS,CAACsB,IAAI,CAAO,CAAC;EAAA,CAC7C,CACE,CACL,CAED,CAAC;AAEV,CAAC;AAEcof,kEAAS,E;;;;;;;;;ACtKxB;AAAA;AAAgC;AACyB;AAEzD,IAAMnQ,KAAK,GAAG,SAARA,KAAKA,CAAA,EAAS;EAClB,OACE/S,CAAA;IAAKC,KAAK,EAAEC,0DAAK,CAACC;EAAK,GACrBH,CAAA,CAAC0jB,yEAAW,MAAE,CACX,CAAC;AAEV,CAAC;AAEc3Q,8DAAK,E;;;;;;;;ACXpB;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI4Q,KAAqC,EAAE,qCAO1C,MAAM;EACL;EACA;EACAte,MAAM,CAACC,OAAO,GAAGY,mBAAO,CAAC,MAA4B,CAAC,CAAC,CAAC;AAC1D,C;;;;;;;;;;;;;;;;;;;;;;;;;;;AClByE;AAEzE,IAAM3F,KAAK,GAAG,SAARA,KAAKA,CAAA,EAAS;EAClB,IAAAe,SAAA,GAAoBC,qEAAQ,CAAC,IAAI,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA;IAA3Bd,EAAE,GAAAgB,UAAA;IAAEoiB,KAAK,GAAApiB,UAAA;EAChB,IAAAI,UAAA,GAA0BL,qEAAQ,CAAC,EAAE,CAAC;IAAAM,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA/BnB,KAAK,GAAAoB,UAAA;IAAEnB,QAAQ,GAAAmB,UAAA;EACtB,IAAAwhB,UAAA,GAA8B9hB,qEAAQ,CAAC,EAAE,CAAC;IAAA+hB,UAAA,GAAA7hB,cAAA,CAAA4hB,UAAA;IAAnC1iB,OAAO,GAAA2iB,UAAA;IAAEO,UAAU,GAAAP,UAAA;EAC1B,IAAAQ,UAAA,GAAkCviB,qEAAQ,CAAC,IAAI,CAAC;IAAAwiB,UAAA,GAAAtiB,cAAA,CAAAqiB,UAAA;IAAzC5iB,SAAS,GAAA6iB,UAAA;IAAEC,YAAY,GAAAD,UAAA;EAC9B,IAAAE,UAAA,GAAoC1iB,qEAAQ,CAAC,EAAE,CAAC;IAAA2iB,WAAA,GAAAziB,cAAA,CAAAwiB,UAAA;IAAzCrjB,UAAU,GAAAsjB,WAAA;IAAEC,aAAa,GAAAD,WAAA;EAChC,IAAAE,WAAA,GAAkD7iB,qEAAQ,CAAC,EAAE,CAAC;IAAA8iB,WAAA,GAAA5iB,cAAA,CAAA2iB,WAAA;IAAvDvjB,iBAAiB,GAAAwjB,WAAA;IAAEC,oBAAoB,GAAAD,WAAA;EAC9C,IAAAE,WAAA,GAAoBhjB,qEAAQ,CAAC,IAAI,CAAC;IAAAijB,WAAA,GAAA/iB,cAAA,CAAA8iB,WAAA;IAA3BzjB,EAAE,GAAA0jB,WAAA;IAAEC,KAAK,GAAAD,WAAA;EAChB,IAAAE,WAAA,GAA8CnjB,qEAAQ,CAAC,EAAE,CAAC;IAAAojB,WAAA,GAAAljB,cAAA,CAAAijB,WAAA;IAAnDE,eAAe,GAAAD,WAAA;IAAEE,kBAAkB,GAAAF,WAAA;EAE1C,IAAMG,SAAS,GAAGxiB,wEAAW;IAAA,IAAAie,IAAA,GAAAwE,iBAAA,CAAC,WAAOrO,KAAK,EAAK;MAC7C,IAAM5S,IAAI,SAAS5B,IAAI,CAACC,KAAK,CAACuU,KAAK,CAAC5S,IAAI,CAAC;MACzC,QAAQA,IAAI,CAACrB,IAAI;QACf,KAAK,IAAI;UACPgiB,KAAK,CAAC3gB,IAAI,CAAChD,EAAE,CAAC;UACd;QACF,KAAK,WAAW;UACdkjB,YAAY,CAAClgB,IAAI,CAAC5C,SAAS,CAAC;UAC5B;QACF,KAAK,YAAY;UACfijB,aAAa,CAACrgB,IAAI,CAACkhB,QAAQ,CAAC;UAC5B;QACF,KAAK,mBAAmB;UACtBV,oBAAoB,CAACxgB,IAAI,CAACkhB,QAAQ,CAAC;UACnC;QACF;UACEnB,UAAU,CAAC,UAACxZ,CAAC;YAAA,QAAMvG,IAAI,EAAA+G,MAAA,CAAAoa,kBAAA,CAAK5a,CAAC;UAAA,CAAC,CAAC;UAC/B;MACJ;MAEAwa,kBAAkB,CAAC/gB,IAAI,CAAC;IAC1B,CAAC;IAAA,iBAAAohB,GAAA;MAAA,OAAA3E,IAAA,CAAAzb,KAAA,OAAAR,SAAA;IAAA;EAAA,KAAE,EAAE,CAAC;EAENgV,sEAAS,CAAC,YAAM;IACd,IAAI,CAAC7T,MAAM,EAAE;IAEb,IAAM0f,QAAQ,GAAG1f,MAAM,CAACiB,QAAQ,CAACye,QAAQ,CAACjgB,QAAQ,CAAC,OAAO,CAAC,GAAG,KAAK,GAAG,IAAI;IAC1E,IAAMkgB,IAAI,GAAG3f,MAAM,CAACiB,QAAQ,CAACye,QAAQ,CAACjgB,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,OAAO;IACtE,IAAMuH,GAAG,MAAA5B,MAAA,CAAMsa,QAAQ,SAAAta,MAAA,CAAMnE,QAAQ,CAAC2e,QAAQ,EAAAxa,MAAA,CAAGua,IAAI,sBAAmB;IAExE1kB,QAAQ,CAAC+L,GAAG,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN6M,sEAAS,CAAC,YAAM;IACd,IAAI,CAAC7Y,KAAK,CAACiD,MAAM,IAAI,OAAO+B,MAAM,KAAK,WAAW,EAAE;IAEpD6f,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE9kB,KAAK,CAAC;IAE9C,IAAM+kB,YAAY,GAAG,IAAIC,SAAS,CAAChlB,KAAK,CAAC;IACzC+kB,YAAY,CAACE,SAAS,GAAGZ,SAAS;IAElClB,KAAK,CAAC4B,YAAY,CAAC;EACrB,CAAC,EAAE,CAACV,SAAS,EAAErkB,KAAK,CAAC,CAAC;EAEtB,IAAMQ,WAAW,GAAGqB,wEAAW,CAAC,YAAM;IACpC9B,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEmlB,IAAI,CAACzjB,IAAI,CAACM,SAAS,CAAC;MAAEC,IAAI,EAAE;IAAa,CAAC,CAAC,CAAC;IAChDjC,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEmlB,IAAI,CAACzjB,IAAI,CAACM,SAAS,CAAC;MAAEC,IAAI,EAAE;IAAoB,CAAC,CAAC,CAAC;EACzD,CAAC,EAAE,CAACjC,EAAE,CAAC,CAAC;EAER,IAAMO,OAAO,GAAGkB,oEAAO,CAAC,YAAM;IAC5B,IAAI,OAAOwD,MAAM,KAAK,WAAW,EAAE;IAEnC,QAAQjF,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEolB,UAAU;MACpB,KAAKH,SAAS,CAACI,UAAU;QACvB,OAAO,YAAY;MACrB,KAAKJ,SAAS,CAACK,IAAI;QACjB,OAAO,MAAM;MACf,KAAKL,SAAS,CAACM,OAAO;QACpB,OAAO,SAAS;MAClB,KAAKN,SAAS,CAACO,MAAM;QACnB,OAAO,QAAQ;MACjB;QACE,OAAO,eAAe;IAC1B;EACF,CAAC,EAAE,CAACxlB,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEolB,UAAU,CAAC,CAAC;EAEpBtM,sEAAS,CAAC,YAAM;IACd,IAAIvY,OAAO,KAAK,MAAM,EAAEE,WAAW,CAAC,CAAC;EACvC,CAAC,EAAE,CAACA,WAAW,EAAET,EAAE,EAAEO,OAAO,CAAC,CAAC;EAE9B,IAAMC,WAAW,GAAGsB,wEAAW,CAC7B,UAACF,CAAC,EAAK;IACLA,CAAC,CAACG,cAAc,CAAC,CAAC;IAClB/B,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEmlB,IAAI,CACNzjB,IAAI,CAACM,SAAS,CAAC;MAAEC,IAAI,EAAE,aAAa;MAAEC,OAAO,EAAEN,CAAC,CAACO,MAAM,CAACD,OAAO,CAACE;IAAM,CAAC,CACzE,CAAC;EACH,CAAC,EACD,CAACpC,EAAE,CACL,CAAC;EAED,IAAMW,gBAAgB,GAAGmB,wEAAW,CAClC,UAACZ,OAAO;IAAA,OACNX,OAAO,KAAK,MAAM,KAClBP,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEmlB,IAAI,CACNzjB,IAAI,CAACM,SAAS,CAAC;MACbC,IAAI,EAAE,WAAW;MACjBf,OAAO,EAAAukB,aAAA,CAAAA,aAAA,KAAO/jB,IAAI,CAACC,KAAK,CAACT,OAAO,CAAC;QAAEwkB,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;MAAC;IAC1D,CAAC,CACH,CAAC;EAAA,GACH,CAAC5lB,EAAE,EAAEO,OAAO,CACd,CAAC;EAED,IAAMK,0BAA0B,GAAGkB,wEAAW,CAC5C,UAACZ,OAAO,EAAEgB,OAAO,EAAK;IACpB3B,OAAO,KAAK,MAAM,KAChBP,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEmlB,IAAI,CACNzjB,IAAI,CAACM,SAAS,CAAAyjB,aAAA,CAAAA,aAAA,KACT/jB,IAAI,CAACC,KAAK,CAACT,OAAO,CAAC;MACtBwkB,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;MACrB1jB,OAAO,EAAPA;IAAO,EACR,CACH,CAAC;EACL,CAAC,EACD,CAAClC,EAAE,EAAEO,OAAO,CACd,CAAC;EAED,IAAMqiB,yBAAyB,GAAG9gB,wEAAW,CAC3C,UAACZ,OAAO,EAAE6hB,QAAQ,EAAK;IACrB+B,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE7jB,OAAO,EAAE6hB,QAAQ,CAAC;IACtDxiB,OAAO,KAAK,MAAM,KAChBP,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEmlB,IAAI,CACNzjB,IAAI,CAACM,SAAS,CAAAyjB,aAAA,CAAAA,aAAA,KACT/jB,IAAI,CAACC,KAAK,CAACT,OAAO,CAAC;MACtBwkB,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;MACrB7C,QAAQ,EAARA;IAAQ,EACT,CACH,CAAC;EACL,CAAC,EACD,CAAC/iB,EAAE,EAAEO,OAAO,CACd,CAAC;EAED,IAAMM,2BAA2B,GAAGiB,wEAAW,CAC7C,UAACZ,OAAO,EAAK;IACXX,OAAO,KAAK,MAAM,KAChBP,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEmlB,IAAI,CACNzjB,IAAI,CAACM,SAAS,CAAAyjB,aAAA,CAAAA,aAAA,KAAM/jB,IAAI,CAACC,KAAK,CAACT,OAAO,CAAC;MAAEwkB,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;IAAC,EAAE,CAClE,CAAC;EACL,CAAC,EACD,CAAC5lB,EAAE,EAAEO,OAAO,CACd,CAAC;EAED,OAAO;IACLP,EAAE,EAAFA,EAAE;IACFC,KAAK,EAALA,KAAK;IACLC,QAAQ,EAARA,QAAQ;IACRC,OAAO,EAAPA,OAAO;IACPC,UAAU,EAAVA,UAAU;IACVC,iBAAiB,EAAjBA,iBAAiB;IACjBC,EAAE,EAAFA,EAAE;IACF8jB,eAAe,EAAfA,eAAe;IACf7jB,OAAO,EAAPA,OAAO;IACPC,WAAW,EAAXA,WAAW;IACXC,WAAW,EAAXA,WAAW;IACXC,SAAS,EAATA,SAAS;IACTC,gBAAgB,EAAhBA,gBAAgB;IAChBiiB,yBAAyB,EAAzBA,yBAAyB;IACzBhiB,0BAA0B,EAA1BA,0BAA0B;IAC1BC,2BAA2B,EAA3BA;EACF,CAAC;AACH,CAAC;AAEcd,8DAAK,E;;;;;;;;ACnKpB;AACe,0DAAC,kDAAkD,E;;;;;;;;ACDlE;AAAA;AAAgC;AACuB;AAEvD,IAAMwS,KAAK,GAAG,SAARA,KAAKA,CAAA,EAAS;EAClB,OACE/S,CAAA;IAAKC,KAAK,EAAEC,0DAAK,CAACC;EAAK,GACrBH,CAAA,CAACqmB,wEAAU,MAAE,CACV,CAAC;AAEV,CAAC;AAEctT,8DAAK,E;;;;;;;;;ACXpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAIuT,gBAAgB,GAAG,GAAG;;AAE1B;AACA,IAAIC,cAAc,GAAG,2BAA2B;;AAEhD;AACA,IAAIC,gBAAgB,GAAG,gBAAgB;;AAEvC;AACA,IAAIC,OAAO,GAAG,oBAAoB;EAC9BC,OAAO,GAAG,mBAAmB;EAC7BC,MAAM,GAAG,4BAA4B;;AAEzC;AACA;AACA;AACA;AACA,IAAIC,YAAY,GAAG,qBAAqB;;AAExC;AACA,IAAIC,YAAY,GAAG,6BAA6B;;AAEhD;AACA,IAAIC,UAAU,GAAG,QAAOC,MAAM,iCAAAtiB,OAAA,CAANsiB,MAAM,MAAI,QAAQ,IAAIA,MAAM,IAAIA,MAAM,CAAC/hB,MAAM,KAAKA,MAAM,IAAI+hB,MAAM;;AAE1F;AACA,IAAIC,QAAQ,GAAG,QAAOC,IAAI,iCAAAxiB,OAAA,CAAJwiB,IAAI,MAAI,QAAQ,IAAIA,IAAI,IAAIA,IAAI,CAACjiB,MAAM,KAAKA,MAAM,IAAIiiB,IAAI;;AAEhF;AACA,IAAIC,IAAI,GAAGJ,UAAU,IAAIE,QAAQ,IAAIG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASriB,KAAKA,CAACsC,IAAI,EAAEggB,OAAO,EAAEC,IAAI,EAAE;EAClC,QAAQA,IAAI,CAAC3jB,MAAM;IACjB,KAAK,CAAC;MAAE,OAAO0D,IAAI,CAACjC,IAAI,CAACiiB,OAAO,CAAC;IACjC,KAAK,CAAC;MAAE,OAAOhgB,IAAI,CAACjC,IAAI,CAACiiB,OAAO,EAAEC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC1C,KAAK,CAAC;MAAE,OAAOjgB,IAAI,CAACjC,IAAI,CAACiiB,OAAO,EAAEC,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,CAAC;IACnD,KAAK,CAAC;MAAE,OAAOjgB,IAAI,CAACjC,IAAI,CAACiiB,OAAO,EAAEC,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,CAAC;EAC9D;EACA,OAAOjgB,IAAI,CAACtC,KAAK,CAACsiB,OAAO,EAAEC,IAAI,CAAC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,aAAaA,CAACrgB,KAAK,EAAErE,KAAK,EAAE;EACnC,IAAIc,MAAM,GAAGuD,KAAK,GAAGA,KAAK,CAACvD,MAAM,GAAG,CAAC;EACrC,OAAO,CAAC,CAACA,MAAM,IAAI6jB,WAAW,CAACtgB,KAAK,EAAErE,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;AACtD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS4kB,iBAAiBA,CAACvgB,KAAK,EAAErE,KAAK,EAAE6kB,UAAU,EAAE;EACnD,IAAIxZ,KAAK,GAAG,CAAC,CAAC;IACVvK,MAAM,GAAGuD,KAAK,GAAGA,KAAK,CAACvD,MAAM,GAAG,CAAC;EAErC,OAAO,EAAEuK,KAAK,GAAGvK,MAAM,EAAE;IACvB,IAAI+jB,UAAU,CAAC7kB,KAAK,EAAEqE,KAAK,CAACgH,KAAK,CAAC,CAAC,EAAE;MACnC,OAAO,IAAI;IACb;EACF;EACA,OAAO,KAAK;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASyZ,QAAQA,CAACzgB,KAAK,EAAE0gB,QAAQ,EAAE;EACjC,IAAI1Z,KAAK,GAAG,CAAC,CAAC;IACVvK,MAAM,GAAGuD,KAAK,GAAGA,KAAK,CAACvD,MAAM,GAAG,CAAC;IACjCkkB,MAAM,GAAGjjB,KAAK,CAACjB,MAAM,CAAC;EAE1B,OAAO,EAAEuK,KAAK,GAAGvK,MAAM,EAAE;IACvBkkB,MAAM,CAAC3Z,KAAK,CAAC,GAAG0Z,QAAQ,CAAC1gB,KAAK,CAACgH,KAAK,CAAC,EAAEA,KAAK,EAAEhH,KAAK,CAAC;EACtD;EACA,OAAO2gB,MAAM;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,SAASA,CAAC5gB,KAAK,EAAE6gB,MAAM,EAAE;EAChC,IAAI7Z,KAAK,GAAG,CAAC,CAAC;IACVvK,MAAM,GAAGokB,MAAM,CAACpkB,MAAM;IACtBqkB,MAAM,GAAG9gB,KAAK,CAACvD,MAAM;EAEzB,OAAO,EAAEuK,KAAK,GAAGvK,MAAM,EAAE;IACvBuD,KAAK,CAAC8gB,MAAM,GAAG9Z,KAAK,CAAC,GAAG6Z,MAAM,CAAC7Z,KAAK,CAAC;EACvC;EACA,OAAOhH,KAAK;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS+gB,aAAaA,CAAC/gB,KAAK,EAAEghB,SAAS,EAAEC,SAAS,EAAEC,SAAS,EAAE;EAC7D,IAAIzkB,MAAM,GAAGuD,KAAK,CAACvD,MAAM;IACrBuK,KAAK,GAAGia,SAAS,IAAIC,SAAS,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;EAE5C,OAAQA,SAAS,GAAGla,KAAK,EAAE,GAAG,EAAEA,KAAK,GAAGvK,MAAM,EAAG;IAC/C,IAAIukB,SAAS,CAAChhB,KAAK,CAACgH,KAAK,CAAC,EAAEA,KAAK,EAAEhH,KAAK,CAAC,EAAE;MACzC,OAAOgH,KAAK;IACd;EACF;EACA,OAAO,CAAC,CAAC;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASsZ,WAAWA,CAACtgB,KAAK,EAAErE,KAAK,EAAEslB,SAAS,EAAE;EAC5C,IAAItlB,KAAK,KAAKA,KAAK,EAAE;IACnB,OAAOolB,aAAa,CAAC/gB,KAAK,EAAEmhB,SAAS,EAAEF,SAAS,CAAC;EACnD;EACA,IAAIja,KAAK,GAAGia,SAAS,GAAG,CAAC;IACrBxkB,MAAM,GAAGuD,KAAK,CAACvD,MAAM;EAEzB,OAAO,EAAEuK,KAAK,GAAGvK,MAAM,EAAE;IACvB,IAAIuD,KAAK,CAACgH,KAAK,CAAC,KAAKrL,KAAK,EAAE;MAC1B,OAAOqL,KAAK;IACd;EACF;EACA,OAAO,CAAC,CAAC;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASma,SAASA,CAACxlB,KAAK,EAAE;EACxB,OAAOA,KAAK,KAAKA,KAAK;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASylB,SAASA,CAACjhB,IAAI,EAAE;EACvB,OAAO,UAASxE,KAAK,EAAE;IACrB,OAAOwE,IAAI,CAACxE,KAAK,CAAC;EACpB,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS0lB,QAAQA,CAACrL,KAAK,EAAElZ,GAAG,EAAE;EAC5B,OAAOkZ,KAAK,CAACsL,GAAG,CAACxkB,GAAG,CAAC;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASykB,QAAQA,CAAClhB,MAAM,EAAEvD,GAAG,EAAE;EAC7B,OAAOuD,MAAM,IAAI,IAAI,GAAGmhB,SAAS,GAAGnhB,MAAM,CAACvD,GAAG,CAAC;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS2kB,YAAYA,CAAC9lB,KAAK,EAAE;EAC3B;EACA;EACA,IAAIglB,MAAM,GAAG,KAAK;EAClB,IAAIhlB,KAAK,IAAI,IAAI,IAAI,OAAOA,KAAK,CAACmC,QAAQ,IAAI,UAAU,EAAE;IACxD,IAAI;MACF6iB,MAAM,GAAG,CAAC,EAAEhlB,KAAK,GAAG,EAAE,CAAC;IACzB,CAAC,CAAC,OAAOR,CAAC,EAAE,CAAC;EACf;EACA,OAAOwlB,MAAM;AACf;;AAEA;AACA,IAAIe,UAAU,GAAGhkB,KAAK,CAACM,SAAS;EAC5B2jB,SAAS,GAAGzB,QAAQ,CAACliB,SAAS;EAC9B4jB,WAAW,GAAG7jB,MAAM,CAACC,SAAS;;AAElC;AACA,IAAI6jB,UAAU,GAAG5B,IAAI,CAAC,oBAAoB,CAAC;;AAE3C;AACA,IAAI6B,UAAU,GAAI,YAAW;EAC3B,IAAIC,GAAG,GAAG,QAAQ,CAACxc,IAAI,CAACsc,UAAU,IAAIA,UAAU,CAACG,IAAI,IAAIH,UAAU,CAACG,IAAI,CAACC,QAAQ,IAAI,EAAE,CAAC;EACxF,OAAOF,GAAG,GAAI,gBAAgB,GAAGA,GAAG,GAAI,EAAE;AAC5C,CAAC,CAAC,CAAE;;AAEJ;AACA,IAAIG,YAAY,GAAGP,SAAS,CAAC7jB,QAAQ;;AAErC;AACA,IAAId,cAAc,GAAG4kB,WAAW,CAAC5kB,cAAc;;AAE/C;AACA;AACA;AACA;AACA;AACA,IAAImlB,cAAc,GAAGP,WAAW,CAAC9jB,QAAQ;;AAEzC;AACA,IAAIskB,UAAU,GAAGC,MAAM,CAAC,GAAG,GACzBH,YAAY,CAAChkB,IAAI,CAAClB,cAAc,CAAC,CAACmJ,OAAO,CAACwZ,YAAY,EAAE,MAAM,CAAC,CAC9DxZ,OAAO,CAAC,wDAAwD,EAAE,OAAO,CAAC,GAAG,GAChF,CAAC;;AAED;AACA,IAAIqG,OAAM,GAAGyT,IAAI,CAACzT,MAAM;EACpB8V,oBAAoB,GAAGV,WAAW,CAACU,oBAAoB;EACvD7X,MAAM,GAAGiX,UAAU,CAACjX,MAAM;EAC1B8X,gBAAgB,GAAG/V,OAAM,GAAGA,OAAM,CAACgW,kBAAkB,GAAGhB,SAAS;;AAErE;AACA,IAAIiB,SAAS,GAAGpc,IAAI,CAACD,GAAG;;AAExB;AACA,IAAIsI,GAAG,GAAGgU,SAAS,CAACzC,IAAI,EAAE,KAAK,CAAC;EAC5B0C,YAAY,GAAGD,SAAS,CAAC3kB,MAAM,EAAE,QAAQ,CAAC;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS6kB,IAAIA,CAACC,OAAO,EAAE;EACrB,IAAI7b,KAAK,GAAG,CAAC,CAAC;IACVvK,MAAM,GAAGomB,OAAO,GAAGA,OAAO,CAACpmB,MAAM,GAAG,CAAC;EAEzC,IAAI,CAACqmB,KAAK,CAAC,CAAC;EACZ,OAAO,EAAE9b,KAAK,GAAGvK,MAAM,EAAE;IACvB,IAAIsmB,KAAK,GAAGF,OAAO,CAAC7b,KAAK,CAAC;IAC1B,IAAI,CAAC4H,GAAG,CAACmU,KAAK,CAAC,CAAC,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,CAAC;EAC9B;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,SAASA,CAAA,EAAG;EACnB,IAAI,CAACC,QAAQ,GAAGN,YAAY,GAAGA,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACxD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASO,UAAUA,CAACpmB,GAAG,EAAE;EACvB,OAAO,IAAI,CAACwkB,GAAG,CAACxkB,GAAG,CAAC,IAAI,OAAO,IAAI,CAACmmB,QAAQ,CAACnmB,GAAG,CAAC;AACnD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASqmB,OAAOA,CAACrmB,GAAG,EAAE;EACpB,IAAID,IAAI,GAAG,IAAI,CAAComB,QAAQ;EACxB,IAAIN,YAAY,EAAE;IAChB,IAAIhC,MAAM,GAAG9jB,IAAI,CAACC,GAAG,CAAC;IACtB,OAAO6jB,MAAM,KAAKrB,cAAc,GAAGkC,SAAS,GAAGb,MAAM;EACvD;EACA,OAAO3jB,cAAc,CAACkB,IAAI,CAACrB,IAAI,EAAEC,GAAG,CAAC,GAAGD,IAAI,CAACC,GAAG,CAAC,GAAG0kB,SAAS;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS4B,OAAOA,CAACtmB,GAAG,EAAE;EACpB,IAAID,IAAI,GAAG,IAAI,CAAComB,QAAQ;EACxB,OAAON,YAAY,GAAG9lB,IAAI,CAACC,GAAG,CAAC,KAAK0kB,SAAS,GAAGxkB,cAAc,CAACkB,IAAI,CAACrB,IAAI,EAAEC,GAAG,CAAC;AAChF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASumB,OAAOA,CAACvmB,GAAG,EAAEnB,KAAK,EAAE;EAC3B,IAAIkB,IAAI,GAAG,IAAI,CAAComB,QAAQ;EACxBpmB,IAAI,CAACC,GAAG,CAAC,GAAI6lB,YAAY,IAAIhnB,KAAK,KAAK6lB,SAAS,GAAIlC,cAAc,GAAG3jB,KAAK;EAC1E,OAAO,IAAI;AACb;;AAEA;AACAinB,IAAI,CAAC5kB,SAAS,CAAC8kB,KAAK,GAAGE,SAAS;AAChCJ,IAAI,CAAC5kB,SAAS,CAAC,QAAQ,CAAC,GAAGklB,UAAU;AACrCN,IAAI,CAAC5kB,SAAS,CAACyQ,GAAG,GAAG0U,OAAO;AAC5BP,IAAI,CAAC5kB,SAAS,CAACsjB,GAAG,GAAG8B,OAAO;AAC5BR,IAAI,CAAC5kB,SAAS,CAAC4Q,GAAG,GAAGyU,OAAO;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,SAASA,CAACT,OAAO,EAAE;EAC1B,IAAI7b,KAAK,GAAG,CAAC,CAAC;IACVvK,MAAM,GAAGomB,OAAO,GAAGA,OAAO,CAACpmB,MAAM,GAAG,CAAC;EAEzC,IAAI,CAACqmB,KAAK,CAAC,CAAC;EACZ,OAAO,EAAE9b,KAAK,GAAGvK,MAAM,EAAE;IACvB,IAAIsmB,KAAK,GAAGF,OAAO,CAAC7b,KAAK,CAAC;IAC1B,IAAI,CAAC4H,GAAG,CAACmU,KAAK,CAAC,CAAC,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,CAAC;EAC9B;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASQ,cAAcA,CAAA,EAAG;EACxB,IAAI,CAACN,QAAQ,GAAG,EAAE;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASO,eAAeA,CAAC1mB,GAAG,EAAE;EAC5B,IAAID,IAAI,GAAG,IAAI,CAAComB,QAAQ;IACpBjc,KAAK,GAAGyc,YAAY,CAAC5mB,IAAI,EAAEC,GAAG,CAAC;EAEnC,IAAIkK,KAAK,GAAG,CAAC,EAAE;IACb,OAAO,KAAK;EACd;EACA,IAAI0c,SAAS,GAAG7mB,IAAI,CAACJ,MAAM,GAAG,CAAC;EAC/B,IAAIuK,KAAK,IAAI0c,SAAS,EAAE;IACtB7mB,IAAI,CAAC+Q,GAAG,CAAC,CAAC;EACZ,CAAC,MAAM;IACLnD,MAAM,CAACvM,IAAI,CAACrB,IAAI,EAAEmK,KAAK,EAAE,CAAC,CAAC;EAC7B;EACA,OAAO,IAAI;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS2c,YAAYA,CAAC7mB,GAAG,EAAE;EACzB,IAAID,IAAI,GAAG,IAAI,CAAComB,QAAQ;IACpBjc,KAAK,GAAGyc,YAAY,CAAC5mB,IAAI,EAAEC,GAAG,CAAC;EAEnC,OAAOkK,KAAK,GAAG,CAAC,GAAGwa,SAAS,GAAG3kB,IAAI,CAACmK,KAAK,CAAC,CAAC,CAAC,CAAC;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS4c,YAAYA,CAAC9mB,GAAG,EAAE;EACzB,OAAO2mB,YAAY,CAAC,IAAI,CAACR,QAAQ,EAAEnmB,GAAG,CAAC,GAAG,CAAC,CAAC;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS+mB,YAAYA,CAAC/mB,GAAG,EAAEnB,KAAK,EAAE;EAChC,IAAIkB,IAAI,GAAG,IAAI,CAAComB,QAAQ;IACpBjc,KAAK,GAAGyc,YAAY,CAAC5mB,IAAI,EAAEC,GAAG,CAAC;EAEnC,IAAIkK,KAAK,GAAG,CAAC,EAAE;IACbnK,IAAI,CAACY,IAAI,CAAC,CAACX,GAAG,EAAEnB,KAAK,CAAC,CAAC;EACzB,CAAC,MAAM;IACLkB,IAAI,CAACmK,KAAK,CAAC,CAAC,CAAC,CAAC,GAAGrL,KAAK;EACxB;EACA,OAAO,IAAI;AACb;;AAEA;AACA2nB,SAAS,CAACtlB,SAAS,CAAC8kB,KAAK,GAAGS,cAAc;AAC1CD,SAAS,CAACtlB,SAAS,CAAC,QAAQ,CAAC,GAAGwlB,eAAe;AAC/CF,SAAS,CAACtlB,SAAS,CAACyQ,GAAG,GAAGkV,YAAY;AACtCL,SAAS,CAACtlB,SAAS,CAACsjB,GAAG,GAAGsC,YAAY;AACtCN,SAAS,CAACtlB,SAAS,CAAC4Q,GAAG,GAAGiV,YAAY;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAACjB,OAAO,EAAE;EACzB,IAAI7b,KAAK,GAAG,CAAC,CAAC;IACVvK,MAAM,GAAGomB,OAAO,GAAGA,OAAO,CAACpmB,MAAM,GAAG,CAAC;EAEzC,IAAI,CAACqmB,KAAK,CAAC,CAAC;EACZ,OAAO,EAAE9b,KAAK,GAAGvK,MAAM,EAAE;IACvB,IAAIsmB,KAAK,GAAGF,OAAO,CAAC7b,KAAK,CAAC;IAC1B,IAAI,CAAC4H,GAAG,CAACmU,KAAK,CAAC,CAAC,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,CAAC;EAC9B;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASgB,aAAaA,CAAA,EAAG;EACvB,IAAI,CAACd,QAAQ,GAAG;IACd,MAAM,EAAE,IAAIL,IAAI,CAAD,CAAC;IAChB,KAAK,EAAE,KAAKlU,GAAG,IAAI4U,SAAS,GAAC;IAC7B,QAAQ,EAAE,IAAIV,IAAI,CAAD;EACnB,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASoB,cAAcA,CAAClnB,GAAG,EAAE;EAC3B,OAAOmnB,UAAU,CAAC,IAAI,EAAEnnB,GAAG,CAAC,CAAC,QAAQ,CAAC,CAACA,GAAG,CAAC;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASonB,WAAWA,CAACpnB,GAAG,EAAE;EACxB,OAAOmnB,UAAU,CAAC,IAAI,EAAEnnB,GAAG,CAAC,CAAC2R,GAAG,CAAC3R,GAAG,CAAC;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASqnB,WAAWA,CAACrnB,GAAG,EAAE;EACxB,OAAOmnB,UAAU,CAAC,IAAI,EAAEnnB,GAAG,CAAC,CAACwkB,GAAG,CAACxkB,GAAG,CAAC;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASsnB,WAAWA,CAACtnB,GAAG,EAAEnB,KAAK,EAAE;EAC/BsoB,UAAU,CAAC,IAAI,EAAEnnB,GAAG,CAAC,CAAC8R,GAAG,CAAC9R,GAAG,EAAEnB,KAAK,CAAC;EACrC,OAAO,IAAI;AACb;;AAEA;AACAmoB,QAAQ,CAAC9lB,SAAS,CAAC8kB,KAAK,GAAGiB,aAAa;AACxCD,QAAQ,CAAC9lB,SAAS,CAAC,QAAQ,CAAC,GAAGgmB,cAAc;AAC7CF,QAAQ,CAAC9lB,SAAS,CAACyQ,GAAG,GAAGyV,WAAW;AACpCJ,QAAQ,CAAC9lB,SAAS,CAACsjB,GAAG,GAAG6C,WAAW;AACpCL,QAAQ,CAAC9lB,SAAS,CAAC4Q,GAAG,GAAGwV,WAAW;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAACxD,MAAM,EAAE;EACxB,IAAI7Z,KAAK,GAAG,CAAC,CAAC;IACVvK,MAAM,GAAGokB,MAAM,GAAGA,MAAM,CAACpkB,MAAM,GAAG,CAAC;EAEvC,IAAI,CAACwmB,QAAQ,GAAG,IAAIa,QAAQ,CAAD,CAAC;EAC5B,OAAO,EAAE9c,KAAK,GAAGvK,MAAM,EAAE;IACvB,IAAI,CAAC6nB,GAAG,CAACzD,MAAM,CAAC7Z,KAAK,CAAC,CAAC;EACzB;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASud,WAAWA,CAAC5oB,KAAK,EAAE;EAC1B,IAAI,CAACsnB,QAAQ,CAACrU,GAAG,CAACjT,KAAK,EAAE2jB,cAAc,CAAC;EACxC,OAAO,IAAI;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASkF,WAAWA,CAAC7oB,KAAK,EAAE;EAC1B,OAAO,IAAI,CAACsnB,QAAQ,CAAC3B,GAAG,CAAC3lB,KAAK,CAAC;AACjC;;AAEA;AACA0oB,QAAQ,CAACrmB,SAAS,CAACsmB,GAAG,GAAGD,QAAQ,CAACrmB,SAAS,CAACP,IAAI,GAAG8mB,WAAW;AAC9DF,QAAQ,CAACrmB,SAAS,CAACsjB,GAAG,GAAGkD,WAAW;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASf,YAAYA,CAACzjB,KAAK,EAAElD,GAAG,EAAE;EAChC,IAAIL,MAAM,GAAGuD,KAAK,CAACvD,MAAM;EACzB,OAAOA,MAAM,EAAE,EAAE;IACf,IAAIgoB,EAAE,CAACzkB,KAAK,CAACvD,MAAM,CAAC,CAAC,CAAC,CAAC,EAAEK,GAAG,CAAC,EAAE;MAC7B,OAAOL,MAAM;IACf;EACF;EACA,OAAO,CAAC,CAAC;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASioB,cAAcA,CAAC1kB,KAAK,EAAE6gB,MAAM,EAAEH,QAAQ,EAAEF,UAAU,EAAE;EAC3D,IAAIxZ,KAAK,GAAG,CAAC,CAAC;IACV/I,QAAQ,GAAGoiB,aAAa;IACxBsE,QAAQ,GAAG,IAAI;IACfloB,MAAM,GAAGuD,KAAK,CAACvD,MAAM;IACrBkkB,MAAM,GAAG,EAAE;IACXiE,YAAY,GAAG/D,MAAM,CAACpkB,MAAM;EAEhC,IAAI,CAACA,MAAM,EAAE;IACX,OAAOkkB,MAAM;EACf;EACA,IAAID,QAAQ,EAAE;IACZG,MAAM,GAAGJ,QAAQ,CAACI,MAAM,EAAEO,SAAS,CAACV,QAAQ,CAAC,CAAC;EAChD;EACA,IAAIF,UAAU,EAAE;IACdviB,QAAQ,GAAGsiB,iBAAiB;IAC5BoE,QAAQ,GAAG,KAAK;EAClB,CAAC,MACI,IAAI9D,MAAM,CAACpkB,MAAM,IAAI4iB,gBAAgB,EAAE;IAC1CphB,QAAQ,GAAGojB,QAAQ;IACnBsD,QAAQ,GAAG,KAAK;IAChB9D,MAAM,GAAG,IAAIwD,QAAQ,CAACxD,MAAM,CAAC;EAC/B;EACAgE,KAAK,EACL,OAAO,EAAE7d,KAAK,GAAGvK,MAAM,EAAE;IACvB,IAAId,KAAK,GAAGqE,KAAK,CAACgH,KAAK,CAAC;MACpB8d,QAAQ,GAAGpE,QAAQ,GAAGA,QAAQ,CAAC/kB,KAAK,CAAC,GAAGA,KAAK;IAEjDA,KAAK,GAAI6kB,UAAU,IAAI7kB,KAAK,KAAK,CAAC,GAAIA,KAAK,GAAG,CAAC;IAC/C,IAAIgpB,QAAQ,IAAIG,QAAQ,KAAKA,QAAQ,EAAE;MACrC,IAAIC,WAAW,GAAGH,YAAY;MAC9B,OAAOG,WAAW,EAAE,EAAE;QACpB,IAAIlE,MAAM,CAACkE,WAAW,CAAC,KAAKD,QAAQ,EAAE;UACpC,SAASD,KAAK;QAChB;MACF;MACAlE,MAAM,CAACljB,IAAI,CAAC9B,KAAK,CAAC;IACpB,CAAC,MACI,IAAI,CAACsC,QAAQ,CAAC4iB,MAAM,EAAEiE,QAAQ,EAAEtE,UAAU,CAAC,EAAE;MAChDG,MAAM,CAACljB,IAAI,CAAC9B,KAAK,CAAC;IACpB;EACF;EACA,OAAOglB,MAAM;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASqE,WAAWA,CAAChlB,KAAK,EAAEilB,KAAK,EAAEjE,SAAS,EAAEkE,QAAQ,EAAEvE,MAAM,EAAE;EAC9D,IAAI3Z,KAAK,GAAG,CAAC,CAAC;IACVvK,MAAM,GAAGuD,KAAK,CAACvD,MAAM;EAEzBukB,SAAS,KAAKA,SAAS,GAAGmE,aAAa,CAAC;EACxCxE,MAAM,KAAKA,MAAM,GAAG,EAAE,CAAC;EAEvB,OAAO,EAAE3Z,KAAK,GAAGvK,MAAM,EAAE;IACvB,IAAId,KAAK,GAAGqE,KAAK,CAACgH,KAAK,CAAC;IACxB,IAAIie,KAAK,GAAG,CAAC,IAAIjE,SAAS,CAACrlB,KAAK,CAAC,EAAE;MACjC,IAAIspB,KAAK,GAAG,CAAC,EAAE;QACb;QACAD,WAAW,CAACrpB,KAAK,EAAEspB,KAAK,GAAG,CAAC,EAAEjE,SAAS,EAAEkE,QAAQ,EAAEvE,MAAM,CAAC;MAC5D,CAAC,MAAM;QACLC,SAAS,CAACD,MAAM,EAAEhlB,KAAK,CAAC;MAC1B;IACF,CAAC,MAAM,IAAI,CAACupB,QAAQ,EAAE;MACpBvE,MAAM,CAACA,MAAM,CAAClkB,MAAM,CAAC,GAAGd,KAAK;IAC/B;EACF;EACA,OAAOglB,MAAM;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASyE,YAAYA,CAACzpB,KAAK,EAAE;EAC3B,IAAI,CAAC0pB,QAAQ,CAAC1pB,KAAK,CAAC,IAAI2pB,QAAQ,CAAC3pB,KAAK,CAAC,EAAE;IACvC,OAAO,KAAK;EACd;EACA,IAAI4pB,OAAO,GAAIC,UAAU,CAAC7pB,KAAK,CAAC,IAAI8lB,YAAY,CAAC9lB,KAAK,CAAC,GAAIymB,UAAU,GAAGxC,YAAY;EACpF,OAAO2F,OAAO,CAACtW,IAAI,CAACwW,QAAQ,CAAC9pB,KAAK,CAAC,CAAC;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS+pB,QAAQA,CAACvlB,IAAI,EAAEzB,KAAK,EAAE;EAC7BA,KAAK,GAAG+jB,SAAS,CAAC/jB,KAAK,KAAK8iB,SAAS,GAAIrhB,IAAI,CAAC1D,MAAM,GAAG,CAAC,GAAIiC,KAAK,EAAE,CAAC,CAAC;EACrE,OAAO,YAAW;IAChB,IAAI0hB,IAAI,GAAG/iB,SAAS;MAChB2J,KAAK,GAAG,CAAC,CAAC;MACVvK,MAAM,GAAGgmB,SAAS,CAACrC,IAAI,CAAC3jB,MAAM,GAAGiC,KAAK,EAAE,CAAC,CAAC;MAC1CsB,KAAK,GAAGtC,KAAK,CAACjB,MAAM,CAAC;IAEzB,OAAO,EAAEuK,KAAK,GAAGvK,MAAM,EAAE;MACvBuD,KAAK,CAACgH,KAAK,CAAC,GAAGoZ,IAAI,CAAC1hB,KAAK,GAAGsI,KAAK,CAAC;IACpC;IACAA,KAAK,GAAG,CAAC,CAAC;IACV,IAAI2e,SAAS,GAAGjoB,KAAK,CAACgB,KAAK,GAAG,CAAC,CAAC;IAChC,OAAO,EAAEsI,KAAK,GAAGtI,KAAK,EAAE;MACtBinB,SAAS,CAAC3e,KAAK,CAAC,GAAGoZ,IAAI,CAACpZ,KAAK,CAAC;IAChC;IACA2e,SAAS,CAACjnB,KAAK,CAAC,GAAGsB,KAAK;IACxB,OAAOnC,KAAK,CAACsC,IAAI,EAAE,IAAI,EAAEwlB,SAAS,CAAC;EACrC,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS1B,UAAUA,CAACrnB,GAAG,EAAEE,GAAG,EAAE;EAC5B,IAAID,IAAI,GAAGD,GAAG,CAACqmB,QAAQ;EACvB,OAAO2C,SAAS,CAAC9oB,GAAG,CAAC,GACjBD,IAAI,CAAC,OAAOC,GAAG,IAAI,QAAQ,GAAG,QAAQ,GAAG,MAAM,CAAC,GAChDD,IAAI,CAACD,GAAG;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS8lB,SAASA,CAACriB,MAAM,EAAEvD,GAAG,EAAE;EAC9B,IAAInB,KAAK,GAAG4lB,QAAQ,CAAClhB,MAAM,EAAEvD,GAAG,CAAC;EACjC,OAAOsoB,YAAY,CAACzpB,KAAK,CAAC,GAAGA,KAAK,GAAG6lB,SAAS;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS2D,aAAaA,CAACxpB,KAAK,EAAE;EAC5B,OAAOgC,OAAO,CAAChC,KAAK,CAAC,IAAIkqB,WAAW,CAAClqB,KAAK,CAAC,IACzC,CAAC,EAAE4mB,gBAAgB,IAAI5mB,KAAK,IAAIA,KAAK,CAAC4mB,gBAAgB,CAAC,CAAC;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASqD,SAASA,CAACjqB,KAAK,EAAE;EACxB,IAAIH,IAAI,GAAAgC,OAAA,CAAU7B,KAAK;EACvB,OAAQH,IAAI,IAAI,QAAQ,IAAIA,IAAI,IAAI,QAAQ,IAAIA,IAAI,IAAI,QAAQ,IAAIA,IAAI,IAAI,SAAS,GAChFG,KAAK,KAAK,WAAW,GACrBA,KAAK,KAAK,IAAK;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS2pB,QAAQA,CAACnlB,IAAI,EAAE;EACtB,OAAO,CAAC,CAAC2hB,UAAU,IAAKA,UAAU,IAAI3hB,IAAK;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASslB,QAAQA,CAACtlB,IAAI,EAAE;EACtB,IAAIA,IAAI,IAAI,IAAI,EAAE;IAChB,IAAI;MACF,OAAO+hB,YAAY,CAAChkB,IAAI,CAACiC,IAAI,CAAC;IAChC,CAAC,CAAC,OAAOhF,CAAC,EAAE,CAAC;IACb,IAAI;MACF,OAAQgF,IAAI,GAAG,EAAE;IACnB,CAAC,CAAC,OAAOhF,CAAC,EAAE,CAAC;EACf;EACA,OAAO,EAAE;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIue,UAAU,GAAGgM,QAAQ,CAAC,UAAS1lB,KAAK,EAAE6gB,MAAM,EAAE;EAChD,OAAOiF,iBAAiB,CAAC9lB,KAAK,CAAC,GAC3B0kB,cAAc,CAAC1kB,KAAK,EAAEglB,WAAW,CAACnE,MAAM,EAAE,CAAC,EAAEiF,iBAAiB,EAAE,IAAI,CAAC,CAAC,GACtE,EAAE;AACR,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASrB,EAAEA,CAAC9oB,KAAK,EAAEoqB,KAAK,EAAE;EACxB,OAAOpqB,KAAK,KAAKoqB,KAAK,IAAKpqB,KAAK,KAAKA,KAAK,IAAIoqB,KAAK,KAAKA,KAAM;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASF,WAAWA,CAAClqB,KAAK,EAAE;EAC1B;EACA,OAAOmqB,iBAAiB,CAACnqB,KAAK,CAAC,IAAIqB,cAAc,CAACkB,IAAI,CAACvC,KAAK,EAAE,QAAQ,CAAC,KACpE,CAAC2mB,oBAAoB,CAACpkB,IAAI,CAACvC,KAAK,EAAE,QAAQ,CAAC,IAAIwmB,cAAc,CAACjkB,IAAI,CAACvC,KAAK,CAAC,IAAI6jB,OAAO,CAAC;AAC1F;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI7hB,OAAO,GAAGD,KAAK,CAACC,OAAO;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASqoB,WAAWA,CAACrqB,KAAK,EAAE;EAC1B,OAAOA,KAAK,IAAI,IAAI,IAAIsqB,QAAQ,CAACtqB,KAAK,CAACc,MAAM,CAAC,IAAI,CAAC+oB,UAAU,CAAC7pB,KAAK,CAAC;AACtE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASmqB,iBAAiBA,CAACnqB,KAAK,EAAE;EAChC,OAAOuqB,YAAY,CAACvqB,KAAK,CAAC,IAAIqqB,WAAW,CAACrqB,KAAK,CAAC;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS6pB,UAAUA,CAAC7pB,KAAK,EAAE;EACzB;EACA;EACA,IAAIwqB,GAAG,GAAGd,QAAQ,CAAC1pB,KAAK,CAAC,GAAGwmB,cAAc,CAACjkB,IAAI,CAACvC,KAAK,CAAC,GAAG,EAAE;EAC3D,OAAOwqB,GAAG,IAAI1G,OAAO,IAAI0G,GAAG,IAAIzG,MAAM;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"ssr-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"QfWi\");\n","import style from './style.css';\nimport Basic from '../../components/clients/basic';\n\nconst Home = () => {\n  return (\n    <div class={style.home}>\n      <Basic />\n    </div>\n  );\n};\n\nexport default Home;\n","import { useCallback, useMemo, useState } from 'preact/hooks';\nimport useWs from '../../hooks/useWs';\n\nconst WsClient = () => {\n  const {\n    ws,\n    wsUrl,\n    setWsUrl,\n    history,\n    myChannels,\n    availableChannels,\n    id,\n    wsState,\n    joinChannel,\n    getChannels,\n    heartbeat,\n    broadcastMessage,\n    sendMessageToTargetChannel,\n    sendMessageToJoinedChannels,\n  } = useWs();\n\n  const [message, setMessage] = useState('');\n  const [targetChannel, setTargetChannel] = useState('');\n\n  const messageIsValidJSON = useMemo(() => {\n    try {\n      JSON.parse(message);\n    } catch (e) {\n      return false;\n    }\n    return true;\n  }, [message]);\n\n  const bloopChannel = useCallback(\n    (e) => {\n      e.preventDefault();\n      sendMessageToTargetChannel(\n        JSON.stringify({\n          type: 'bloop',\n          channel: e.target.channel.value,\n        })\n      );\n    },\n    [sendMessageToTargetChannel]\n  );\n\n  const bloopChannels = useCallback(\n    () => sendMessageToJoinedChannels(JSON.stringify({ type: 'bloop' })),\n    [sendMessageToJoinedChannels]\n  );\n\n  const broadcastBloop = useCallback(\n    () => broadcastMessage(JSON.stringify({ type: 'bloop' })),\n    [broadcastMessage]\n  );\n\n  const handleWsUrlChange = useCallback(\n    (e) => {\n      e.preventDefault();\n      setWsUrl(e.target.wsUrl.value);\n    },\n    [setWsUrl]\n  );\n\n  return (\n    <div>\n      <div>state: {wsState}</div>\n      <form onSubmit={handleWsUrlChange}>\n        <input type='text' name='wsUrl' placeholder={wsUrl} />\n        <button type='submit'>go</button>\n      </form>\n\n      {ws && (\n        <>\n          {wsUrl && <div>connected to: {wsUrl}</div>}\n          {id && <div>id: {id}</div>}\n          {heartbeat && <div>heartbeat: {JSON.stringify(heartbeat)}</div>}\n          <form onSubmit={joinChannel}>\n            <input type='text' name='channel' />\n            <button type='submit'>join channel</button>\n          </form>\n          <div>my channels: {JSON.stringify(myChannels)}</div>\n          <div>available channels: {JSON.stringify(availableChannels)}</div>\n          <form onSubmit={bloopChannel}>\n            <input type='text' name='channel' />\n            <button type='submit'>bloop channel</button>\n          </form>\n          <button onClick={getChannels}>get channels</button>\n          <button onClick={bloopChannels}>bloop my channels</button>\n          <button onClick={broadcastBloop}>broadcast bloop</button>\n\n          <div>\n            <div>\n              <div>\n                <label htmlFor='message'>message</label>\n                <textarea\n                  cols={100}\n                  rows={1}\n                  name='message'\n                  placeholder={`{\"hello\": 1}`}\n                  value={message}\n                  onInput={(e) => setMessage(e.target.value)}\n                />\n              </div>\n              <div>\n                <label htmlFor='targetChannel'>target channel</label>\n                <input\n                  name='targetChannel'\n                  type='text'\n                  value={targetChannel}\n                  onInput={(e) => setTargetChannel(e.target.value)}\n                />\n              </div>\n              <button\n                disabled={!messageIsValidJSON}\n                onClick={() =>\n                  sendMessageToTargetChannel(message, targetChannel)\n                }>\n                send to channel\n              </button>\n              <button\n                disabled={!messageIsValidJSON}\n                onClick={() => broadcastMessage(message)}>\n                broadcast\n              </button>\n              {}\n            </div>\n            {!messageIsValidJSON && message.length ? (\n              <div>Invalid JSON</div>\n            ) : (\n              <></>\n            )}\n          </div>\n\n          <div>incoming messages:</div>\n          <div style={{ overflow: 'scroll', height: '200px' }}>\n            {history.map((data) => (\n              <div key={data}>{JSON.stringify(data)}</div>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default WsClient;\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","module.exports = range;\n\n/*\n  range(0, 5); // [0, 1, 2, 3, 4]\n  range(5); // [0, 1, 2, 3, 4]\n  range(-5); // [0, -1, -2, -3, -4]\n  range(0, 20, 5) // [0, 5, 10, 15]\n  range(0, -20, -5) // [0, -5, -10, -15]\n*/\n\nfunction range(start, stop, step) {\n  if (start != null && typeof start != 'number') {\n    throw new Error('start must be a number or null');\n  }\n  if (stop != null && typeof stop != 'number') {\n    throw new Error('stop must be a number or null');\n  }\n  if (step != null && typeof step != 'number') {\n    throw new Error('step must be a number or null');\n  }\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (step == null) {\n    step = stop > start ? 1 : -1;\n  }\n  var toReturn = [];\n  var increasing = start < stop; // heres the change\n  for (; increasing ? start < stop : start > stop; start += step) {\n    toReturn.push(start);\n  }\n  return toReturn;\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","// extracted by mini-css-extract-plugin\nexport default {\"home\":\"home__uRcqa\",\"resource\":\"resource__reFLt\"};","module.exports = require(\"preact\");","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet EMPTY = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingValue = EMPTY;\n\t\t\t\thookItem._nextValue = hookItem._pendingArgs = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\tif (hookItem._pendingValue !== EMPTY) {\n\t\t\t\thookItem._value = hookItem._pendingValue;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t\thookItem._pendingValue = EMPTY;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({ _pendingValue: EMPTY });\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\tconst stateHooks = hookState._component.__hooks._list.filter(\n\t\t\t\t\tx => x._component\n\t\t\t\t);\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = false;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn shouldUpdate || hookState._component.props !== p\n\t\t\t\t\t? prevScu\n\t\t\t\t\t\t? prevScu.call(this, p, s, c)\n\t\t\t\t\t\t: true\n\t\t\t\t\t: false;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._pendingValue = factory();\n\t\tstate._pendingArgs = args;\n\t\tstate._factory = factory;\n\t\treturn state._pendingValue;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any, errorInfo: import('preact').ErrorInfo) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\nexport function useId() {\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal.d').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","// extracted by mini-css-extract-plugin\nexport {};","\nconst EMPTY = {};\n\nexport function assign(obj, props) {\n\t// eslint-disable-next-line guard-for-in\n\tfor (let i in props) {\n\t\tobj[i] = props[i];\n\t}\n\treturn obj;\n}\n\nexport function exec(url, route, opts) {\n\tlet reg = /(?:\\?([^#]*))?(#.*)?$/,\n\t\tc = url.match(reg),\n\t\tmatches = {},\n\t\tret;\n\tif (c && c[1]) {\n\t\tlet p = c[1].split('&');\n\t\tfor (let i=0; i<p.length; i++) {\n\t\t\tlet r = p[i].split('=');\n\t\t\tmatches[decodeURIComponent(r[0])] = decodeURIComponent(r.slice(1).join('='));\n\t\t}\n\t}\n\turl = segmentize(url.replace(reg, ''));\n\troute = segmentize(route || '');\n\tlet max = Math.max(url.length, route.length);\n\tfor (let i=0; i<max; i++) {\n\t\tif (route[i] && route[i].charAt(0)===':') {\n\t\t\tlet param = route[i].replace(/(^:|[+*?]+$)/g, ''),\n\t\t\t\tflags = (route[i].match(/[+*?]+$/) || EMPTY)[0] || '',\n\t\t\t\tplus = ~flags.indexOf('+'),\n\t\t\t\tstar = ~flags.indexOf('*'),\n\t\t\t\tval = url[i] || '';\n\t\t\tif (!val && !star && (flags.indexOf('?')<0 || plus)) {\n\t\t\t\tret = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatches[param] = decodeURIComponent(val);\n\t\t\tif (plus || star) {\n\t\t\t\tmatches[param] = url.slice(i).map(decodeURIComponent).join('/');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\telse if (route[i]!==url[i]) {\n\t\t\tret = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (opts.default!==true && ret===false) return false;\n\treturn matches;\n}\n\nexport function pathRankSort(a, b) {\n\treturn (\n\t\t(a.rank < b.rank) ? 1 :\n\t\t\t(a.rank > b.rank) ? -1 :\n\t\t\t\t(a.index - b.index)\n\t);\n}\n\n// filter out VNodes without attributes (which are unrankeable), and add `index`/`rank` properties to be used in sorting.\nexport function prepareVNodeForRanking(vnode, index) {\n\tvnode.index = index;\n\tvnode.rank = rankChild(vnode);\n\treturn vnode.props;\n}\n\nexport function segmentize(url) {\n\treturn url.replace(/(^\\/+|\\/+$)/g, '').split('/');\n}\n\nexport function rankSegment(segment) {\n\treturn segment.charAt(0)==':' ? (1 + '*+?'.indexOf(segment.charAt(segment.length-1))) || 4 : 5;\n}\n\nexport function rank(path) {\n\treturn segmentize(path).map(rankSegment).join('');\n}\n\nfunction rankChild(vnode) {\n\treturn vnode.props.default ? 0 : rank(vnode.props.path);\n}\n","import { cloneElement, createElement, Component, toChildArray } from 'preact';\nimport { exec, prepareVNodeForRanking, assign, pathRankSort } from './util';\n\nlet customHistory = null;\n\nconst ROUTERS = [];\n\nconst subscribers = [];\n\nconst EMPTY = {};\n\nfunction setUrl(url, type='push') {\n\tif (customHistory && customHistory[type]) {\n\t\tcustomHistory[type](url);\n\t}\n\telse if (typeof history!=='undefined' && history[type+'State']) {\n\t\thistory[type+'State'](null, null, url);\n\t}\n}\n\n\nfunction getCurrentUrl() {\n\tlet url;\n\tif (customHistory && customHistory.location) {\n\t\turl = customHistory.location;\n\t}\n\telse if (customHistory && customHistory.getCurrentLocation) {\n\t\turl = customHistory.getCurrentLocation();\n\t}\n\telse {\n\t\turl = typeof location!=='undefined' ? location : EMPTY;\n\t}\n\treturn `${url.pathname || ''}${url.search || ''}`;\n}\n\n\n\nfunction route(url, replace=false) {\n\tif (typeof url!=='string' && url.url) {\n\t\treplace = url.replace;\n\t\turl = url.url;\n\t}\n\n\t// only push URL into history if we can handle it\n\tif (canRoute(url)) {\n\t\tsetUrl(url, replace ? 'replace' : 'push');\n\t}\n\n\treturn routeTo(url);\n}\n\n\n/** Check if the given URL can be handled by any router instances. */\nfunction canRoute(url) {\n\tfor (let i=ROUTERS.length; i--; ) {\n\t\tif (ROUTERS[i].canRoute(url)) return true;\n\t}\n\treturn false;\n}\n\n\n/** Tell all router instances to handle the given URL.  */\nfunction routeTo(url) {\n\tlet didRoute = false;\n\tfor (let i=0; i<ROUTERS.length; i++) {\n\t\tif (ROUTERS[i].routeTo(url)===true) {\n\t\t\tdidRoute = true;\n\t\t}\n\t}\n\tfor (let i=subscribers.length; i--; ) {\n\t\tsubscribers[i](url);\n\t}\n\treturn didRoute;\n}\n\n\nfunction routeFromLink(node) {\n\t// only valid elements\n\tif (!node || !node.getAttribute) return;\n\n\tlet href = node.getAttribute('href'),\n\t\ttarget = node.getAttribute('target');\n\n\t// ignore links with targets and non-path URLs\n\tif (!href || !href.match(/^\\//g) || (target && !target.match(/^_?self$/i))) return;\n\n\t// attempt to route, if no match simply cede control to browser\n\treturn route(href);\n}\n\n\nfunction handleLinkClick(e) {\n\tif (e.ctrlKey || e.metaKey || e.altKey || e.shiftKey || e.button!==0) return;\n\trouteFromLink(e.currentTarget || e.target || this);\n\treturn prevent(e);\n}\n\n\nfunction prevent(e) {\n\tif (e) {\n\t\tif (e.stopImmediatePropagation) e.stopImmediatePropagation();\n\t\tif (e.stopPropagation) e.stopPropagation();\n\t\te.preventDefault();\n\t}\n\treturn false;\n}\n\n\nfunction delegateLinkHandler(e) {\n\t// ignore events the browser takes care of already:\n\tif (e.ctrlKey || e.metaKey || e.altKey || e.shiftKey || e.button!==0) return;\n\n\tlet t = e.target;\n\tdo {\n\t\tif (String(t.nodeName).toUpperCase()==='A' && t.getAttribute('href')) {\n\t\t\tif (t.hasAttribute('native')) return;\n\t\t\t// if link is handled by the router, prevent browser defaults\n\t\t\tif (routeFromLink(t)) {\n\t\t\t\treturn prevent(e);\n\t\t\t}\n\t\t}\n\t} while ((t=t.parentNode));\n}\n\n\nlet eventListenersInitialized = false;\n\nfunction initEventListeners() {\n\tif (eventListenersInitialized) return;\n\n\tif (typeof addEventListener==='function') {\n\t\tif (!customHistory) {\n\t\t\taddEventListener('popstate', () => {\n\t\t\t\trouteTo(getCurrentUrl());\n\t\t\t});\n\t\t}\n\t\taddEventListener('click', delegateLinkHandler);\n\t}\n\teventListenersInitialized = true;\n}\n\n\nclass Router extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tif (props.history) {\n\t\t\tcustomHistory = props.history;\n\t\t}\n\n\t\tthis.state = {\n\t\t\turl: props.url || getCurrentUrl()\n\t\t};\n\n\t\tinitEventListeners();\n\t}\n\n\tshouldComponentUpdate(props) {\n\t\tif (props.static!==true) return true;\n\t\treturn props.url!==this.props.url || props.onChange!==this.props.onChange;\n\t}\n\n\t/** Check if the given URL can be matched against any children */\n\tcanRoute(url) {\n\t\tconst children = toChildArray(this.props.children);\n\t\treturn this.getMatchingChildren(children, url, false).length > 0;\n\t}\n\n\t/** Re-render children with a new URL to match against. */\n\trouteTo(url) {\n\t\tthis.setState({ url });\n\n\t\tconst didRoute = this.canRoute(url);\n\n\t\t// trigger a manual re-route if we're not in the middle of an update:\n\t\tif (!this.updating) this.forceUpdate();\n\n\t\treturn didRoute;\n\t}\n\n\tcomponentWillMount() {\n\t\tROUTERS.push(this);\n\t\tthis.updating = true;\n\t}\n\n\tcomponentDidMount() {\n\t\tif (customHistory) {\n\t\t\tthis.unlisten = customHistory.listen((location) => {\n\t\t\t\tthis.routeTo(`${location.pathname || ''}${location.search || ''}`);\n\t\t\t});\n\t\t}\n\t\tthis.updating = false;\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (typeof this.unlisten==='function') this.unlisten();\n\t\tROUTERS.splice(ROUTERS.indexOf(this), 1);\n\t}\n\n\tcomponentWillUpdate() {\n\t\tthis.updating = true;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.updating = false;\n\t}\n\n\tgetMatchingChildren(children, url, invoke) {\n\t\treturn children\n\t\t\t.filter(prepareVNodeForRanking)\n\t\t\t.sort(pathRankSort)\n\t\t\t.map( vnode => {\n\t\t\t\tlet matches = exec(url, vnode.props.path, vnode.props);\n\t\t\t\tif (matches) {\n\t\t\t\t\tif (invoke !== false) {\n\t\t\t\t\t\tlet newProps = { url, matches };\n\t\t\t\t\t\tassign(newProps, matches);\n\t\t\t\t\t\tdelete newProps.ref;\n\t\t\t\t\t\tdelete newProps.key;\n\t\t\t\t\t\treturn cloneElement(vnode, newProps);\n\t\t\t\t\t}\n\t\t\t\t\treturn vnode;\n\t\t\t\t}\n\t\t\t}).filter(Boolean);\n\t}\n\n\trender({ children, onChange }, { url }) {\n\t\tlet active = this.getMatchingChildren(toChildArray(children), url, true);\n\n\t\tlet current = active[0] || null;\n\n\t\tlet previous = this.previousUrl;\n\t\tif (url!==previous) {\n\t\t\tthis.previousUrl = url;\n\t\t\tif (typeof onChange==='function') {\n\t\t\t\tonChange({\n\t\t\t\t\trouter: this,\n\t\t\t\t\turl,\n\t\t\t\t\tprevious,\n\t\t\t\t\tactive,\n\t\t\t\t\tcurrent\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current;\n\t}\n}\n\nconst Link = (props) => (\n\tcreateElement('a', assign({ onClick: handleLinkClick }, props))\n);\n\nconst Route = props => createElement(props.component, props);\n\nRouter.subscribers = subscribers;\nRouter.getCurrentUrl = getCurrentUrl;\nRouter.route = route;\nRouter.Router = Router;\nRouter.Route = Route;\nRouter.Link = Link;\nRouter.exec = exec;\n\nexport { subscribers, getCurrentUrl, route, Router, Route, Link, exec };\nexport default Router;\n","import { h } from 'preact';\nimport { Router } from 'preact-router';\n\nimport Header from './header';\n\n// Code-splitting is automated for `routes` directory\nimport Home from '../routes/home';\nimport Synth from '../routes/synth';\nimport MIDI from '../routes/midi';\n\nconst App = () => (\n  <div id='app'>\n    <Header />\n    <main>\n      <Router>\n        <Home path='/' />\n        <Synth path='/synth' />\n        <MIDI path='/midi' />\n      </Router>\n    </main>\n  </div>\n);\n\nexport default App;\n","import './style';\nimport App from './components/app';\n\nexport default App;\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n/**\n * Check if two values are the same value\n * @param {*} x\n * @param {*} y\n * @returns {boolean}\n */\nexport function is(x, y) {\n\treturn (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport function PureComponent(p) {\n\tthis.props = p;\n}\nPureComponent.prototype = new Component();\n// Some third-party libraries check if this property is present\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function (props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n","import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref || null);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = Forwarded;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (children == null) return null;\n\treturn toChildArray(toChildArray(children).map(fn));\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tconst normalized = toChildArray(children);\n\t\tif (normalized.length !== 1) throw 'Children.only';\n\t\treturn normalized[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options, Fragment } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function (error, newVNode, oldVNode, errorInfo) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (newVNode._dom == null) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode, errorInfo);\n};\n\nconst oldUnmount = options.unmount;\noptions.unmount = function (vnode) {\n\t/** @type {import('./internal').Component} */\n\tconst component = vnode._component;\n\tif (component && component._onResolve) {\n\t\tcomponent._onResolve();\n\t}\n\n\t// if the component is still hydrating\n\t// most likely it is because the component is suspended\n\t// we set the vnode.type as `null` so that it is not a typeof function\n\t// so the unmount will remove the vnode._dom\n\tif (component && vnode._hydrating === true) {\n\t\tvnode.type = null;\n\t}\n\n\tif (oldUnmount) oldUnmount(vnode);\n};\n\nfunction detachedClone(vnode, detachedParent, parentDom) {\n\tif (vnode) {\n\t\tif (vnode._component && vnode._component.__hooks) {\n\t\t\tvnode._component.__hooks._list.forEach(effect => {\n\t\t\t\tif (typeof effect._cleanup == 'function') effect._cleanup();\n\t\t\t});\n\n\t\t\tvnode._component.__hooks = null;\n\t\t}\n\n\t\tvnode = assign({}, vnode);\n\t\tif (vnode._component != null) {\n\t\t\tif (vnode._component._parentDom === parentDom) {\n\t\t\t\tvnode._component._parentDom = detachedParent;\n\t\t\t}\n\t\t\tvnode._component = null;\n\t\t}\n\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tdetachedClone(child, detachedParent, parentDom)\n\t\t\t);\n\t}\n\n\treturn vnode;\n}\n\nfunction removeOriginal(vnode, detachedParent, originalParent) {\n\tif (vnode) {\n\t\tvnode._original = null;\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tremoveOriginal(child, detachedParent, originalParent)\n\t\t\t);\n\n\t\tif (vnode._component) {\n\t\t\tif (vnode._component._parentDom === detachedParent) {\n\t\t\t\tif (vnode._dom) {\n\t\t\t\t\toriginalParent.insertBefore(vnode._dom, vnode._nextDom);\n\t\t\t\t}\n\t\t\t\tvnode._component._force = true;\n\t\t\t\tvnode._component._parentDom = originalParent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {Promise} promise The thrown promise\n * @param {import('./internal').VNode<any, any>} suspendingVNode The suspending component\n */\nSuspense.prototype._childDidSuspend = function (promise, suspendingVNode) {\n\tconst suspendingComponent = suspendingVNode._component;\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\t\tsuspendingComponent._onResolve = null;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._onResolve = onResolved;\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\t// If the suspension was during hydration we don't need to restore the\n\t\t\t// suspended children into the _children array\n\t\t\tif (c.state._suspended) {\n\t\t\t\tconst suspendedVNode = c.state._suspended;\n\t\t\t\tc._vnode._children[0] = removeOriginal(\n\t\t\t\t\tsuspendedVNode,\n\t\t\t\t\tsuspendedVNode._component._parentDom,\n\t\t\t\t\tsuspendedVNode._component._originalParentDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * We do not set `suspended: true` during hydration because we want the actual markup\n\t * to remain on screen and hydrate it when the suspense actually gets resolved.\n\t * While in non-hydration cases the usual fallback -> component flow would occour.\n\t */\n\tconst wasHydrating = suspendingVNode._hydrating === true;\n\tif (!c._pendingSuspensionCount++ && !wasHydrating) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.componentWillUnmount = function () {\n\tthis._suspenders = [];\n};\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {import('./internal').SuspenseComponent[\"props\"]} props\n * @param {import('./internal').SuspenseState} state\n */\nSuspense.prototype.render = function (props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children) {\n\t\t\tconst detachedParent = document.createElement('div');\n\t\t\tconst detachedComponent = this._vnode._children[0]._component;\n\t\t\tthis._vnode._children[0] = detachedClone(\n\t\t\t\tthis._detachOnNextRender,\n\t\t\t\tdetachedParent,\n\t\t\t\t(detachedComponent._originalParentDom = detachedComponent._parentDom)\n\t\t\t);\n\t\t}\n\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\t// Wrap fallback tree in a VNode that prevents itself from being marked as aborting mid-hydration:\n\t/** @type {import('./internal').VNode} */\n\tconst fallback =\n\t\tstate._suspended && createElement(Fragment, null, props.fallback);\n\tif (fallback) fallback._hydrating = null;\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tfallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('./internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\t/** @type {import('./internal').Component} */\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function (child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function (props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate =\n\tSuspenseList.prototype.componentDidMount = function () {\n\t\t// Iterate through all children after mounting for two reasons:\n\t\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t\t//    The nodes can now be completely consumed from the linked list.\n\t\t// 2. Handle nodes that might have gotten resolved between render and\n\t\t//    componentDidMount.\n\t\tthis._map.forEach((node, child) => {\n\t\t\tresolve(this, child, node);\n\t\t});\n\t};\n","import { createElement, render } from 'preact';\n\n/**\n * @param {import('../../src/index').RenderableProps<{ context: any }>} props\n */\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\treturn props.children;\n}\n\n/**\n * Portal component\n * @this {import('./internal').Component}\n * @param {object | null | undefined} props\n *\n * TODO: use createRoot() instead of fake root\n */\nfunction Portal(props) {\n\tconst _this = this;\n\tlet container = props._container;\n\n\t_this.componentWillUnmount = function () {\n\t\trender(null, _this._temp);\n\t\t_this._temp = null;\n\t\t_this._container = null;\n\t};\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\t_this.componentWillUnmount();\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props._vnode) {\n\t\tif (!_this._temp) {\n\t\t\t_this._container = container;\n\n\t\t\t// Create a fake DOM parent node that manages a subset of `container`'s children:\n\t\t\t_this._temp = {\n\t\t\t\tnodeType: 1,\n\t\t\t\tparentNode: container,\n\t\t\t\tchildNodes: [],\n\t\t\t\tappendChild(child) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tinsertBefore(child, before) {\n\t\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t\t_this._container.appendChild(child);\n\t\t\t\t},\n\t\t\t\tremoveChild(child) {\n\t\t\t\t\tthis.childNodes.splice(this.childNodes.indexOf(child) >>> 1, 1);\n\t\t\t\t\t_this._container.removeChild(child);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Render our wrapping element into temp.\n\t\trender(\n\t\t\tcreateElement(ContextProvider, { context: _this.context }, props._vnode),\n\t\t\t_this._temp\n\t\t);\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._temp) {\n\t\t_this.componentWillUnmount();\n\t}\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\tconst el = createElement(Portal, { _vnode: vnode, _container: container });\n\tel.containerInfo = container;\n\treturn el;\n}\n","import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\nconst CAMEL_PROPS =\n\t/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\nconst ON_ANI = /^on(Ani|Tra|Tou|BeforeInp|Compo)/;\nconst CAMEL_REPLACE = /[A-Z0-9]/g;\n\nconst IS_DOM = typeof document !== 'undefined';\n\n// Input types for which onchange should not be converted to oninput.\n// type=\"file|checkbox|radio\", plus \"range\" in IE11.\n// (IE11 doesn't support Symbol, which we use here to turn `rad` into `ra` which matches \"range\")\nconst onChangeInputType = type =>\n\t(typeof Symbol != 'undefined' && typeof Symbol() == 'symbol'\n\t\t? /fil|che|rad/\n\t\t: /fil|che|ra/\n\t).test(type);\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n// `UNSAFE_*` lifecycle hooks\n// Preact only ever invokes the unprefixed methods.\n// Here we provide a base \"fallback\" implementation that calls any defined UNSAFE_ prefixed method.\n// - If a component defines its own `componentDidMount()` (including via defineProperty), use that.\n// - If a component defines `UNSAFE_componentDidMount()`, `componentDidMount` is the alias getter/setter.\n// - If anything assigns to an `UNSAFE_*` property, the assignment is forwarded to the unprefixed property.\n// See https://github.com/preactjs/preact/issues/1941\n[\n\t'componentWillMount',\n\t'componentWillReceiveProps',\n\t'componentWillUpdate'\n].forEach(key => {\n\tObject.defineProperty(Component.prototype, key, {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn this['UNSAFE_' + key];\n\t\t},\n\t\tset(v) {\n\t\t\tObject.defineProperty(this, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: v\n\t\t\t});\n\t\t}\n\t});\n});\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\tparent.textContent = '';\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\n\te.persist = empty;\n\te.isPropagationStopped = isPropagationStopped;\n\te.isDefaultPrevented = isDefaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\nfunction empty() {}\n\nfunction isPropagationStopped() {\n\treturn this.cancelBubble;\n}\n\nfunction isDefaultPrevented() {\n\treturn this.defaultPrevented;\n}\n\nconst classNameDescriptorNonEnumberable = {\n\tenumerable: false,\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nfunction handleDomVNode(vnode) {\n\tlet props = vnode.props,\n\t\ttype = vnode.type,\n\t\tnormalizedProps = {};\n\n\tfor (let i in props) {\n\t\tlet value = props[i];\n\n\t\tif (\n\t\t\t(i === 'value' && 'defaultValue' in props && value == null) ||\n\t\t\t// Emulate React's behavior of not rendering the contents of noscript tags on the client.\n\t\t\t(IS_DOM && i === 'children' && type === 'noscript') ||\n\t\t\ti === 'class' ||\n\t\t\ti === 'className'\n\t\t) {\n\t\t\t// Skip applying value if it is null/undefined and we already set\n\t\t\t// a default value\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet lowerCased = i.toLowerCase();\n\t\tif (i === 'defaultValue' && 'value' in props && props.value == null) {\n\t\t\t// `defaultValue` is treated as a fallback `value` when a value prop is present but null/undefined.\n\t\t\t// `defaultValue` for Elements with no value prop is the same as the DOM defaultValue property.\n\t\t\ti = 'value';\n\t\t} else if (i === 'download' && value === true) {\n\t\t\t// Calling `setAttribute` with a truthy value will lead to it being\n\t\t\t// passed as a stringified value, e.g. `download=\"true\"`. React\n\t\t\t// converts it to an empty string instead, otherwise the attribute\n\t\t\t// value will be used as the file name and the file will be called\n\t\t\t// \"true\" upon downloading it.\n\t\t\tvalue = '';\n\t\t} else if (lowerCased === 'ondoubleclick') {\n\t\t\ti = 'ondblclick';\n\t\t} else if (\n\t\t\tlowerCased === 'onchange' &&\n\t\t\t(type === 'input' || type === 'textarea') &&\n\t\t\t!onChangeInputType(props.type)\n\t\t) {\n\t\t\tlowerCased = i = 'oninput';\n\t\t} else if (lowerCased === 'onfocus') {\n\t\t\ti = 'onfocusin';\n\t\t} else if (lowerCased === 'onblur') {\n\t\t\ti = 'onfocusout';\n\t\t} else if (ON_ANI.test(i)) {\n\t\t\ti = lowerCased;\n\t\t} else if (type.indexOf('-') === -1 && CAMEL_PROPS.test(i)) {\n\t\t\ti = i.replace(CAMEL_REPLACE, '-$&').toLowerCase();\n\t\t} else if (value === null) {\n\t\t\tvalue = undefined;\n\t\t}\n\n\t\t// Add support for onInput and onChange, see #3561\n\t\t// if we have an oninput prop already change it to oninputCapture\n\t\tif (lowerCased === 'oninput') {\n\t\t\ti = lowerCased;\n\t\t\tif (normalizedProps[i]) {\n\t\t\t\ti = 'oninputCapture';\n\t\t\t}\n\t\t}\n\n\t\tnormalizedProps[i] = value;\n\t}\n\n\t// Add support for array select values: <select multiple value={[]} />\n\tif (\n\t\ttype == 'select' &&\n\t\tnormalizedProps.multiple &&\n\t\tArray.isArray(normalizedProps.value)\n\t) {\n\t\t// forEach() always returns undefined, which we abuse here to unset the value prop.\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tchild.props.selected =\n\t\t\t\tnormalizedProps.value.indexOf(child.props.value) != -1;\n\t\t});\n\t}\n\n\t// Adding support for defaultValue in select tag\n\tif (type == 'select' && normalizedProps.defaultValue != null) {\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tif (normalizedProps.multiple) {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue.indexOf(child.props.value) != -1;\n\t\t\t} else {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue == child.props.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (props.class && !props.className) {\n\t\tnormalizedProps.class = props.class;\n\t\tObject.defineProperty(\n\t\t\tnormalizedProps,\n\t\t\t'className',\n\t\t\tclassNameDescriptorNonEnumberable\n\t\t);\n\t} else if (props.className && !props.class) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t} else if (props.class && props.className) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t}\n\n\tvnode.props = normalizedProps;\n}\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\t// only normalize props on Element nodes\n\tif (typeof vnode.type === 'string') {\n\t\thandleDomVNode(vnode);\n\t}\n\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n// Only needed for react-relay\nlet currentComponent;\nconst oldBeforeRender = options._render;\noptions._render = function (vnode) {\n\tif (oldBeforeRender) {\n\t\toldBeforeRender(vnode);\n\t}\n\tcurrentComponent = vnode._component;\n};\n\nconst oldDiffed = options.diffed;\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = function (vnode) {\n\tif (oldDiffed) {\n\t\toldDiffed(vnode);\n\t}\n\n\tconst props = vnode.props;\n\tconst dom = vnode._dom;\n\n\tif (\n\t\tdom != null &&\n\t\tvnode.type === 'textarea' &&\n\t\t'value' in props &&\n\t\tprops.value !== dom.value\n\t) {\n\t\tdom.value = props.value == null ? '' : props.value;\n\t}\n\n\tcurrentComponent = null;\n};\n\n// This is a very very private internal function for React it\n// is used to sort-of do runtime dependency injection. So far\n// only `react-relay` makes use of it. It uses it to read the\n// context value.\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n\tReactCurrentDispatcher: {\n\t\tcurrent: {\n\t\t\treadContext(context) {\n\t\t\t\treturn currentComponent._globalContext[context._id].props.value;\n\t\t\t}\n\t\t}\n\t}\n};\n","import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport { is } from './util';\nimport {\n\thydrate,\n\trender,\n\tREACT_ELEMENT_TYPE,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n} from './render';\n\nconst version = '17.0.2'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * In React, `flushSync` flushes the entire tree and forces a rerender. It's\n * implmented here as a no-op.\n * @template Arg\n * @template Result\n * @param {(arg: Arg) => Result} callback function that runs before the flush\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n * @returns\n */\nconst flushSync = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\nexport function startTransition(cb) {\n\tcb();\n}\n\nexport function useDeferredValue(val) {\n\treturn val;\n}\n\nexport function useTransition() {\n\treturn [false, startTransition];\n}\n\n// TODO: in theory this should be done after a VNode is diffed as we want to insert\n// styles/... before it attaches\nexport const useInsertionEffect = useLayoutEffect;\n\n/**\n * This is taken from https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShimClient.js#L84\n * on a high level this cuts out the warnings, ... and attempts a smaller implementation\n */\nexport function useSyncExternalStore(subscribe, getSnapshot) {\n\tconst value = getSnapshot();\n\n\tconst [{ _instance }, forceUpdate] = useState({\n\t\t_instance: { _value: value, _getSnapshot: getSnapshot }\n\t});\n\n\tuseLayoutEffect(() => {\n\t\t_instance._value = value;\n\t\t_instance._getSnapshot = getSnapshot;\n\n\t\tif (!is(_instance._value, getSnapshot())) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\t}, [subscribe, value, getSnapshot]);\n\n\tuseEffect(() => {\n\t\tif (!is(_instance._value, _instance._getSnapshot())) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\n\t\treturn subscribe(() => {\n\t\t\tif (!is(_instance._value, _instance._getSnapshot())) {\n\t\t\t\tforceUpdate({ _instance });\n\t\t\t}\n\t\t});\n\t}, [subscribe]);\n\n\treturn value;\n}\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseInsertionEffect,\n\tuseTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tstartTransition,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n","import range from 'just-range';\n\nconst SORTED_PITCHES = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\nconst ACCIDENTAL_PITCHES = ['Db', 'Eb', 'Gb', 'Ab', 'Bb'];\nconst PITCH_INDEXES = {\n  C: 0,\n  'C#': 1,\n  Db: 1,\n  D: 2,\n  'D#': 3,\n  Eb: 3,\n  E: 4,\n  F: 5,\n  'F#': 6,\n  Gb: 6,\n  G: 7,\n  'G#': 8,\n  Ab: 8,\n  A: 9,\n  'A#': 10,\n  Bb: 10,\n  B: 11,\n};\nconst MIDI_NUMBER_C0 = 12;\nconst MIN_MIDI_NUMBER = MIDI_NUMBER_C0;\nconst MAX_MIDI_NUMBER = 127;\nconst NOTE_REGEX = /([a-g])([#b]?)(\\d+)/;\nconst NOTES_IN_OCTAVE = 12;\n\n// Converts string notes in scientific pitch notation to a MIDI number, or null.\n//\n// Example: \"c#0\" => 13, \"eb5\" => 75, \"abc\" => null\n//\n// References:\n// - http://www.flutopedia.com/octave_notation.htm\n// - https://github.com/danigb/tonal/blob/master/packages/note/index.js\nfunction fromNote(note) {\n  if (!note) {\n    throw Error('Invalid note argument');\n  }\n  const match = NOTE_REGEX.exec(note.toLowerCase());\n  if (!match) {\n    throw Error('Invalid note argument');\n  }\n  const [, letter, accidental, octave] = match;\n  const pitchName = `${letter.toUpperCase()}${accidental}`;\n  const pitchIndex = PITCH_INDEXES[pitchName];\n  if (pitchIndex == null) {\n    throw Error('Invalid note argument');\n  }\n  return MIDI_NUMBER_C0 + pitchIndex + NOTES_IN_OCTAVE * parseInt(octave, 10);\n}\n\n//\n// Build cache for getAttributes\n//\nfunction buildMidiNumberAttributes(midiNumber) {\n  const pitchIndex = (midiNumber - MIDI_NUMBER_C0) % NOTES_IN_OCTAVE;\n  const octave = Math.floor((midiNumber - MIDI_NUMBER_C0) / NOTES_IN_OCTAVE);\n  const pitchName = SORTED_PITCHES[pitchIndex];\n  return {\n    note: `${pitchName}${octave}`,\n    pitchName,\n    octave,\n    midiNumber,\n    isAccidental: ACCIDENTAL_PITCHES.includes(pitchName),\n  };\n}\n\nfunction buildMidiNumberAttributesCache() {\n  return range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).reduce((cache, midiNumber) => {\n    cache[midiNumber] = buildMidiNumberAttributes(midiNumber);\n    return cache;\n  }, {});\n}\n\nconst midiNumberAttributesCache = buildMidiNumberAttributesCache();\n\n// Returns an object containing various attributes for a given MIDI number.\n// Throws error for invalid midiNumbers.\nfunction getAttributes(midiNumber) {\n  const attrs = midiNumberAttributesCache[midiNumber];\n  if (!attrs) {\n    throw Error('Invalid MIDI number');\n  }\n  return attrs;\n}\n\n// Returns all MIDI numbers corresponding to natural notes, e.g. C and not C# or Bb.\nconst NATURAL_MIDI_NUMBERS = range(MIN_MIDI_NUMBER, MAX_MIDI_NUMBER + 1).filter(\n  (midiNumber) => !getAttributes(midiNumber).isAccidental,\n);\n\nexport default {\n  fromNote,\n  getAttributes,\n  MIN_MIDI_NUMBER,\n  MAX_MIDI_NUMBER,\n  NATURAL_MIDI_NUMBERS,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport MidiNumbers from './MidiNumbers';\n\nclass Key extends React.Component {\n  static propTypes = {\n    midiNumber: PropTypes.number.isRequired,\n    naturalKeyWidth: PropTypes.number.isRequired, // Width as a ratio between 0 and 1\n    gliss: PropTypes.bool.isRequired,\n    useTouchEvents: PropTypes.bool.isRequired,\n    accidental: PropTypes.bool.isRequired,\n    active: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool.isRequired,\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    accidentalWidthRatio: PropTypes.number.isRequired,\n    pitchPositions: PropTypes.object.isRequired,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    accidentalWidthRatio: 0.65,\n    pitchPositions: {\n      C: 0,\n      Db: 0.55,\n      D: 1,\n      Eb: 1.8,\n      E: 2,\n      F: 3,\n      Gb: 3.5,\n      G: 4,\n      Ab: 4.7,\n      A: 5,\n      Bb: 5.85,\n      B: 6,\n    },\n  };\n\n  onPlayNoteInput = () => {\n    this.props.onPlayNoteInput(this.props.midiNumber);\n  };\n\n  onStopNoteInput = () => {\n    this.props.onStopNoteInput(this.props.midiNumber);\n  };\n\n  // Key position is represented by the number of natural key widths from the left\n  getAbsoluteKeyPosition(midiNumber) {\n    const OCTAVE_WIDTH = 7;\n    const { octave, pitchName } = MidiNumbers.getAttributes(midiNumber);\n    const pitchPosition = this.props.pitchPositions[pitchName];\n    const octavePosition = OCTAVE_WIDTH * octave;\n    return pitchPosition + octavePosition;\n  }\n\n  getRelativeKeyPosition(midiNumber) {\n    return (\n      this.getAbsoluteKeyPosition(midiNumber) -\n      this.getAbsoluteKeyPosition(this.props.noteRange.first)\n    );\n  }\n\n  render() {\n    const {\n      naturalKeyWidth,\n      accidentalWidthRatio,\n      midiNumber,\n      gliss,\n      useTouchEvents,\n      accidental,\n      active,\n      disabled,\n      children,\n    } = this.props;\n\n    // Need to conditionally include/exclude handlers based on useTouchEvents,\n    // because otherwise mobile taps double fire events.\n    return (\n      <div\n        className={classNames('ReactPiano__Key', {\n          'ReactPiano__Key--accidental': accidental,\n          'ReactPiano__Key--natural': !accidental,\n          'ReactPiano__Key--disabled': disabled,\n          'ReactPiano__Key--active': active,\n        })}\n        style={{\n          left: ratioToPercentage(this.getRelativeKeyPosition(midiNumber) * naturalKeyWidth),\n          width: ratioToPercentage(\n            accidental ? accidentalWidthRatio * naturalKeyWidth : naturalKeyWidth,\n          ),\n        }}\n        onMouseDown={useTouchEvents ? null : this.onPlayNoteInput}\n        onMouseUp={useTouchEvents ? null : this.onStopNoteInput}\n        onMouseEnter={gliss ? this.onPlayNoteInput : null}\n        onMouseLeave={this.onStopNoteInput}\n        onTouchStart={useTouchEvents ? this.onPlayNoteInput : null}\n        onTouchCancel={useTouchEvents ? this.onStopNoteInput : null}\n        onTouchEnd={useTouchEvents ? this.onStopNoteInput : null}\n      >\n        <div className=\"ReactPiano__NoteLabelContainer\">{children}</div>\n      </div>\n    );\n  }\n}\n\nfunction ratioToPercentage(ratio) {\n  return `${ratio * 100}%`;\n}\n\nexport default Key;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport range from 'just-range';\nimport classNames from 'classnames';\n\nimport Key from './Key';\nimport MidiNumbers from './MidiNumbers';\n\nclass Keyboard extends React.Component {\n  static propTypes = {\n    noteRange: noteRangePropType,\n    activeNotes: PropTypes.arrayOf(PropTypes.number),\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    keyWidthToHeight: PropTypes.number.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    gliss: PropTypes.bool,\n    useTouchEvents: PropTypes.bool,\n    // If width is not provided, must have fixed width and height in parent container\n    width: PropTypes.number,\n  };\n\n  static defaultProps = {\n    disabled: false,\n    gliss: false,\n    useTouchEvents: false,\n    keyWidthToHeight: 0.33,\n    renderNoteLabel: () => {},\n  };\n\n  // Range of midi numbers on keyboard\n  getMidiNumbers() {\n    return range(this.props.noteRange.first, this.props.noteRange.last + 1);\n  }\n\n  getNaturalKeyCount() {\n    return this.getMidiNumbers().filter((number) => {\n      const { isAccidental } = MidiNumbers.getAttributes(number);\n      return !isAccidental;\n    }).length;\n  }\n\n  // Returns a ratio between 0 and 1\n  getNaturalKeyWidth() {\n    return 1 / this.getNaturalKeyCount();\n  }\n\n  getWidth() {\n    return this.props.width ? this.props.width : '100%';\n  }\n\n  getHeight() {\n    if (!this.props.width) {\n      return '100%';\n    }\n    const keyWidth = this.props.width * this.getNaturalKeyWidth();\n    return `${keyWidth / this.props.keyWidthToHeight}px`;\n  }\n\n  render() {\n    const naturalKeyWidth = this.getNaturalKeyWidth();\n    return (\n      <div\n        className={classNames('ReactPiano__Keyboard', this.props.className)}\n        style={{ width: this.getWidth(), height: this.getHeight() }}\n      >\n        {this.getMidiNumbers().map((midiNumber) => {\n          const { note, isAccidental } = MidiNumbers.getAttributes(midiNumber);\n          const isActive = !this.props.disabled && this.props.activeNotes.includes(midiNumber);\n          return (\n            <Key\n              naturalKeyWidth={naturalKeyWidth}\n              midiNumber={midiNumber}\n              noteRange={this.props.noteRange}\n              active={isActive}\n              accidental={isAccidental}\n              disabled={this.props.disabled}\n              onPlayNoteInput={this.props.onPlayNoteInput}\n              onStopNoteInput={this.props.onStopNoteInput}\n              gliss={this.props.gliss}\n              useTouchEvents={this.props.useTouchEvents}\n              key={midiNumber}\n            >\n              {this.props.disabled\n                ? null\n                : this.props.renderNoteLabel({\n                    isActive,\n                    isAccidental,\n                    midiNumber,\n                  })}\n            </Key>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nfunction isNaturalMidiNumber(value) {\n  if (typeof value !== 'number') {\n    return false;\n  }\n  return MidiNumbers.NATURAL_MIDI_NUMBERS.includes(value);\n}\n\nfunction noteRangePropType(props, propName, componentName) {\n  const { first, last } = props[propName];\n  if (!first || !last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} must be an object with .first and .last values.`,\n    );\n  }\n  if (!isNaturalMidiNumber(first) || !isNaturalMidiNumber(last)) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName} values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes).`,\n    );\n  }\n  if (first >= last) {\n    return new Error(\n      `Invalid prop ${propName} supplied to ${componentName}. ${propName}.first must be smaller than ${propName}.last.`,\n    );\n  }\n}\n\nexport default Keyboard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport Keyboard from './Keyboard';\n\nclass ControlledPiano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    activeNotes: PropTypes.arrayOf(PropTypes.number.isRequired).isRequired,\n    playNote: PropTypes.func.isRequired,\n    stopNote: PropTypes.func.isRequired,\n    onPlayNoteInput: PropTypes.func.isRequired,\n    onStopNoteInput: PropTypes.func.isRequired,\n    renderNoteLabel: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n  };\n\n  static defaultProps = {\n    renderNoteLabel: ({ keyboardShortcut, midiNumber, isActive, isAccidental }) =>\n      keyboardShortcut ? (\n        <div\n          className={classNames('ReactPiano__NoteLabel', {\n            'ReactPiano__NoteLabel--active': isActive,\n            'ReactPiano__NoteLabel--accidental': isAccidental,\n            'ReactPiano__NoteLabel--natural': !isAccidental,\n          })}\n        >\n          {keyboardShortcut}\n        </div>\n      ) : null,\n  };\n\n  state = {\n    isMouseDown: false,\n    useTouchEvents: false,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.activeNotes !== prevProps.activeNotes) {\n      this.handleNoteChanges({\n        prevActiveNotes: prevProps.activeNotes || [],\n        nextActiveNotes: this.props.activeNotes || [],\n      });\n    }\n  }\n\n  // This function is responsible for diff'ing activeNotes\n  // and playing or stopping notes accordingly.\n  handleNoteChanges = ({ prevActiveNotes, nextActiveNotes }) => {\n    if (this.props.disabled) {\n      return;\n    }\n    const notesStopped = difference(prevActiveNotes, nextActiveNotes);\n    const notesStarted = difference(nextActiveNotes, prevActiveNotes);\n    notesStarted.forEach((midiNumber) => {\n      this.props.playNote(midiNumber);\n    });\n    notesStopped.forEach((midiNumber) => {\n      this.props.stopNote(midiNumber);\n    });\n  };\n\n  getMidiNumberForKey = (key) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = this.props.keyboardShortcuts.find((sh) => sh.key === key);\n    return shortcut && shortcut.midiNumber;\n  };\n\n  getKeyForMidiNumber = (midiNumber) => {\n    if (!this.props.keyboardShortcuts) {\n      return null;\n    }\n    const shortcut = this.props.keyboardShortcuts.find((sh) => sh.midiNumber === midiNumber);\n    return shortcut && shortcut.key;\n  };\n\n  onKeyDown = (event) => {\n    // Don't conflict with existing combinations like ctrl + t\n    if (event.ctrlKey || event.metaKey || event.shiftKey) {\n      return;\n    }\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onPlayNoteInput(midiNumber);\n    }\n  };\n\n  onKeyUp = (event) => {\n    // This *should* also check for event.ctrlKey || event.metaKey || event.ShiftKey like onKeyDown does,\n    // but at least on Mac Chrome, when mashing down many alphanumeric keystrokes at once,\n    // ctrlKey is fired unexpectedly, which would cause onStopNote to NOT be fired, which causes problematic\n    // lingering notes. Since it's fairly safe to call onStopNote even when not necessary,\n    // the ctrl/meta/shift check is removed to fix that issue.\n    const midiNumber = this.getMidiNumberForKey(event.key);\n    if (midiNumber) {\n      this.onStopNoteInput(midiNumber);\n    }\n  };\n\n  onPlayNoteInput = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onPlayNoteInput(midiNumber, this.props.activeNotes);\n  };\n\n  onStopNoteInput = (midiNumber) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // Pass in previous activeNotes for recording functionality\n    this.props.onStopNoteInput(midiNumber, this.props.activeNotes);\n  };\n\n  onMouseDown = () => {\n    this.setState({\n      isMouseDown: true,\n    });\n  };\n\n  onMouseUp = () => {\n    this.setState({\n      isMouseDown: false,\n    });\n  };\n\n  onTouchStart = () => {\n    this.setState({\n      useTouchEvents: true,\n    });\n  };\n\n  renderNoteLabel = ({ midiNumber, isActive, isAccidental }) => {\n    const keyboardShortcut = this.getKeyForMidiNumber(midiNumber);\n    return this.props.renderNoteLabel({ keyboardShortcut, midiNumber, isActive, isAccidental });\n  };\n\n  render() {\n    return (\n      <div\n        style={{ width: '100%', height: '100%' }}\n        onMouseDown={this.onMouseDown}\n        onMouseUp={this.onMouseUp}\n        onTouchStart={this.onTouchStart}\n        data-testid=\"container\"\n      >\n        <Keyboard\n          noteRange={this.props.noteRange}\n          onPlayNoteInput={this.onPlayNoteInput}\n          onStopNoteInput={this.onStopNoteInput}\n          activeNotes={this.props.activeNotes}\n          className={this.props.className}\n          disabled={this.props.disabled}\n          width={this.props.width}\n          keyWidthToHeight={this.props.keyWidthToHeight}\n          gliss={this.state.isMouseDown}\n          useTouchEvents={this.state.useTouchEvents}\n          renderNoteLabel={this.renderNoteLabel}\n        />\n      </div>\n    );\n  }\n}\n\nexport default ControlledPiano;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport difference from 'lodash.difference';\nimport ControlledPiano from './ControlledPiano';\nimport Keyboard from './Keyboard';\n\nclass Piano extends React.Component {\n  static propTypes = {\n    noteRange: PropTypes.object.isRequired,\n    activeNotes: PropTypes.arrayOf(PropTypes.number.isRequired),\n    playNote: PropTypes.func.isRequired,\n    stopNote: PropTypes.func.isRequired,\n    onPlayNoteInput: PropTypes.func,\n    onStopNoteInput: PropTypes.func,\n    renderNoteLabel: PropTypes.func,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    width: PropTypes.number,\n    keyWidthToHeight: PropTypes.number,\n    keyboardShortcuts: PropTypes.arrayOf(\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        midiNumber: PropTypes.number.isRequired,\n      }),\n    ),\n  };\n\n  state = {\n    activeNotes: this.props.activeNotes || [],\n  };\n\n  componentDidUpdate(prevProps) {\n    // Make activeNotes \"controllable\" by using internal\n    // state by default, but allowing prop overrides.\n    if (\n      prevProps.activeNotes !== this.props.activeNotes &&\n      this.state.activeNotes !== this.props.activeNotes\n    ) {\n      this.setState({\n        activeNotes: this.props.activeNotes || [],\n      });\n    }\n  }\n\n  handlePlayNoteInput = (midiNumber) => {\n    this.setState((prevState) => {\n      // Need to be handled inside setState in order to set prevActiveNotes without\n      // race conditions.\n      if (this.props.onPlayNoteInput) {\n        this.props.onPlayNoteInput(midiNumber, { prevActiveNotes: prevState.activeNotes });\n      }\n\n      // Don't append note to activeNotes if it's already present\n      if (prevState.activeNotes.includes(midiNumber)) {\n        return null;\n      }\n      return {\n        activeNotes: prevState.activeNotes.concat(midiNumber),\n      };\n    });\n  };\n\n  handleStopNoteInput = (midiNumber) => {\n    this.setState((prevState) => {\n      // Need to be handled inside setState in order to set prevActiveNotes without\n      // race conditions.\n      if (this.props.onStopNoteInput) {\n        this.props.onStopNoteInput(midiNumber, { prevActiveNotes: this.state.activeNotes });\n      }\n      return {\n        activeNotes: prevState.activeNotes.filter((note) => midiNumber !== note),\n      };\n    });\n  };\n\n  render() {\n    const { activeNotes, onPlayNoteInput, onStopNoteInput, ...otherProps } = this.props;\n    return (\n      <ControlledPiano\n        activeNotes={this.state.activeNotes}\n        onPlayNoteInput={this.handlePlayNoteInput}\n        onStopNoteInput={this.handleStopNoteInput}\n        {...otherProps}\n      />\n    );\n  }\n}\n\nexport default Piano;\n","import MidiNumbers from './MidiNumbers';\n\nfunction createKeyboardShortcuts({ firstNote, lastNote, keyboardConfig }) {\n  let currentMidiNumber = firstNote;\n  let naturalKeyIndex = 0;\n  let keyboardShortcuts = [];\n\n  while (\n    // There are still keys to be assigned\n    naturalKeyIndex < keyboardConfig.length &&\n    // Note to be assigned does not surpass range\n    currentMidiNumber <= lastNote\n  ) {\n    const key = keyboardConfig[naturalKeyIndex];\n    const { isAccidental } = MidiNumbers.getAttributes(currentMidiNumber);\n    if (isAccidental) {\n      keyboardShortcuts.push({\n        key: key.flat,\n        midiNumber: currentMidiNumber,\n      });\n    } else {\n      keyboardShortcuts.push({\n        key: key.natural,\n        midiNumber: currentMidiNumber,\n      });\n      naturalKeyIndex += 1;\n    }\n    currentMidiNumber += 1;\n  }\n  return keyboardShortcuts;\n}\n\nexport default {\n  create: createKeyboardShortcuts,\n  // Preset configurations\n  BOTTOM_ROW: [\n    { natural: 'z', flat: 'a', sharp: 's' },\n    { natural: 'x', flat: 's', sharp: 'd' },\n    { natural: 'c', flat: 'd', sharp: 'f' },\n    { natural: 'v', flat: 'f', sharp: 'g' },\n    { natural: 'b', flat: 'g', sharp: 'h' },\n    { natural: 'n', flat: 'h', sharp: 'j' },\n    { natural: 'm', flat: 'j', sharp: 'k' },\n    { natural: ',', flat: 'k', sharp: 'l' },\n    { natural: '.', flat: 'l', sharp: ';' },\n    { natural: '/', flat: ';', sharp: \"'\" },\n  ],\n  HOME_ROW: [\n    { natural: 'a', flat: 'q', sharp: 'w' },\n    { natural: 's', flat: 'w', sharp: 'e' },\n    { natural: 'd', flat: 'e', sharp: 'r' },\n    { natural: 'f', flat: 'r', sharp: 't' },\n    { natural: 'g', flat: 't', sharp: 'y' },\n    { natural: 'h', flat: 'y', sharp: 'u' },\n    { natural: 'j', flat: 'u', sharp: 'i' },\n    { natural: 'k', flat: 'i', sharp: 'o' },\n    { natural: 'l', flat: 'o', sharp: 'p' },\n    { natural: ';', flat: 'p', sharp: '[' },\n    { natural: \"'\", flat: '[', sharp: ']' },\n  ],\n  QWERTY_ROW: [\n    { natural: 'q', flat: '1', sharp: '2' },\n    { natural: 'w', flat: '2', sharp: '3' },\n    { natural: 'e', flat: '3', sharp: '4' },\n    { natural: 'r', flat: '4', sharp: '5' },\n    { natural: 't', flat: '5', sharp: '6' },\n    { natural: 'y', flat: '6', sharp: '7' },\n    { natural: 'u', flat: '7', sharp: '8' },\n    { natural: 'i', flat: '8', sharp: '9' },\n    { natural: 'o', flat: '9', sharp: '0' },\n    { natural: 'p', flat: '0', sharp: '-' },\n    { natural: '[', flat: '-', sharp: '=' },\n  ],\n};\n","const Header = () => (\n  <header className='items-center fixed w-full h-10 z-50 flex bg-slate-800 shadow-xl gap-4'>\n    <a\n      href='/'\n      className='hover:bg-slate-700 transition-colors h-full flex items-center px-4'>\n      <h1>monitor</h1>\n    </a>\n    <a\n      href='/synth'\n      className='hover:bg-slate-700 transition-colors h-full flex items-center px-4'>\n      <h1>synth</h1>\n    </a>\n    <a\n      href='/midi'\n      className='hover:bg-slate-700 transition-colors h-full flex items-center px-4'>\n      <h1>midi</h1>\n    </a>\n  </header>\n);\n\nexport default Header;\n","import { useCallback, useMemo, useState } from 'preact/hooks';\n\nconst WsMonitor = ({ websocket }) => {\n  const {\n    ws,\n    wsUrl,\n    setWsUrl,\n    history,\n    myChannels,\n    availableChannels,\n    id,\n    wsState,\n    joinChannel,\n    getChannels,\n    heartbeat,\n    broadcastMessage,\n    sendMessageToTargetClient,\n    sendMessageToTargetChannel,\n    sendMessageToJoinedChannels,\n  } = websocket;\n\n  const [message, setMessage] = useState('');\n  const [targetChannel, setTargetChannel] = useState('');\n  const [targetId, setTargetId] = useState('');\n\n  const messageIsValidJSON = useMemo(() => {\n    try {\n      JSON.parse(message);\n    } catch (e) {\n      return false;\n    }\n    return true;\n  }, [message]);\n\n  const handleWsUrlChange = useCallback(\n    (e) => {\n      e.preventDefault();\n      setWsUrl(e.target.wsUrl.value);\n    },\n    [setWsUrl]\n  );\n\n  return (\n    <div className='flex flex-col gap-4'>\n      <div className='flex gap-8'>\n        <div>{wsState}</div>\n        {ws && wsUrl && <div>connected to: {wsUrl}</div>}\n        <form onSubmit={handleWsUrlChange}>\n          <input type='text' name='wsUrl' placeholder={wsUrl} />\n          <button type='submit'>go</button>\n        </form>\n      </div>\n\n      {ws && (\n        <>\n          <div>\n            {id && <div>id: {id}</div>}\n            {heartbeat && <div>heartbeat: {JSON.stringify(heartbeat)}</div>}\n          </div>\n\n          <div>\n            <div className='flex flex-row gap-8'>\n              <button onClick={getChannels}>get channels</button>\n              <form onSubmit={joinChannel}>\n                <input type='text' name='channel' />\n                <button type='submit' className='ml-2'>\n                  join channel\n                </button>\n              </form>\n            </div>\n            <ul>\n              my channels:\n              {myChannels.map(({ channel, members }) => (\n                <li key={channel} className={'ml-2'}>\n                  {channel} | {members.length} members: {members.join(', ')}\n                </li>\n              ))}\n            </ul>\n            <ul>\n              all channels:\n              {availableChannels.map(({ channel, members }) => (\n                <li key={channel} className={'ml-2'}>\n                  {channel}{' '}\n                  {members.length\n                    ? `| ${members.length} members: ${members.join(', ')}`\n                    : '(no members)'}\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          <div>\n            <div className='flex flex-col gap-1'>\n              <div>\n                <label htmlFor='message'>message</label>\n                <textarea\n                  cols={100}\n                  rows={1}\n                  name='message'\n                  placeholder={`{\"hello\": 1}`}\n                  value={message}\n                  onInput={(e) => setMessage(e.target.value)}\n                />\n              </div>\n              <div>\n                <label htmlFor='targetChannel'>target channel</label>\n                <input\n                  name='targetChannel'\n                  type='text'\n                  value={targetChannel}\n                  onInput={(e) => setTargetChannel(e.target.value)}\n                />\n              </div>\n              <div>\n                <label htmlFor='targetChannel'>target client</label>\n                <input\n                  name='targetId'\n                  type='text'\n                  value={targetId}\n                  onInput={(e) => setTargetId(e.target.value)}\n                />\n              </div>\n              <div>\n                <button\n                  disabled={!messageIsValidJSON}\n                  onClick={() => sendMessageToTargetClient(message, targetId)}>\n                  send to another client\n                </button>\n                <button\n                  disabled={!messageIsValidJSON}\n                  onClick={() =>\n                    sendMessageToTargetChannel(message, targetChannel)\n                  }>\n                  send to channel\n                </button>\n                <button\n                  disabled={!messageIsValidJSON}\n                  onClick={() => sendMessageToJoinedChannels(message)}>\n                  send to joined channel\n                </button>\n                <button\n                  disabled={!messageIsValidJSON}\n                  onClick={() => broadcastMessage(message)}>\n                  broadcast\n                </button>\n              </div>\n            </div>\n            {!messageIsValidJSON && message.length ? (\n              <div>Invalid JSON</div>\n            ) : (\n              <></>\n            )}\n          </div>\n\n          <div>incoming messages:</div>\n          <div style={{ overflow: 'scroll', height: '200px' }}>\n            {history.map((data) => (\n              <div key={data}>{JSON.stringify(data)}</div>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default WsMonitor;\n","import style from './style.css';\nimport SynthClient from '../../components/clients/synth';\n\nconst Synth = () => {\n  return (\n    <div class={style.home}>\n      <SynthClient />\n    </div>\n  );\n};\n\nexport default Synth;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import { useCallback, useState, useEffect, useMemo } from 'preact/hooks';\n\nconst useWs = () => {\n  const [ws, setWs] = useState(null);\n  const [wsUrl, setWsUrl] = useState('');\n  const [history, setHistory] = useState([]);\n  const [heartbeat, setHeartbeat] = useState(null);\n  const [myChannels, setMyChannels] = useState([]);\n  const [availableChannels, setAvailableChannels] = useState([]);\n  const [id, setId] = useState(null);\n  const [incomingMessage, setIncomingMessage] = useState('');\n\n  const onMessage = useCallback(async (event) => {\n    const data = await JSON.parse(event.data);\n    switch (data.type) {\n      case 'id':\n        setId(data.id);\n        break;\n      case 'heartbeat':\n        setHeartbeat(data.heartbeat);\n        break;\n      case 'myChannels':\n        setMyChannels(data.channels);\n        break;\n      case 'availableChannels':\n        setAvailableChannels(data.channels);\n        break;\n      default:\n        setHistory((p) => [data, ...p]);\n        break;\n    }\n\n    setIncomingMessage(data);\n  }, []);\n\n  useEffect(() => {\n    if (!window) return;\n\n    const protocol = window.location.protocol.includes('https') ? 'wss' : 'ws';\n    const port = window.location.protocol.includes('https') ? '' : ':8081';\n    const url = `${protocol}://${location.hostname}${port}?channels=welcome`;\n\n    setWsUrl(url);\n  }, []);\n\n  useEffect(() => {\n    if (!wsUrl.length || typeof window === 'undefined') return;\n\n    console.log('attempting to connect to', wsUrl);\n\n    const wsConnection = new WebSocket(wsUrl);\n    wsConnection.onmessage = onMessage;\n\n    setWs(wsConnection);\n  }, [onMessage, wsUrl]);\n\n  const getChannels = useCallback(() => {\n    ws?.send(JSON.stringify({ type: 'myChannels' }));\n    ws?.send(JSON.stringify({ type: 'availableChannels' }));\n  }, [ws]);\n\n  const wsState = useMemo(() => {\n    if (typeof window === 'undefined') return;\n\n    switch (ws?.readyState) {\n      case WebSocket.CONNECTING:\n        return 'connecting';\n      case WebSocket.OPEN:\n        return 'open';\n      case WebSocket.CLOSING:\n        return 'closing';\n      case WebSocket.CLOSED:\n        return 'closed';\n      default:\n        return 'uninitialized';\n    }\n  }, [ws?.readyState]);\n\n  useEffect(() => {\n    if (wsState === 'open') getChannels();\n  }, [getChannels, ws, wsState]);\n\n  const joinChannel = useCallback(\n    (e) => {\n      e.preventDefault();\n      ws?.send(\n        JSON.stringify({ type: 'joinChannel', channel: e.target.channel.value })\n      );\n    },\n    [ws]\n  );\n\n  const broadcastMessage = useCallback(\n    (message) =>\n      wsState === 'open' &&\n      ws?.send(\n        JSON.stringify({\n          type: 'broadcast',\n          message: { ...JSON.parse(message), timestamp: Date.now() },\n        })\n      ),\n    [ws, wsState]\n  );\n\n  const sendMessageToTargetChannel = useCallback(\n    (message, channel) => {\n      wsState === 'open' &&\n        ws?.send(\n          JSON.stringify({\n            ...JSON.parse(message),\n            timestamp: Date.now(),\n            channel,\n          })\n        );\n    },\n    [ws, wsState]\n  );\n\n  const sendMessageToTargetClient = useCallback(\n    (message, targetId) => {\n      console.log('sending to target id', message, targetId);\n      wsState === 'open' &&\n        ws?.send(\n          JSON.stringify({\n            ...JSON.parse(message),\n            timestamp: Date.now(),\n            targetId,\n          })\n        );\n    },\n    [ws, wsState]\n  );\n\n  const sendMessageToJoinedChannels = useCallback(\n    (message) => {\n      wsState === 'open' &&\n        ws?.send(\n          JSON.stringify({ ...JSON.parse(message), timestamp: Date.now() })\n        );\n    },\n    [ws, wsState]\n  );\n\n  return {\n    ws,\n    wsUrl,\n    setWsUrl,\n    history,\n    myChannels,\n    availableChannels,\n    id,\n    incomingMessage,\n    wsState,\n    joinChannel,\n    getChannels,\n    heartbeat,\n    broadcastMessage,\n    sendMessageToTargetClient,\n    sendMessageToTargetChannel,\n    sendMessageToJoinedChannels,\n  };\n};\n\nexport default useWs;\n","// extracted by mini-css-extract-plugin\nexport default {\"home\":\"home__1n+Tk\",\"resource\":\"resource__Gnwfh\"};","import style from './style.css';\nimport MidiClient from '../../components/clients/midi';\n\nconst Synth = () => {\n  return (\n    <div class={style.home}>\n      <MidiClient />\n    </div>\n  );\n};\n\nexport default Synth;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order of result values is determined by the\n * order they occur in the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = difference;\n","export default class PolySynth {\n  constructor() {\n    this.audioContext = new (window.AudioContext ||\n      window.webkitAudioContext)();\n    this.voices = [];\n  }\n\n  playNote(note, velocity = 127) {\n    try {\n      // Create a voice for the note\n      const voice = new Voice(this.audioContext, note, velocity);\n      this.voices.push(voice);\n\n      // Start the voice\n      voice.start();\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  stopNote(note) {\n    try {\n      // Find the voice playing the note\n      const voice = this.voices.find((voice) => voice.note === note);\n\n      if (voice) {\n        // Stop and remove the voice\n        voice.stop();\n        this.voices = this.voices.filter((v) => v !== voice);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n}\n\nclass Voice {\n  constructor(audioContext, note, velocity) {\n    this.audioContext = audioContext;\n    this.note = note;\n    this.velocity = velocity;\n\n    // Create an oscillator\n    this.oscillator = this.audioContext.createOscillator();\n    this.oscillator.frequency.value = getFrequency(note);\n\n    // Create a gain node\n    this.gainNode = this.audioContext.createGain();\n    this.gainNode.gain.value = velocity / 127;\n\n    // Connect the oscillator to the gain node and the gain node to the audio context destination\n    this.oscillator.connect(this.gainNode);\n    this.gainNode.connect(this.audioContext.destination);\n  }\n\n  start() {\n    // Start the oscillator\n    this.oscillator.start();\n  }\n\n  stop() {\n    // Stop the oscillator smoothly over 500ms\n    this.gainNode.gain.linearRampToValueAtTime(\n      0,\n      this.audioContext.currentTime + 0.5\n    );\n\n    // Stop the oscillator completely after 500ms\n    this.oscillator.stop(this.audioContext.currentTime + 0.5);\n  }\n}\n\nfunction getFrequency(note) {\n  return 440 * Math.pow(2, (note - 69) / 12);\n}\n","export default class MIDIHandler {\n  constructor(synth) {\n    console.log('Midihandler constructor', navigator);\n    // Request access to Web MIDI API\n    navigator\n      .requestMIDIAccess()\n      .then(this.onMIDISuccess.bind(this), this.onMIDIFailure.bind(this));\n    this.synth = synth;\n  }\n\n  onMIDIMessage(message) {\n    // Extract MIDI data\n    const [status, note, velocity] = message.data;\n\n    // Check if the message is from the selected input device\n    const selectedInput = this.midiAccess.inputs.get(this.selectedDeviceId);\n    if (selectedInput === message.target) {\n      if (status === 144 && velocity > 0) {\n        // Note-on message\n        // this.synth.playSynth(note, velocity);\n        console.log('note on', note);\n      } else if (status === 128 || (status === 144 && velocity === 0)) {\n        // Note-off message\n        // this.stopSynth(note);\n        console.log('note on', note);\n      }\n    }\n  }\n\n  onMIDISuccess(access) {\n    this.midiAccess = access;\n\n    // Get the list of available MIDI devices\n    const devices = this.midiAccess.inputs.values();\n    const selectElement = document.getElementById('device-select');\n\n    // Populate the device select options\n    for (let device of devices) {\n      const optionElement = document.createElement('option');\n      optionElement.value = device.id;\n      optionElement.text = device.name;\n      selectElement.appendChild(optionElement);\n    }\n\n    // Add event listener for device selection\n    selectElement.addEventListener('change', this.onDeviceSelect);\n\n    // Listen for MIDI messages\n    for (let input of this.midiAccess.inputs.values()) {\n      input.onmidimessage = this.onMIDIMessage;\n    }\n  }\n\n  onMIDIFailure() {\n    console.log('Failed to access MIDI devices');\n  }\n\n  onDeviceSelect(event) {\n    this.selectedDeviceId = event.target.value;\n\n    // Close existing MIDI inputs\n    navigator.requestMIDIAccess().then((midiAccess) => {\n      for (let input of midiAccess.inputs.values()) {\n        input.onmidimessage = null;\n      }\n\n      // Stop all active voices\n      for (let voice of this.synth.voices) {\n        voice.stop();\n      }\n      this.synth.voices = []; // Clear the voices array\n\n      // Listen for MIDI messages on the selected input\n      const selectedInput = midiAccess.inputs.get(this.selectedDeviceId);\n      if (selectedInput) {\n        selectedInput.onmidimessage = this.onMIDIMessage;\n      }\n    });\n  }\n\n  setupKeyboardListener() {\n    // Keyboard event listener for Shift + Spacebar\n    document.addEventListener('keydown', (event) => {\n      if (event.shiftKey && event.code === 'Space') {\n        this.toggleMIDIDeviceSelect();\n      }\n    });\n  }\n\n  toggleMIDIDeviceSelect() {\n    const deviceSelectContainer = document.getElementById(\n      'device-select-container'\n    );\n\n    if (!deviceSelectContainer) return;\n\n    if (deviceSelectContainer.style.display === 'none') {\n      // Show MIDI device select container\n      deviceSelectContainer.style.display = 'block';\n    } else {\n      // Hide MIDI device select container\n      deviceSelectContainer.style.display = 'none';\n    }\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport {};","import { Piano, MidiNumbers } from 'react-piano';\nimport 'react-piano/dist/styles.css';\n\nexport default function MIDIPiano({ onPlayNote, onStopNote }) {\n  const firstNote = MidiNumbers.fromNote('c3');\n  const lastNote = MidiNumbers.fromNote('f5');\n  // const keyboardShortcuts = KeyboardShortcuts.create({\n  //   firstNote,\n  //   lastNote,\n  //   keyboardConfig: KeyboardShortcuts.HOME_ROW,\n  // });\n\n  return (\n    <Piano\n      noteRange={{ first: firstNote, last: lastNote }}\n      playNote={onPlayNote}\n      stopNote={onStopNote}\n      width={1000}\n      // keyboardShortcuts={keyboardShortcuts}\n    />\n  );\n}\n","import { useCallback, useState, useEffect } from 'preact/hooks';\n\nimport PolySynth from '../../../utils/polysynth';\nimport MIDIPiano from './piano';\nimport useWs from '../../../hooks/useWs';\nimport Monitor from '../../wsMonitor';\n\nconst SynthClient = () => {\n  const ws = useWs();\n\n  const {\n    incomingMessage,\n    broadcastMessage,\n    myChannels,\n    sendMessageToTargetClient,\n  } = ws;\n\n  const [polySynth, setPolySynth] = useState(null);\n  const [muteIncoming, setMuteIncoming] = useState(false);\n  const [muteOutgoing, setMuteOutgoing] = useState(false);\n  const [broadcastNotes, setBroadcastNotes] = useState(true);\n\n  useEffect(() => {\n    if (!incomingMessage) return;\n    switch (incomingMessage.type) {\n      case 'playNote':\n        if (!muteIncoming) polySynth?.playNote(...incomingMessage.noteData);\n        break;\n      case 'stopNote':\n        polySynth?.stopNote(...incomingMessage.noteData);\n        break;\n    }\n  }, [polySynth, incomingMessage, muteIncoming]);\n\n  useEffect(() => {\n    if (!window) return;\n    setPolySynth(new PolySynth());\n  }, []);\n\n  const handlePlayNote = useCallback(\n    (note) => {\n      console.log('playing', note);\n      if (polySynth && !muteOutgoing) polySynth.playNote(note);\n      if (broadcastNotes)\n        broadcastMessage(\n          JSON.stringify({ type: 'playNote', noteData: [note] })\n        );\n    },\n    [broadcastMessage, broadcastNotes, muteOutgoing, polySynth]\n  );\n\n  const handleStopNote = useCallback(\n    (note) => {\n      console.log('stopping', note);\n      if (polySynth) polySynth.stopNote(note);\n      if (broadcastNotes)\n        broadcastMessage(\n          JSON.stringify({ type: 'stopNote', noteData: [note] })\n        );\n    },\n    [broadcastMessage, broadcastNotes, polySynth]\n  );\n\n  const [sequencerIntervalId, setSequencerIntervalId] = useState(null);\n\n  const handleSequenceChannel = useCallback(\n    (channelName) => {\n      if (!channelName.length) return;\n\n      if (sequencerIntervalId) clearInterval(sequencerIntervalId);\n      console.log('setting new interval id');\n\n      let sequenceTarget;\n\n      setSequencerIntervalId(\n        setInterval(() => {\n          const targetChannel = myChannels.find(\n            (c) => c.channel === channelName\n          );\n          if (!targetChannel) return;\n          console.log('targetChannel', targetChannel);\n\n          const members = targetChannel.members.filter((m) => m !== ws.id);\n          if (!members.length) return;\n          console.log('members', members);\n\n          const targetIndex = sequenceTarget\n            ? (members.findIndex((m) => m === sequenceTarget) + 1) %\n              members.length\n            : 0;\n\n          sequenceTarget = sequenceTarget ? members[targetIndex] : members[0];\n\n          console.log('sequencing', members, sequenceTarget, targetIndex);\n\n          sendMessageToTargetClient(\n            JSON.stringify({ type: 'playNote', noteData: [69 + targetIndex] }),\n            sequenceTarget\n          );\n\n          setTimeout(() => {\n            sendMessageToTargetClient(\n              JSON.stringify({\n                type: 'stopNote',\n                noteData: [69 + targetIndex],\n              }),\n              sequenceTarget\n            );\n          }, 100);\n        }, 1000)\n      );\n\n      return () => clearInterval(sequencerIntervalId);\n    },\n    [myChannels, sendMessageToTargetClient, sequencerIntervalId, ws.id]\n  );\n\n  return (\n    <div>\n      <Monitor websocket={ws} />\n\n      <div className='mb-2'>\n        <div>\n          <label htmlFor='mute'>mute incoming notes</label>\n          <input\n            name={'mute incoming'}\n            type='checkbox'\n            checked={muteIncoming}\n            onChange={() => setMuteIncoming((p) => !p)}\n          />\n        </div>\n        <div>\n          <label htmlFor='mute'>mute outgoing notes</label>\n          <input\n            name={'mute outgoing'}\n            type='checkbox'\n            checked={muteOutgoing}\n            onChange={() => setMuteOutgoing((p) => !p)}\n          />\n        </div>\n        <div>\n          <label htmlFor='broadcastNotes'>broadcast notes</label>\n          <input\n            name={'broadcastNotes'}\n            type='checkbox'\n            checked={broadcastNotes}\n            onChange={() => setBroadcastNotes(!broadcastNotes)}\n          />\n        </div>\n      </div>\n      <div className='flex flex-row gap-2 mb-2'>\n        <span>sequence to channel</span>\n        <select\n          className='px-1'\n          name='channel'\n          onChange={(e) => handleSequenceChannel(e.target.value)}>\n          <>\n            <option />\n            {myChannels.map((c) => (\n              <option key={c.channel}>{c.channel}</option>\n            ))}\n          </>\n        </select>\n      </div>\n      <MIDIPiano onPlayNote={handlePlayNote} onStopNote={handleStopNote} />\n    </div>\n  );\n};\n\nexport default SynthClient;\n","// extracted by mini-css-extract-plugin\nexport default {\"home\":\"home__Tk3DL\",\"resource\":\"resource__-GqBH\"};","import { useState, useEffect } from 'preact/hooks';\n\nimport MIDIHandler from '../../../utils/midihandler';\nimport useWs from '../../../hooks/useWs';\nimport Monitor from '../../wsMonitor';\n\nconst MidiClient = () => {\n  const ws = useWs();\n\n  const [, setMidiHandler] = useState(null);\n\n  useEffect(() => {\n    if (!window || !navigator) return;\n    setMidiHandler(new MIDIHandler());\n  }, []);\n\n  return (\n    <div>\n      <Monitor websocket={ws} />\n      <div id='device-select-container' style='display: block;'>\n        <p>press shift+space to toggle controls</p>\n        <label for='device-select'>Select MIDI Device:</label>\n        <select id='device-select' />\n      </div>\n    </div>\n  );\n};\n\nexport default MidiClient;\n"],"sourceRoot":""}